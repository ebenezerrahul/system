var playlistDmaker=(()=>{var p,M=Object.create,R=Object.defineProperty,D=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,V=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,B=(e,t)=>function(){return t||(0,e[F(e)[0]])((t={exports:{}}).exports,t),t.exports},U=(t,n,r,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of F(n))j.call(t,e)||e===r||R(t,e,{get:()=>n[e],enumerable:!(a=D(n,e))||a.enumerable});return t},e=(e,t,n)=>(n=null!=e?M(V(e)):{},U(!t&&e&&e.__esModule?n:R(n,"default",{value:e,enumerable:!0}),e)),b=B({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),$=B({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=n}}),H=B({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var n=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),Z=B({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:a}=H(),i=$(),o=(e=t.exports={}).re=[],s=e.safeRe=[],l=e.src=[],u=e.t={},c=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",a],[t,r]],a=(e,t,n)=>{var r=(e=>{for(var[t,n]of d)e=e.split(t+"*").join(`${t}{0,${n}}`).split(t+"+").join(`${t}{1,${n}}`);return e})(t),a=c++;i(e,a,t),u[e]=a,l[a]=t,o[a]=new RegExp(t,n?"g":void 0),s[a]=new RegExp(r,n?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),a("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",t+"+"),a("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),a("FULL",`^${l[u.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),a("LOOSE",`^${l[u.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",l[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),a("XRANGEIDENTIFIER",l[u.NUMERICIDENTIFIER]+"|x|X|\\*"),a("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),a("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),a("COERCERTL",l[u.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),W=B({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var n=Object.freeze({loose:!0}),r=Object.freeze({});t.exports=e=>e?"object"!=typeof e?n:e:r}}),K=B({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var a=/^[0-9]+$/,n=(e,t)=>{var n=a.test(e),r=a.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r||(!r||n)&&e<t?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}}}),Y=B({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var a=$(),{MAX_LENGTH:n,MAX_SAFE_INTEGER:r}=H(),{safeRe:i,t:o}=Z(),s=W(),l=K()["compareIdentifiers"],u=class{constructor(e,t){if(t=s(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw new TypeError(`version is longer than ${n} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?i[o.LOOSE]:i[o.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<r)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(a("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return l(n,r)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{var n=this.build[t],r=e.build[t];if(a("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return l(n,r)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let e=!1===n?[t]:[t,r];(0!==l(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=u}}),q=B({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var r=Y();t.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))}}),t=B({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var r=q();t.exports=(e,t,n)=>0<r(e,t,n)}}),X=B({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),G=B({"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"(e){"use strict";function s(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a="error",i=n,o=c.ReactDebugCurrentFrame.getStackAddendum();""!==o&&(e+="%s",i=i.concat([o])),(o=i.map(function(e){return String(e)})).unshift("Warning: "+e),Function.prototype.apply.call(console[a],console,o)}function l(e){var t=e.getSnapshot,e=e.value;try{var n=t();return!d(e,n)}catch(e){return 1}}var u,c,d,m,f,h,p,g,y,t;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),u=b(),c=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},m=u.useState,f=u.useEffect,h=u.useLayoutEffect,p=u.useDebugValue,y=g=!1,t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),t=void 0!==u.useSyncExternalStore?u.useSyncExternalStore:!t?function(e,t,n){return t()}:function(e,t,n){g||void 0!==u.startTransition&&(g=!0,s("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var r=t(),a=(y||(a=t(),d(r,a))||(s("The result of getSnapshot should be cached to avoid an infinite loop"),y=!0),m({inst:{value:r,getSnapshot:t}})),i=a[0].inst,o=a[1];return h(function(){i.value=r,i.getSnapshot=t,l(i)&&o({inst:i})},[e,r,t]),f(function(){l(i)&&o({inst:i});return e(function(){l(i)&&o({inst:i})})},[e]),p(r),r},e.useSyncExternalStore=t,"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),J=B({"../../node_modules/use-sync-external-store/shim/index.js"(e,t){"use strict";t.exports=G()}}),Q=B({"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js"(e){"use strict";var t,n,c,i,d,m,f,h;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),t=b(),n=J(),c="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,d=t.useRef,m=t.useEffect,f=t.useMemo,h=t.useDebugValue,e.useSyncExternalStoreWithSelector=function(e,n,o,s,l){var u;null===(r=d(null)).current?(u={hasValue:!1,value:null},r.current=u):u=r.current;var t=(r=f(function(){var r,a,i=!1,e=function(e){if(i)return t=a,c(r,e)||(n=s(e),void 0!==l&&l(t,n))?t:(r=e,a=n);i=!0;var t=s(r=e);if(void 0!==l&&u.hasValue){var n=u.value;if(l(n,t))return a=n}return a=t},t=void 0===o?null:o;return[function(){return e(n())},null===t?void 0:function(){return e(t())}]},[n,o,s,l]))[0],r=r[1],a=i(e,t,r);return m(function(){u.hasValue=!0,u.value=a},[a]),h(a),a},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),n=B({"../../node_modules/use-sync-external-store/shim/with-selector.js"(e,t){"use strict";t.exports=Q()}}),ee=B({"../../node_modules/react-range/lib/types.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=void 0,e.Direction={Right:"to right",Left:"to left",Down:"to bottom",Up:"to top"}}}),ne=B({"../../node_modules/react-range/lib/utils.js"(l){"use strict";var y=l&&l.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},r=(Object.defineProperty(l,"__esModule",{value:!0}),l.isIOS=l.useThumbOverlap=l.assertUnreachable=l.voidFn=l.getTrackBackground=l.replaceAt=l.schd=l.translate=l.getClosestThumbIndex=l.translateThumbs=l.getPaddingAndBorder=l.getMargin=l.checkInitialOverlap=l.checkValuesAgainstBoundaries=l.checkBoundaries=l.isVertical=l.relativeValue=l.normalizeValue=l.isStepDivisible=l.isTouchEvent=l.getStepDecimals=void 0,b()),o=ee();function s(e){return e===o.Direction.Up||e===o.Direction.Down}function a(e,t,n){e.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}l.getStepDecimals=function(e){e=e.toString().split(".")[1];return e?e.length:0},l.isTouchEvent=function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length},l.isStepDivisible=function(e,t,n){return t=Number(((t-e)/n).toFixed(8)),parseInt(t.toString(),10)===t},l.normalizeValue=function(e,t,n,r,a,i,o){var s=1e11;if(e=Math.round(e*s)/s,!i){var i=o[t-1],o=o[t+1];if(i&&e<i)return i;if(o&&o<e)return o}return r<e?r:e<n?n:(t=Math.floor(e*s-n*s)%Math.floor(a*s),i=Math.floor(e*s-Math.abs(t)),o=0==t?e:i/s,r=Math.abs(t/s)<a/2?o:o+a,n=(0,l.getStepDecimals)(a),parseFloat(r.toFixed(n)))},l.relativeValue=function(e,t,n){return(e-t)/(n-t)},l.isVertical=s,l.checkBoundaries=function(e,t,n){if(n<=t)throw new RangeError("min (".concat(t,") is equal/bigger than max (").concat(n,")"));if(e<t)throw new RangeError("value (".concat(e,") is smaller than min (").concat(t,")"));if(n<e)throw new RangeError("value (".concat(e,") is bigger than max (").concat(n,")"))},l.checkValuesAgainstBoundaries=function(e,t,n){return e<t?t:n<e?n:e},l.checkInitialOverlap=function(n){if(!(n.length<2||n.slice(1).every(function(e,t){return n[t]<=e})))throw new RangeError("values={[".concat(n,"]} needs to be sorted when allowOverlap={false}"))},l.getMargin=function(e){return e=window.getComputedStyle(e),{top:parseInt(e["margin-top"],10),bottom:parseInt(e["margin-bottom"],10),left:parseInt(e["margin-left"],10),right:parseInt(e["margin-right"],10)}},l.getPaddingAndBorder=function(e){return e=window.getComputedStyle(e),{top:parseInt(e["padding-top"],10)+parseInt(e["border-top-width"],10),bottom:parseInt(e["padding-bottom"],10)+parseInt(e["border-bottom-width"],10),left:parseInt(e["padding-left"],10)+parseInt(e["border-left-width"],10),right:parseInt(e["padding-right"],10)+parseInt(e["border-right-width"],10)}},l.translateThumbs=function(e,n,t){var r=t?-1:1;e.forEach(function(e,t){return a(e,r*n[t].x,n[t].y)})},l.getClosestThumbIndex=function(e,t,n,r){for(var a=0,i=u(e[0],t,n,r),o=1;o<e.length;o++){var s=u(e[o],t,n,r);s<i&&(i=s,a=o)}return a},l.translate=a;l.schd=function(n){var r,a=null;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r=e,a=a||requestAnimationFrame(function(){a=null,n.apply(void 0,r)})}},l.replaceAt=function(e,t,n){return(e=e.slice(0))[t]=n,e},l.getTrackBackground=function(e){var t=e.values,r=e.colors,n=e.min,a=e.max,i=void 0===(i=e.direction)?o.Direction.Right:i;return(e=void 0!==(e=e.rtl)&&e)&&i===o.Direction.Right?i=o.Direction.Left:e&&o.Direction.Left&&(i=o.Direction.Right),e=t.slice(0).sort(function(e,t){return e-t}).map(function(e){return(e-n)/(a-n)*100}).reduce(function(e,t,n){return"".concat(e,", ").concat(r[n]," ").concat(t,"%, ").concat(r[n+1]," ").concat(t,"%")},""),"linear-gradient(".concat(i,", ").concat(r[0]," 0%").concat(e,", ").concat(r[r.length-1]," 100%)")},l.voidFn=function(){},l.assertUnreachable=function(e){throw new Error("Didn't expect to get here")};function v(e,t,o,s,l,u,c){function d(r){var a=f(o[r],s[r],l,u,c),i=t[r].x;t.forEach(function(e,t){var e=e.x,n=f(o[t],s[t],l,u,c);r!==t&&(e<=i&&i<=e+n||e<=i+a&&i+a<=e+n)&&!m.includes(t)&&(m.push(r),m.push(t),m=y(y([],m,!0),[r,t],!1),d(t))})}void 0===c&&(c=function(e){return e});var m=[];return d(e),Array.from(new Set(m.sort()))}var f=function(e,r,a,i,o){return void 0===o&&(o=function(e){return e}),Math.ceil(y([e],Array.from(e.children),!0).reduce(function(e,t){var n=Math.ceil(t.getBoundingClientRect().width);return t.innerText&&t.innerText.includes(a)&&0===t.childElementCount&&((t=t.cloneNode(!0)).innerHTML=o(r.toFixed(i)),t.style.visibility="hidden",document.body.appendChild(t),n=Math.ceil(t.getBoundingClientRect().width),document.body.removeChild(t)),e<n?n:e},e.getBoundingClientRect().width))};function u(e,t,n,r){var e=e.getBoundingClientRect(),a=e.left,i=e.top,o=e.width,e=e.height;return s(r)?Math.abs(n-(i+e/2)):Math.abs(t-(a+o/2))}l.useThumbOverlap=function(u,c,d,e,m,f){void 0===m&&(m=" - "),void 0===f&&(f=function(e){return e});var h=(0,l.getStepDecimals)(e=void 0===e?.1:e),e=(0,r.useState)({}),t=e[0],p=e[1],e=(0,r.useState)(f(c[d].toFixed(h))),n=e[0],g=e[1];return(0,r.useEffect)(function(){var e,a,t,n,r,i,o,s,l;!u||(l=u.getThumbs()).length<1||(e={},a=u.getOffsets(),t=v(d,a,l,c,m,h,f),n=f(c[d].toFixed(h)),t.length&&(r=t.reduce(function(e,t,n,r){return e.length?y(y([],e,!0),[a[r[n]].x],!1):[a[r[n]].x]},[]),Math.min.apply(Math,r)===a[d].x?(i=[],t.forEach(function(e){i.push(c[e].toFixed(h))}),n=Array.from(new Set(i.sort(function(e,t){return parseFloat(e)-parseFloat(t)}))).map(f).join(m),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r),l=l[t[r.indexOf(s)]].getBoundingClientRect().width,e.left="".concat(Math.abs(o-(s+l))/2,"px"),e.transform="translate(-50%, 0)"):e.visibility="hidden"),g(n),p(e))},[u,c]),[n,t]};l.isIOS=function(){var e=(null==(e=navigator.userAgentData)?void 0:e.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(e)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}}}),re=B({"../../node_modules/react-range/lib/Range.js"(e){"use strict";var r,t,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},h=e&&e.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},s=(Object.defineProperty(e,"__esModule",{value:!0}),o(b())),S=ne(),x=ee(),l=["ArrowRight","ArrowUp","k","PageUp"],u=["ArrowLeft","ArrowDown","j","PageDown"],o=(t=s.Component,n(c,t),c.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.values,r=e.min,a=e.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",t.onResize)},unobserve:function(){return window.removeEventListener("resize",t.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),this.props.allowOverlap||(0,S.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(e){return(0,S.checkBoundaries)(e,t.props.min,t.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,S.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(e){(0,S.isStepDivisible)(r,e,a)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},c.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.max,a=n.min,i=n.step,o=n.values,n=n.rtl;e.max===r&&e.min===a&&e.step===i||this.updateMarkRefs(this.props),(0,S.translateThumbs)(this.getThumbs(),this.getOffsets(),n),e.max===r&&e.min===a&&e.step===i&&t.markOffsets.length===this.state.markOffsets.length||(this.calculateMarkOffsets(),o.forEach(function(e){(0,S.isStepDivisible)(a,e,i)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},c.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},c.prototype.render=function(){var r=this,e=this.props,a=e.label,i=e.labelledBy,t=e.renderTrack,o=e.renderThumb,n=e.renderMark,s=void 0===n?function(){return null}:n,l=e.values,u=e.min,c=e.max,d=e.allowOverlap,m=e.disabled,n=this.state,e=n.draggedThumbIndex,f=n.thumbZIndexes,n=n.markOffsets;return t({props:{style:{transform:"scale(1)",cursor:-1<e?"grabbing":this.props.draggableTrack?(0,S.isVertical)(this.props.direction)?"ns-resize":"ew-resize":1!==l.length||m?"inherit":"pointer"},onMouseDown:m?S.voidFn:this.onMouseDownTrack,onTouchStart:m?S.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:-1<this.state.draggedThumbIndex,disabled:m,children:h(h([],n.map(function(e,t,n){return s({props:{style:r.props.direction===x.Direction.Left||r.props.direction===x.Direction.Right?{position:"absolute",left:"".concat(e[0],"px"),marginTop:"".concat(e[1],"px")}:{position:"absolute",top:"".concat(e[0],"px"),marginLeft:"".concat(e[1],"px")},key:"mark".concat(t),ref:r.markRefs[t]},index:t})}),!0),l.map(function(e,t){var n=r.state.draggedThumbIndex===t;return o({index:t,value:e,isDragged:n,props:{style:{position:"absolute",zIndex:f[t],cursor:m?"inherit":n?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:t,tabIndex:m?void 0:0,"aria-valuemax":!d&&l[t+1]||c,"aria-valuemin":!d&&l[t-1]||u,"aria-valuenow":e,draggable:!1,ref:r.thumbRefs[t],"aria-label":a,"aria-labelledby":i,role:"slider",onKeyDown:m?S.voidFn:r.onKeyDown,onKeyUp:m?S.voidFn:r.onKeyUp}})}),!0)})},c.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:x.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},c);function c(e){var E=t.call(this,e)||this;if(E.trackRef=s.createRef(),E.thumbRefs=[],E.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(E.props.values.length).fill(0).map(function(e,t){return t}),isChanged:!1,markOffsets:[]},E.getOffsets=function(){var i,o,e=E.props,s=e.direction,l=e.values,u=e.min,c=e.max,e=E.trackRef.current;return e?(i=e.getBoundingClientRect(),o=(0,S.getPaddingAndBorder)(e),E.getThumbs().map(function(e,t){var n={x:0,y:0},r=e.getBoundingClientRect(),a=(0,S.getMargin)(e);switch(s){case x.Direction.Right:return n.x=-1*(a.left+o.left),n.y=-1*((r.height-i.height)/2+o.top),n.x+=i.width*(0,S.relativeValue)(l[t],u,c)-r.width/2,n;case x.Direction.Left:return n.x=-1*(a.right+o.right),n.y=-1*((r.height-i.height)/2+o.top),n.x+=i.width-i.width*(0,S.relativeValue)(l[t],u,c)-r.width/2,n;case x.Direction.Up:return n.x=-1*((r.width-i.width)/2+a.left+o.left),n.y=-o.left,n.y+=i.height-i.height*(0,S.relativeValue)(l[t],u,c)-r.height/2,n;case x.Direction.Down:return n.x=-1*((r.width-i.width)/2+a.left+o.left),n.y=-o.left,n.y+=i.height*(0,S.relativeValue)(l[t],u,c)-r.height/2,n;default:return(0,S.assertUnreachable)(s)}})):(console.warn("No track element found."),[])},E.getThumbs=function(){return E.trackRef&&E.trackRef.current?Array.from(E.trackRef.current.children).filter(function(e){return e.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},E.getTargetIndex=function(t){return E.getThumbs().findIndex(function(e){return e===t.target||e.contains(t.target)})},E.addTouchEvents=function(e){document.addEventListener("touchmove",E.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",E.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",E.schdOnEnd,{passive:!1})},E.addMouseEvents=function(e){document.addEventListener("mousemove",E.schdOnMouseMove),document.addEventListener("mouseup",E.schdOnEnd)},E.onMouseDownTrack=function(t){var e,n;0!==t.button||(0,S.isIOS)()||(t.persist(),t.preventDefault(),E.addMouseEvents(t.nativeEvent),1<E.props.values.length&&E.props.draggableTrack?E.thumbRefs.some(function(e){return null==(e=e.current)?void 0:e.contains(t.target)})||E.setState({draggedTrackPos:[t.clientX,t.clientY]},function(){return E.onMove(t.clientX,t.clientY)}):(n=(0,S.getClosestThumbIndex)(E.thumbRefs.map(function(e){return e.current}),t.clientX,t.clientY,E.props.direction),null!=(e=E.thumbRefs[n].current)&&e.focus(),E.setState({draggedThumbIndex:n},function(){return E.onMove(t.clientX,t.clientY)})))},E.onResize=function(){(0,S.translateThumbs)(E.getThumbs(),E.getOffsets(),E.props.rtl),E.calculateMarkOffsets()},E.onTouchStartTrack=function(t){var e,n;t.persist(),E.addTouchEvents(t.nativeEvent),1<E.props.values.length&&E.props.draggableTrack?E.thumbRefs.some(function(e){return null==(e=e.current)?void 0:e.contains(t.target)})||E.setState({draggedTrackPos:[t.touches[0].clientX,t.touches[0].clientY]},function(){return E.onMove(t.touches[0].clientX,t.touches[0].clientY)}):(n=(0,S.getClosestThumbIndex)(E.thumbRefs.map(function(e){return e.current}),t.touches[0].clientX,t.touches[0].clientY,E.props.direction),null!=(e=E.thumbRefs[n].current)&&e.focus(),E.setState({draggedThumbIndex:n},function(){return E.onMove(t.touches[0].clientX,t.touches[0].clientY)}))},E.onMouseOrTouchStart=function(e){var t,n;E.props.disabled||!(t=(0,S.isTouchEvent)(e))&&0!==e.button||-1===(n=E.getTargetIndex(e))||(t?E.addTouchEvents(e):E.addMouseEvents(e),E.setState({draggedThumbIndex:n,thumbZIndexes:E.state.thumbZIndexes.map(function(e,t){return t===n?Math.max.apply(Math,E.state.thumbZIndexes):e<=E.state.thumbZIndexes[n]?e:e-1})}))},E.onMouseMove=function(e){e.preventDefault(),E.onMove(e.clientX,e.clientY)},E.onTouchMove=function(e){e.preventDefault(),E.onMove(e.touches[0].clientX,e.touches[0].clientY)},E.onKeyDown=function(e){var t=E.props,n=t.values,r=t.onChange,a=t.step,i=t.rtl,t=t.direction,o=E.state.isChanged,s=E.getTargetIndex(e.nativeEvent),i=i||t===x.Direction.Left||t===x.Direction.Down?-1:1;-1!==s&&(l.includes(e.key)?(e.preventDefault(),E.setState({draggedThumbIndex:s,isChanged:!0}),r((0,S.replaceAt)(n,s,E.normalizeValue(n[s]+i*("PageUp"===e.key?10*a:a),s)))):u.includes(e.key)?(e.preventDefault(),E.setState({draggedThumbIndex:s,isChanged:!0}),r((0,S.replaceAt)(n,s,E.normalizeValue(n[s]-i*("PageDown"===e.key?10*a:a),s)))):"Tab"===e.key?E.setState({draggedThumbIndex:-1},function(){o&&E.fireOnFinalChange()}):o&&E.fireOnFinalChange())},E.onKeyUp=function(e){var t=E.state.isChanged;E.setState({draggedThumbIndex:-1},function(){t&&E.fireOnFinalChange()})},E.onMove=function(e,t){var n=E.state,r=n.draggedThumbIndex,n=n.draggedTrackPos,a=E.props,i=a.direction,o=a.min,s=a.max,l=a.onChange,u=a.values,c=a.step,a=a.rtl;if(-1===r&&-1===n[0]&&-1===n[1])return null;var d=E.trackRef.current;if(!d)return null;var m=d.getBoundingClientRect(),f=(0,S.isVertical)(i)?m.height:m.width;if(-1!==n[0]&&-1!==n[1]){var h=e-n[0],p=t-n[1],g=0;switch(i){case x.Direction.Right:case x.Direction.Left:g=h/f*(s-o);break;case x.Direction.Down:case x.Direction.Up:g=p/f*(s-o);break;default:(0,S.assertUnreachable)(i)}if(a&&(g*=-1),Math.abs(g)>=c/2){for(var y=0;y<E.thumbRefs.length;y++){if(u[y]===s&&1===Math.sign(g)||u[y]===o&&-1===Math.sign(g))return;var v=u[y]+g;s<v?g=s-u[y]:v<o&&(g=o-u[y])}for(var b=u.slice(0),y=0;y<E.thumbRefs.length;y++)b=(0,S.replaceAt)(b,y,E.normalizeValue(u[y]+g,y));E.setState({draggedTrackPos:[e,t]}),l(b)}}else{var w=0;switch(i){case x.Direction.Right:w=(e-m.left)/f*(s-o)+o;break;case x.Direction.Left:w=(f-(e-m.left))/f*(s-o)+o;break;case x.Direction.Down:w=(t-m.top)/f*(s-o)+o;break;case x.Direction.Up:w=(f-(t-m.top))/f*(s-o)+o;break;default:(0,S.assertUnreachable)(i)}a&&(w=s+o-w),Math.abs(u[r]-w)>=c/2&&l((0,S.replaceAt)(u,r,E.normalizeValue(w,r)))}},E.normalizeValue=function(e,t){var n=E.props,r=n.min,a=n.max,i=n.step,o=n.allowOverlap,n=n.values;return(0,S.normalizeValue)(e,t,r,a,i,o,n)},E.onEnd=function(e){if(e.preventDefault(),document.removeEventListener("mousemove",E.schdOnMouseMove),document.removeEventListener("touchmove",E.schdOnTouchMove),document.removeEventListener("mouseup",E.schdOnEnd),document.removeEventListener("touchend",E.schdOnEnd),document.removeEventListener("touchcancel",E.schdOnEnd),-1===E.state.draggedThumbIndex&&-1===E.state.draggedTrackPos[0]&&-1===E.state.draggedTrackPos[1])return null;E.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){E.fireOnFinalChange()})},E.fireOnFinalChange=function(){E.setState({isChanged:!1});var e=E.props,t=e.onFinalChange,e=e.values;t&&t(e)},E.updateMarkRefs=function(e){if(e.renderMark){E.numOfMarks=(e.max-e.min)/E.props.step,E.markRefs=[];for(var t=0;t<E.numOfMarks+1;t++)E.markRefs[t]=s.createRef()}else E.numOfMarks=void 0,E.markRefs=void 0},E.calculateMarkOffsets=function(){if(E.props.renderMark&&E.trackRef&&E.numOfMarks&&E.markRefs&&null!==E.trackRef.current){for(var e=window.getComputedStyle(E.trackRef.current),t=parseInt(e.width,10),n=parseInt(e.height,10),r=parseInt(e.paddingLeft,10),a=parseInt(e.paddingTop,10),i=[],o=0;o<E.numOfMarks+1;o++){var s,l=9999,u=9999;E.markRefs[o].current&&(l=(s=E.markRefs[o].current.getBoundingClientRect()).height,u=s.width),E.props.direction===x.Direction.Left||E.props.direction===x.Direction.Right?i.push([Math.round(t/E.numOfMarks*o+r-u/2),-Math.round((l-n)/2)]):i.push([Math.round(n/E.numOfMarks*o+a-l/2),-Math.round((u-t)/2)])}E.setState({markOffsets:i})}},0===e.step)throw new Error('"step" property should be a positive number');return E.schdOnMouseMove=(0,S.schd)(E.onMouseMove),E.schdOnTouchMove=(0,S.schd)(E.onTouchMove),E.schdOnEnd=(0,S.schd)(E.onEnd),E.thumbRefs=e.values.map(function(){return s.createRef()}),E.updateMarkRefs(e),E}e.default=o}}),ae=B({"../../node_modules/react-range/lib/index.js"(e){"use strict";var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},t=(Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0,t(re())),n=(e.Range=t.default,ne()),r=(Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return n.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return n.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return n.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return n.checkValuesAgainstBoundaries}}),ee());Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return r.Direction}})}}),ie=B({"../../node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:var n=e.type;switch(n){case d:case m:case o:case l:case s:case h:return n;default:var r=n&&n.$$typeof;switch(r){case c:case f:case y:case g:case u:return r;default:return t}}case i:return t}}}function n(e){return t(e)===m}var r,a,i,o,s,l,u,c,d,m,f,h,p,g,y,v,b,w,E,S,x,k,_,I,C,N,T,O,M,A,R;r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,m=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119,r=m,S=c,x=u,k=a,_=f,I=o,C=y,N=g,T=i,O=l,M=s,A=h,R=!1,e.AsyncMode=d,e.ConcurrentMode=r,e.ContextConsumer=S,e.ContextProvider=x,e.Element=k,e.ForwardRef=_,e.Fragment=I,e.Lazy=C,e.Memo=N,e.Portal=T,e.Profiler=O,e.StrictMode=M,e.Suspense=A,e.isAsyncMode=function(e){return R||(R=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),n(e)||t(e)===d},e.isConcurrentMode=n,e.isContextConsumer=function(e){return t(e)===c},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},e.isForwardRef=function(e){return t(e)===f},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===y},e.isMemo=function(e){return t(e)===g},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===l},e.isStrictMode=function(e){return t(e)===s},e.isSuspense=function(e){return t(e)===h},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===m||e===l||e===s||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===b||e.$$typeof===w||e.$$typeof===E||e.$$typeof===v)},e.typeOf=t}}),oe=B({"../../node_modules/react-is/index.js"(e,t){"use strict";t.exports=ie()}}),se=B({"../../node_modules/object-assign/index.js"(e,t){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var e=new String("abc");if(e[5]="de","5"!==Object.getOwnPropertyNames(e)[0]){for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r,a=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"===a.join(""))return r={},"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")?1:void 0}}}catch(e){}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var i in n=Object(arguments[a]))u.call(n,i)&&(r[i]=n[i]);if(l)for(var o=l(n),s=0;s<o.length;s++)c.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}}}),le=B({"../../node_modules/prop-types/lib/ReactPropTypesSecret.js"(e,t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}),ue=B({"../../node_modules/prop-types/lib/has.js"(e,t){t.exports=Function.call.bind(Object.prototype.hasOwnProperty)}}),ce=B({"../../node_modules/prop-types/checkPropTypes.js"(e,t){"use strict";var l,u,c,d=function(){};function n(e,t,n,r,a){for(var i in e)if(c(e,i)){var o,s;try{if("function"!=typeof e[i])throw(s=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.")).name="Invariant Violation",s;o=e[i](t,i,r,n,null,l)}catch(e){o=e}!o||o instanceof Error||d((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in u)&&(u[o.message]=!0,i=a?a():"",d("Failed "+n+" type: "+o.message+(null!=i?i:"")))}}l=le(),u={},c=ue(),d=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},n.resetWarningCache=function(){u={}},t.exports=n}}),de=B({"../../node_modules/prop-types/factoryWithTypeCheckers.js"(e,t){"use strict";var u=oe(),g=se(),y=le(),v=ue(),r=ce(),b=function(){};function a(){return null}b=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},t.exports=function(i,c){var o="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";var d="<<anonymous>>",e={array:t("array"),bigint:t("bigint"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(a),arrayOf:function(l){return n(function(e,t,n,r,a){if("function"!=typeof l)return new m("Property `"+a+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i))return new m("Invalid "+r+" `"+a+"` of type `"+h(i)+"` supplied to `"+n+"`, expected an array.");for(var o=0;o<i.length;o++){var s=l(i,o,n,r,a+"["+o+"]",y);if(s instanceof Error)return s}return null})},element:n(function(e,t,n,r,a){return e=e[t],i(e)?null:new m("Invalid "+r+" `"+a+"` of type `"+h(e)+"` supplied to `"+n+"`, expected a single ReactElement.")}),elementType:n(function(e,t,n,r,a){return e=e[t],u.isValidElementType(e)?null:new m("Invalid "+r+" `"+a+"` of type `"+h(e)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(o){return n(function(e,t,n,r,a){var i;return e[t]instanceof o?null:(i=o.name||d,new m("Invalid "+r+" `"+a+"` of type `"+((r=e[t]).constructor&&r.constructor.name?r.constructor.name:d)+"` supplied to `"+n+"`, expected instance of `"+i+"`."))})},node:n(function(e,t,n,r,a){return l(e[t])?null:new m("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(l){return n(function(e,t,n,r,a){if("function"!=typeof l)return new m("Property `"+a+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i,o=e[t];if("object"!==(e=h(o)))return new m("Invalid "+r+" `"+a+"` of type `"+e+"` supplied to `"+n+"`, expected an object.");for(i in o)if(v(o,i)){var s=l(o,i,n,r,a+"."+i,y);if(s instanceof Error)return s}return null})},oneOf:function(s){if(Array.isArray(s))return n(function(e,t,n,r,a){for(var i=e[t],o=0;o<s.length;o++)if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(i,s[o]))return null;e=JSON.stringify(s,function(e,t){return"symbol"===p(t)?String(t):t});return new m("Invalid "+r+" `"+a+"` of value `"+String(i)+"` supplied to `"+n+"`, expected one of "+e+".")});b(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array.");return a},oneOfType:function(l){if(!Array.isArray(l))return b("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var e=0;e<l.length;e++){var t=l[e];if("function"!=typeof t)return b("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+function(e){var t=p(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}(t)+" at index "+e+"."),a}return n(function(e,t,n,r,a){for(var i=[],o=0;o<l.length;o++){var s=(0,l[o])(e,t,n,r,a,y);if(null==s)return null;s.data&&v(s.data,"expectedType")&&i.push(s.data.expectedType)}return new m("Invalid "+r+" `"+a+"` supplied to `"+n+"`"+(0<i.length?", expected one of type ["+i.join(", ")+"]":"")+".")})},shape:function(l){return n(function(e,t,n,r,a){var i,o=e[t];if("object"!==(e=h(o)))return new m("Invalid "+r+" `"+a+"` of type `"+e+"` supplied to `"+n+"`, expected `object`.");for(i in l){var s=l[i];if("function"!=typeof s)return f(n,r,a,i,p(s));s=s(o,i,n,r,a+"."+i,y);if(s)return s}return null})},exact:function(u){return n(function(e,t,n,r,a){var i,o=e[t],s=h(o);if("object"!==s)return new m("Invalid "+r+" `"+a+"` of type `"+s+"` supplied to `"+n+"`, expected `object`.");for(i in g({},e[t],u)){var l=u[i];if(v(u,i)&&"function"!=typeof l)return f(n,r,a,i,p(l));if(!l)return new m("Invalid "+r+" `"+a+"` key `"+i+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(u),null,"  "));l=l(o,i,n,r,a+"."+i,y);if(l)return l}return null})}};function m(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function n(s){var l={},u=0;function e(e,t,n,r,a,i,o){if(r=r||d,i=i||n,o!==y){if(c)throw(o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",o;"undefined"!=typeof console&&!l[o=r+":"+n]&&u<3&&(b("You are manually calling a React.PropTypes validation function for the `"+i+"` prop on `"+r+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),l[o]=!0,u++)}return null==t[n]?e?null===t[n]?new m("The "+a+" `"+i+"` is marked as required in `"+r+"`, but its value is `null`."):new m("The "+a+" `"+i+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:s(t,n,r,a,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(o){return n(function(e,t,n,r,a,i){return h(e=e[t])!==o?new m("Invalid "+r+" `"+a+"` of type `"+p(e)+"` supplied to `"+n+"`, expected `"+o+"`.",{expectedType:o}):null})}function f(e,t,n,r,a){return new m((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+a+"`.")}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null!==e&&!i(e)){var t=function(e){if("function"==typeof(e=e&&(o&&e[o]||e[s])))return e}(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!l(n.value))return!1}else for(;!(n=r.next()).done;){var a=n.value;if(a&&!l(a[1]))return!1}}return!0;default:return!1}}function h(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(e=e,"symbol"===t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t)}function p(e){if(null==e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return m.prototype=Error.prototype,e.checkPropTypes=r,e.resetWarningCache=r.resetWarningCache,e.PropTypes=e}}}),me=B({"../../node_modules/prop-types/index.js"(e,t){var n=oe();t.exports=de()(n.isElement,!0)}}),fe=B({"../../node_modules/downshift/node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:var n=e.type;switch(n){case o:case l:case s:case f:case h:return n;default:var r=n&&n.$$typeof;switch(r){case d:case c:case m:case g:case p:case u:return r;default:return t}}case i:return t}}}var a,i,o,s,l,u,c,d,m,f,h,p,g,n,r,y,v,b,w,E,S,x,k,_,I,C,N,T;a=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),r=Symbol.for("react.module.reference"),y=u,v=a,b=m,w=o,E=g,S=p,x=i,k=l,_=s,I=f,C=h,T=N=!1,e.ContextConsumer=c,e.ContextProvider=y,e.Element=v,e.ForwardRef=b,e.Fragment=w,e.Lazy=E,e.Memo=S,e.Portal=x,e.Profiler=k,e.StrictMode=_,e.Suspense=I,e.SuspenseList=C,e.isAsyncMode=function(e){return N||(N=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isConcurrentMode=function(e){return T||(T=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isContextConsumer=function(e){return t(e)===c},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},e.isForwardRef=function(e){return t(e)===m},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===g},e.isMemo=function(e){return t(e)===p},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===l},e.isStrictMode=function(e){return t(e)===s},e.isSuspense=function(e){return t(e)===f},e.isSuspenseList=function(e){return t(e)===h},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===l||e===s||e===f||e===h||e===n||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===p||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===r||void 0!==e.getModuleId)},e.typeOf=t}}),B=B({"../../node_modules/downshift/node_modules/react-is/index.js"(e,t){"use strict";t.exports=fe()}}),he={},pe=he,ge={default:()=>function(){return LS.default.createElement(PS,null)}};for(p in ge)R(pe,p,{get:ge[p],enumerable:!0});var ye=e(b()),ve=e(t()),be=e(X());var we=async function(t,n,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var r,t=`spcr-whats-new_${t}-version`,a=Spicetify.LocalStorage.get(t)??"";try{(0,ve.default)(n,a)&&(Spicetify.LocalStorage.set(t,n),r={...e,content:function(e){var t=document.createElement("div"),n=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return n.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,be.default.render(e,t),t.appendChild(n),t}(e.content)},Spicetify.PopupModal.display(r))}catch(e){Spicetify.LocalStorage.set(t,n)}},Ee="1.2.0",Se=["Added new filter nodes: track duration and album release date","Added new processing nodes: intersection, difference and complement","Fixed height on comfy theme"],xe=e(b()),ke=e(b()),_e=e(b()),Ie="TabBar-module__active___qFHnJ_playlistDmaker",Ce=e(b());function S(e){const{elementType:t="span",children:n,fontSize:r,style:a,...i}=e;let o;switch(t){case"h1":o=Spicetify.ReactComponent.TextComponent.h1;break;case"h2":o=Spicetify.ReactComponent.TextComponent.h2;break;case"h3":o=Spicetify.ReactComponent.TextComponent.h3;break;case"h4":o=Spicetify.ReactComponent.TextComponent.h4;break;case"h5":o=Spicetify.ReactComponent.TextComponent.h5;break;case"h6":o=Spicetify.ReactComponent.TextComponent.h6;break;case"li":o=Spicetify.ReactComponent.TextComponent.li;break;case"p":o=Spicetify.ReactComponent.TextComponent.p;break;case"small":o=Spicetify.ReactComponent.TextComponent.small;break;case"span":o=Spicetify.ReactComponent.TextComponent.span;break;default:o=Spicetify.ReactComponent.TextComponent}return Ce.default.createElement(o,{...i,style:{...a,fontSize:r,display:e.paddingBottom?"block":a?.display}},n)}function Ne(e){return _e.default.createElement("li",{"data-tab":e.item.key,onClick:()=>{e.onItemClicked(e.item)}},_e.default.createElement("button",{className:e.active?Ie:"",draggable:"false"},_e.default.createElement(S,{variant:"mestoBold"},e.item.label)))}var Te=e(b());function Oe(n){var e={width:n.size+"px"};return Te.default.createElement("li",{id:"more-button",style:e},Te.default.createElement("select",{className:"main-dropDown-dropDown",value:n.activeItem.key,disabled:!1,onChange:t=>{var e=n.items.find(e=>e.key===t.target.value);e&&n.onClick(e)}},n.items.map(e=>Te.default.createElement("option",{key:e.key,value:e.key},e.label))))}var Me={tabBar:"TabBar-module__tabBar___DxQjm_playlistDmaker",active:"TabBar-module__active___qFHnJ_playlistDmaker"};function Ae(n){const t=ke.default.useRef(null),[a,r]=(0,ke.useState)([]),[i,e]=(0,ke.useState)(0),[o,s]=(0,ke.useState)([]),[l,u]=(0,ke.useState)(0);return(0,ke.useEffect)(()=>{t.current&&e(t.current.clientWidth)},[n.windowSize]),(0,ke.useEffect)(()=>{var e;t.current&&(e=Array.from(t.current.children).filter(e=>"more-button"!==e.id).map(e=>e.clientWidth),r(e))},[n.items]),(0,ke.useEffect)(()=>{if(t.current)if(a.reduce((e,t)=>e+t,0)<=i)s([]);else{var e=Math.max(...a)+32;const r=[];let n=e;a.forEach((e,t)=>{i>=n+e?n+=e:r.push(t)}),s(r),u(e)}},[i,a]),ke.default.createElement("nav",{className:Me.tabBar},ke.default.createElement("ul",{ref:t},n.items.filter((e,t)=>!o.includes(t)).map(e=>ke.default.createElement(Ne,{key:e.key,item:e,active:n.activeItem.key===e.key,onItemClicked:n.onItemClicked})),o.length||0===a.length?ke.default.createElement(Oe,{items:n.items.filter((e,t)=>o.includes(t)||e.key===n.activeItem.key),activeItem:n.activeItem,onClick:n.onItemClicked,size:l}):null))}function Re(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host, .Root__main-view .os-size-observer, .Root__main-view .main-view-container__scroll-node");if(!t)throw new Error("Could not find resize host");const[n,r]=(0,xe.useState)(t.clientWidth);return(0,xe.useEffect)(()=>{const e=new ResizeObserver(()=>{r(t.clientWidth)});return e.observe(t),()=>{e.disconnect()}},[t]),xe.default.createElement(Ae,{windowSize:n,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}function y(){return Spicetify.Platform}var De=e(b()),ut=e(b(),1);function ct(n){if("string"==typeof n||"number"==typeof n)return""+n;let r="";if(Array.isArray(n))for(let e=0,t;e<n.length;e++)""!==(t=ct(n[e]))&&(r+=(r&&" ")+t);else for(var e in n)n[e]&&(r+=(r&&" ")+e);return r}var t=e(b(),1),r=e(n(),1),Pe={},Le=e=>{let r;const a=new Set;var t=(e,t)=>{e="function"==typeof e?e(r):e;if(!Object.is(e,r)){const n=r;r=(null!=t?t:"object"!=typeof e||null===e)?e:Object.assign({},r,e),a.forEach(e=>e(r,n))}},n=()=>r,i={setState:t,getState:n,getInitialState:()=>o,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{"production"!==(Pe.env?Pe.env.MODE:void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}};const o=r=e(t,n,i);return i},Fe=e=>e?Le(e):Le,Ve=t.default["useDebugValue"],je=r.default["useSyncExternalStoreWithSelector"],ze=e=>e;function Be(e,t=ze,n){e=je(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ve(e),e}var Ue=(e,n)=>{const r=Fe(e);e=(e,t=n)=>Be(r,e,t);return Object.assign(e,r),e},$e=(e,t)=>e?Ue(e,t):Ue;function He(e,t){if(!Object.is(e,t)){if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(var[n,r]of e)if(!Object.is(r,t.get(n)))return!1}else if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1}else{var a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(const o of a)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1}}return!0}var Ze={value:()=>{}};function We(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Ke(r)}function Ke(e){this._=e}function Ye(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=Ze,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Ke.prototype=We.prototype={constructor:Ke,on:function(e,t){var n,r,a=this._,i=(r=a,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=i[o]).type)a[n]=Ye(a[n],e.name,t);else if(null==t)for(n in a)a[n]=Ye(a[n],e.name,null);return this}for(;++o<s;)if(n=(n=(e=i[o]).type)&&function(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}(a[n],e.name))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new Ke(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var qe=We,Xe="http://www.w3.org/1999/xhtml",Ge={svg:"http://www.w3.org/2000/svg",xhtml:Xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Je(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ge.hasOwnProperty(t)?{space:Ge[t],local:e}:e}function Qe(e){e=Je(e);return(e.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Xe&&e.documentElement.namespaceURI===Xe?e.createElement(n):e.createElementNS(t,n)}})(e)}function et(){}function tt(e){return null==e?et:function(){return this.querySelector(e)}}function nt(){return[]}function rt(e){return null==e?nt:function(){return this.querySelectorAll(e)}}function at(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function it(e){return function(){return this.matches(e)}}function ot(t){return function(e){return e.matches(t)}}var st=Array.prototype.find;function lt(){return this.firstElementChild}var dt=Array.prototype.filter;function mt(){return Array.from(this.children)}function ft(e){return new Array(e.length)}function ht(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function pt(e,t,n,r,a,i){for(var o,s=0,l=t.length,u=i.length;s<u;++s)(o=t[s])?(o.__data__=i[s],r[s]=o):n[s]=new ht(e,i[s]);for(;s<l;++s)(o=t[s])&&(a[s]=o)}function gt(e,t,n,r,a,i,o){for(var s,l,u=new Map,c=t.length,d=i.length,m=new Array(c),f=0;f<c;++f)(s=t[f])&&(m[f]=l=o.call(s,s.__data__,f,t)+"",u.has(l)?a[f]=s:u.set(l,s));for(f=0;f<d;++f)l=o.call(e,i[f],f,i)+"",(s=u.get(l))?((r[f]=s).__data__=i[f],u.delete(l)):n[f]=new ht(e,i[f]);for(f=0;f<c;++f)(s=t[f])&&u.get(m[f])===s&&(a[f]=s)}function yt(e){return e.__data__}function vt(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function bt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wt(e,t){return e.style.getPropertyValue(t)||bt(e).getComputedStyle(e,null).getPropertyValue(t)}function Et(e){return e.trim().split(/^|\s+/)}function St(e){return e.classList||new xt(e)}function xt(e){this._node=e,this._names=Et(e.getAttribute("class")||"")}function kt(e,t){for(var n=St(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function _t(e,t){for(var n=St(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function It(){this.textContent=""}function Ct(){this.innerHTML=""}function Nt(){this.nextSibling&&this.parentNode.appendChild(this)}function Tt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ot(){return null}function Mt(){var e=this.parentNode;e&&e.removeChild(this)}function At(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dt(i){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,a=e.length;n<a;++n)t=e[n],i.type&&t.type!==i.type||t.name!==i.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.options);++r?e.length=r:delete this.__on}}}function Pt(o,s,l){return function(){function e(e){n.call(this,e,this.__data__)}var t,n,r=this.__on;n=s;if(r)for(var a=0,i=r.length;a<i;++a)if((t=r[a]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=e,t.options=l),void(t.value=s);this.addEventListener(o.type,e,l),t={type:o.type,name:o.name,value:s,listener:e,options:l},r?r.push(t):this.__on=[t]}}function Lt(e,t,n){var r=bt(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}ht.prototype={constructor:ht,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},xt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){e=this._names.indexOf(e);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var Ft=[null];function Vt(e,t){this._groups=e,this._parents=t}function jt(){return new Vt([[document.documentElement]],Ft)}Vt.prototype=jt.prototype={constructor:Vt,select:function(e){"function"!=typeof e&&(e=tt(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=t[a],l=s.length,u=r[a]=new Array(l),c=0;c<l;++c)(i=s[c])&&(o=e.call(i,i.__data__,c,s))&&("__data__"in i&&(o.__data__=i.__data__),u[c]=o);return new Vt(r,this._parents)},selectAll:function(e){e=("function"==typeof e?at:rt)(e);for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,s=t[i],l=s.length,u=0;u<l;++u)(o=s[u])&&(r.push(e.call(o,o.__data__,u,s)),a.push(o));return new Vt(r,a)},selectChild:function(e){return this.select(null==e?lt:(t="function"==typeof e?e:ot(e),function(){return st.call(this.children,t)}));var t},selectChildren:function(e){return this.selectAll(null==e?mt:(t="function"==typeof e?e:ot(e),function(){return dt.call(this.children,t)}));var t},filter:function(e){"function"!=typeof e&&(e=it(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,l=r[a]=[],u=0;u<s;++u)(i=o[u])&&e.call(i,i.__data__,u,o)&&l.push(i);return new Vt(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,yt);var n,r=t?gt:pt,a=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=i.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var d=a[c],m=i[c],f=m.length,h="object"==typeof(h=e.call(d,d&&d.__data__,c,a))&&"length"in h?h:Array.from(h),p=h.length,g=l[c]=new Array(p),y=s[c]=new Array(p);r(d,m,g,y,u[c]=new Array(f),h,t);for(var v,b,w=0,E=0;w<p;++w)if(v=g[w]){for(E<=w&&(E=w+1);!(b=y[E])&&++E<p;);v._next=b||null}}return(s=new Vt(s,a))._enter=l,s._exit=u,s},enter:function(){return new Vt(this._enter||this._groups.map(ft),this._parents)},exit:function(){return new Vt(this._exit||this._groups.map(ft),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit(),r="function"==typeof e?(r=e(r))&&r.selection():r.append(e+"");return null!=t&&(a=(a=t(a))&&a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var e=e.selection?e.selection():e,t=this._groups,n=e._groups,r=t.length,e=n.length,a=Math.min(r,e),i=new Array(r),o=0;o<a;++o)for(var s,l=t[o],u=n[o],c=l.length,d=i[o]=new Array(c),m=0;m<c;++m)(s=l[m]||u[m])&&(d[m]=s);for(;o<r;++o)i[o]=t[o];return new Vt(i,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];0<=--i;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||vt;for(var t=this._groups,r=t.length,a=new Array(r),i=0;i<r;++i){for(var o,s=t[i],l=s.length,u=a[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new Vt(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n,r=Je(e);return arguments.length<2?(n=this.node(),r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)):this.each((null==t?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?r.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:r.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(r,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):wt(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=Et(e+"");if(arguments.length<2){for(var r=St(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?kt:_t)(this,e)}}:t?function(e){return function(){kt(this,e)}}:function(e){return function(){_t(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?It:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Ct:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Nt)},lower:function(){return this.each(Tt)},append:function(e){var t="function"==typeof e?e:Qe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Qe(e),r=null==t?Ot:"function"==typeof t?t:tt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Mt)},clone:function(e){return this.select(e?Rt:At)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=i.length;if(!(arguments.length<2)){for(s=t?Pt:Dt,r=0;r<o;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Lt(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Lt(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,a=e[t],i=0,o=a.length;i<o;++i)(r=a[i])&&(yield r)}};t=jt;function zt(e){return"string"==typeof e?new Vt([[document.querySelector(e)]],[document.documentElement]):new Vt([[e]],Ft)}function Bt(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),t=void 0===t?e.currentTarget:t){var n=t.ownerSVGElement||t;if(n.createSVGPoint)return(n=n.createSVGPoint()).x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y];if(t.getBoundingClientRect)return n=t.getBoundingClientRect(),[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}return[e.pageX,e.pageY]}var Ut={passive:!1},$t={capture:!0,passive:!1};function Ht(e){e.stopImmediatePropagation()}function Zt(e){e.preventDefault(),e.stopImmediatePropagation()}function Wt(e){var t=e.document.documentElement,e=zt(e).on("dragstart.drag",Zt,$t);"onselectstart"in t?e.on("selectstart.drag",Zt,$t):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kt(e,t){var n=e.document.documentElement,r=zt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Zt,$t),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Yt=e=>()=>e;function qt(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:i,x:o,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function Xt(e){return!e.ctrlKey&&!e.button}function Gt(){return this.parentNode}function Jt(e,t){return null==t?{x:e.x,y:e.y}:t}function Qt(){return navigator.maxTouchPoints||"ontouchstart"in this}function en(e,t,n){(e.prototype=t.prototype=n).constructor=e}function tn(e,t){var n,r=Object.create(e.prototype);for(n in t)r[n]=t[n];return r}function nn(){}qt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var r="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",an=/^#([0-9a-f]{3,8})$/,on=new RegExp(`^rgb\\(${r},${r},${r}\\)$`),sn=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),ln=new RegExp(`^rgba\\(${r},${r},${r},${a}\\)$`),un=new RegExp(`^rgba\\(${rn},${rn},${rn},${a}\\)$`),cn=new RegExp(`^hsl\\(${a},${rn},${rn}\\)$`),dn=new RegExp(`^hsla\\(${a},${rn},${rn},${a}\\)$`),mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fn(){return this.rgb().formatHex()}function hn(){return this.rgb().formatRgb()}function pn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=an.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?gn(t):3===n?new bn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?yn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?yn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=on.exec(e))?new bn(t[1],t[2],t[3],1):(t=sn.exec(e))?new bn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ln.exec(e))?yn(t[1],t[2],t[3],t[4]):(t=un.exec(e))?yn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cn.exec(e))?_n(t[1],t[2]/100,t[3]/100,1):(t=dn.exec(e))?_n(t[1],t[2]/100,t[3]/100,t[4]):mn.hasOwnProperty(e)?gn(mn[e]):"transparent"===e?new bn(NaN,NaN,NaN,0):null}function gn(e){return new bn(e>>16&255,e>>8&255,255&e,1)}function yn(e,t,n,r){return new bn(e=r<=0?t=n=NaN:e,t,n,r)}function vn(e,t,n,r){return 1===arguments.length?(a=(a=e)instanceof nn?a:pn(a))?new bn((a=a.rgb()).r,a.g,a.b,a.opacity):new bn:new bn(e,t,n,null==r?1:r);var a}function bn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function wn(){return"#"+kn(this.r)+kn(this.g)+kn(this.b)}function En(){var e=Sn(this.opacity);return(1===e?"rgb(":"rgba(")+xn(this.r)+`, ${xn(this.g)}, `+xn(this.b)+(1===e?")":`, ${e})`)}function Sn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kn(e){return((e=xn(e))<16?"0":"")+e.toString(16)}function _n(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new Cn(e,t,n,r)}function In(e){var t,n,r,a,i,o,s,l;return e instanceof Cn?new Cn(e.h,e.s,e.l,e.opacity):(e=e instanceof nn?e:pn(e))?e instanceof Cn?e:(t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=NaN,l=((i=Math.max(t,n,r))+a)/2,(s=i-a)?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=0<l&&l<1?0:o,new Cn(o,s,l,e.opacity)):new Cn}function Cn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Nn(e){return(e=(e||0)%360)<0?e+360:e}function Tn(e){return Math.max(0,Math.min(1,e||0))}function On(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Mn(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}en(nn,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fn,formatHex:fn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return In(this).formatHsl()},formatRgb:hn,toString:hn}),en(bn,vn,tn(nn,{brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(xn(this.r),xn(this.g),xn(this.b),Sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wn,formatHex:wn,formatHex8:function(){return"#"+kn(this.r)+kn(this.g)+kn(this.b)+kn(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:En,toString:En})),en(Cn,function(e,t,n,r){return 1===arguments.length?In(e):new Cn(e,t,n,null==r?1:r)},tn(nn,{brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Cn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Cn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new bn(On(240<=e?e-240:120+e,n,t),On(e,n,t),On(e<120?240+e:e-120,n,t),this.opacity)},clamp(){return new Cn(Nn(this.h),Tn(this.s),Tn(this.l),Sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var e=Sn(this.opacity);return(1===e?"hsl(":"hsla(")+Nn(this.h)+`, ${100*Tn(this.s)}%, ${100*Tn(this.l)}%`+(1===e?")":`, ${e})`)}}));var An=e=>()=>e;function Rn(i){return 1==(i=+i)?Dn:function(e,t){return t-e?(n=e,r=t,a=i,n=Math.pow(n,a),r=Math.pow(r,a)-n,a=1/a,function(e){return Math.pow(n+e*r,a)}):An(isNaN(e)?t:e);var n,r,a}}function Dn(e,t){var n,r,a=t-e;return a?(n=e,r=a,function(e){return n+e*r}):An(isNaN(e)?t:e)}var Pn=function e(t){var o=Rn(t);function n(t,e){var n=o((t=vn(t)).r,(e=vn(e)).r),r=o(t.g,e.g),a=o(t.b,e.b),i=Dn(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=a(e),t.opacity=i(e),t+""}}return n.gamma=e,n}(1);function Ln(s){return function(e){for(var t,n=e.length,r=new Array(n),a=new Array(n),i=new Array(n),o=0;o<n;++o)t=vn(e[o]),r[o]=t.r||0,a[o]=t.g||0,i[o]=t.b||0;return r=s(r),a=s(a),i=s(i),t.opacity=1,function(e){return t.r=r(e),t.g=a(e),t.b=i(e),t+""}}}Ln(function(o){var s=o.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),n=o[t],r=o[t+1],a=0<t?o[t-1]:2*n-r,i=t<s-1?o[t+2]:2*r-n;return Mn((e-t/s)*s,a,n,r,i)}}),Ln(function(o){var s=o.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),n=o[(t+s-1)%s],r=o[t%s],a=o[(t+1)%s],i=o[(t+2)%s];return Mn((e-t/s)*s,n,r,a,i)}});function Fn(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jn=new RegExp(Vn.source,"g");var zn,Bn=180/Math.PI,Un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $n(e,t,n,r,a,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Bn,skewX:Math.atan(l)*Bn,scaleX:o,scaleY:s}}function Hn(m,f,h,p){function g(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,a,i,o,s,l,u,c=[],d=[];return e=m(e),t=m(t),a=e.translateX,i=e.translateY,l=t.translateX,s=t.translateY,o=c,r=d,a!==l||i!==s?(n=o.push("translate(",null,f,null,h),r.push({i:n-4,x:Fn(a,l)},{i:n-2,x:Fn(i,s)})):(l||s)&&o.push("translate("+l+f+s+h),r=e.rotate,a=t.rotate,n=c,i=d,r!==a?(180<r-a?a+=360:180<a-r&&(r+=360),i.push({i:n.push(g(n)+"rotate(",null,p)-2,x:Fn(r,a)})):a&&n.push(g(n)+"rotate("+a+p),o=e.skewX,l=t.skewX,s=c,i=d,o!==l?i.push({i:s.push(g(s)+"skewX(",null,p)-2,x:Fn(o,l)}):l&&s.push(g(s)+"skewX("+l+p),r=e.scaleX,a=e.scaleY,i=t.scaleX,o=t.scaleY,s=c,l=d,r!==i||a!==o?(u=s.push(g(s)+"scale(",null,",",null,")"),l.push({i:u-4,x:Fn(r,i)},{i:u-2,x:Fn(a,o)})):1===i&&1===o||s.push(g(s)+"scale("+i+","+o+")"),e=t=null,function(e){for(var t,n=-1,r=d.length;++n<r;)c[(t=d[n]).i]=t.x(e);return c.join("")}}}var Zn=Hn(function(e){return(e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"")).isIdentity?Un:$n(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Wn=Hn(function(e){return null!=e&&((zn=zn||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),e=zn.transform.baseVal.consolidate())?$n((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Un},", ",")",")");function Kn(e){return((e=Math.exp(e))+1/e)/2}var Yn,qn,Xn=function n(d,m,f){function e(e,t){var r,a,i,o=e[0],s=e[1],l=e[2],e=t[0],n=t[1],t=t[2],u=e-o,c=n-s,e=u*u+c*c;return(t=e<1e-12?(i=Math.log(t/l)/d,function(e){return[o+e*u,s+e*c,l*Math.exp(d*e*i)]}):(r=Math.sqrt(e),n=(t*t-l*l+f*e)/(2*l*m*r),e=(t*t-l*l-f*e)/(2*t*m*r),a=Math.log(Math.sqrt(n*n+1)-n),i=(Math.log(Math.sqrt(e*e+1)-e)-a)/d,function(e){var e=e*i,t=Kn(a),n=l/(m*r)*(t*(n=d*e+a,((n=Math.exp(2*n))-1)/(n+1))-(n=a,((n=Math.exp(a))-1/n)/2));return[o+n*u,s+n*c,l*t/Kn(d*e+a)]})).duration=1e3*i*d/Math.SQRT2,t}return e.rho=function(e){var e=Math.max(.001,+e),t=e*e;return n(e,t,t*t)},e}(Math.SQRT2,2,4),Gn=0,Jn=0,Qn=0,er=1e3,tr=0,nr=0,rr=0,ar="object"==typeof performance&&performance.now?performance:Date,ir="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function or(){return nr||(ir(sr),nr=ar.now()+rr)}function sr(){nr=0}function lr(){this._call=this._time=this._next=null}function ur(e,t,n){var r=new lr;return r.restart(e,t,n),r}function cr(){nr=(tr=ar.now())+rr,Gn=Jn=0;try{or(),++Gn;for(var e,t=Yn;t;)0<=(e=nr-t._time)&&t._call.call(void 0,e),t=t._next;--Gn}finally{for(var n,r,a=Yn,i=1/(Gn=0);a;)a=a._call?(i>a._time&&(i=a._time),(n=a)._next):(r=a._next,a._next=null,n?n._next=r:Yn=r);qn=n,mr(i),nr=0}}function dr(){var e=ar.now(),t=e-tr;er<t&&(rr-=t,tr=e)}function mr(e){Gn||(Jn=Jn&&clearTimeout(Jn),24<e-nr?(e<1/0&&(Jn=setTimeout(cr,e-ar.now()-rr)),Qn=Qn&&clearInterval(Qn)):(Qn||(tr=ar.now(),Qn=setInterval(dr,er)),Gn=1,ir(cr)))}function fr(t,n,e){var r=new lr;return n=null==n?0:+n,r.restart(e=>{r.stop(),t(e+n)},n,e),r}lr.prototype=ur.prototype={constructor:lr,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?or():+n)+(null==t?0:+t),this._next||qn===this||(qn?qn._next=this:Yn=this,qn=this),this._call=e,this._time=n,mr()},stop:function(){this._call&&(this._call=null,this._time=1/0,mr())}};var hr=qe("start","end","cancel","interrupt"),pr=[],gr=0,yr=1,vr=2,br=3,wr=4,Er=5,Sr=6;function xr(e,t,n,r,a,i){var o,s,l,u,c,d=e.__transition;if(d){if(n in d)return}else e.__transition={};function m(e){var t,n,r,a;if(l.state!==yr)return h();for(t in c)if((a=c[t]).name===l.name){if(a.state===br)return fr(m);a.state===wr?(a.state=Sr,a.timer.stop(),a.on.call("interrupt",o,o.__data__,a.index,a.group),delete c[t]):+t<s&&(a.state=Sr,a.timer.stop(),a.on.call("cancel",o,o.__data__,a.index,a.group),delete c[t])}if(fr(function(){l.state===br&&(l.state=wr,l.timer.restart(f,l.delay,l.time),f(e))}),l.state=vr,l.on.call("start",o,o.__data__,l.index,l.group),l.state===vr){for(l.state=br,u=new Array(r=l.tween.length),t=0,n=-1;t<r;++t)(a=l.tween[t].value.call(o,o.__data__,l.index,l.group))&&(u[++n]=a);u.length=n+1}}function f(e){for(var t=e<l.duration?l.ease.call(null,e/l.duration):(l.timer.restart(h),l.state=Er,1),n=-1,r=u.length;++n<r;)u[n].call(o,t);l.state===Er&&(l.on.call("end",o,o.__data__,l.index,l.group),h())}function h(){for(var e in l.state=Sr,l.timer.stop(),delete c[s],c)return;delete o.__transition}o=e,s=n,l={name:t,index:r,group:a,on:hr,tween:pr,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:gr},((c=o.__transition)[s]=l).timer=ur(function(e){l.state=yr,l.timer.restart(m,l.delay,l.time),l.delay<=e&&m(e-l.delay)},0,l.time)}function kr(e,t){e=Ir(e,t);if(e.state>gr)throw new Error("too late; already scheduled");return e}function _r(e,t){e=Ir(e,t);if(e.state>br)throw new Error("too late; already running");return e}function Ir(e,t){e=e.__transition;if(e=e&&e[t])return e;throw new Error("transition not found")}function Cr(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name!==t?o=!1:(r=n.state>vr&&n.state<Er,n.state=Sr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]);o&&delete e.__transition}}function Nr(e,t,n){var r=e._id;return e.each(function(){var e=_r(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Ir(e,r).value[t]}}function Tr(e,t){var n;return("number"==typeof t?Fn:t instanceof pn?Pn:(n=pn(t))?(t=n,Pn):function(e,r){var t,n,a,i,o,s=Vn.lastIndex=jn.lastIndex=0,l=-1,u=[],c=[];for(e+="",r+="";(t=Vn.exec(e))&&(n=jn.exec(r));)(a=n.index)>s&&(a=r.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(t=t[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,c.push({i:l,x:Fn(t,n)})),s=jn.lastIndex;return s<r.length&&(a=r.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?c[0]?(o=c[0].x,function(e){return o(e)+""}):(i=r,function(){return i}):(r=c.length,function(e){for(var t,n=0;n<r;++n)u[(t=c[n]).i]=t.x(e);return u.join("")})})(e,t)}function Or(r,a){var i,o;function e(){var t,n,e=a.apply(this,arguments);return i=e!==o?(o=e)&&(t=r,n=e,function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}):i}return e._value=a,e}function Mr(r,a){var i,o;function e(){var t,n,e=a.apply(this,arguments);return i=e!==o?(o=e)&&(t=r,n=e,function(e){this.setAttribute(t,n.call(this,e))}):i}return e._value=a,e}var Ar=t.prototype.constructor;function Rr(e){return function(){this.style.removeProperty(e)}}function Dr(a,i,o){var s,l;function e(){var t,n,r,e=i.apply(this,arguments);return s=e!==l?(l=e)&&(t=a,n=e,r=o,function(e){this.style.setProperty(t,n.call(this,e),r)}):s}return e._value=i,e}function Pr(n){var r,a;function e(){var t,e=n.apply(this,arguments);return r=e!==a?(a=e)&&(t=e,function(e){this.textContent=t.call(this,e)}):r}return e._value=n,e}var Lr=0;function Fr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}r=t.prototype;Fr.prototype={constructor:Fr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tt(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,l,u=r[o],c=u.length,d=i[o]=new Array(c),m=0;m<c;++m)(s=u[m])&&(l=e.call(s,s.__data__,m,u))&&("__data__"in s&&(l.__data__=s.__data__),d[m]=l,xr(d[m],t,n,m,d,Ir(s,n)));return new Fr(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=rt(e));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var m,f=e.call(l,l.__data__,d,u),h=Ir(l,n),p=0,g=f.length;p<g;++p)(m=f[p])&&xr(m,t,n,p,f,h);i.push(f),o.push(l)}return new Fr(i,o,t,n)},selectChild:r.selectChild,selectChildren:r.selectChildren,filter:function(e){"function"!=typeof e&&(e=it(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,l=r[a]=[],u=0;u<s;++u)(i=o[u])&&e.call(i,i.__data__,u,o)&&l.push(i);return new Fr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,e=n.length,a=Math.min(r,e),i=new Array(r),o=0;o<a;++o)for(var s,l=t[o],u=n[o],c=l.length,d=i[o]=new Array(c),m=0;m<c;++m)(s=l[m]||u[m])&&(d[m]=s);for(;o<r;++o)i[o]=t[o];return new Fr(i,this._parents,this._name,this._id)},selection:function(){return new Ar(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++Lr,r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],l=s.length,u=0;u<l;++u)(o=s[u])&&xr(o,e,n,u,s,{time:(o=Ir(o,t)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new Fr(r,this._parents,e,n)},call:r.call,nodes:r.nodes,node:r.node,size:r.size,empty:r.empty,each:r.each,on:function(e,t){var n,r,a,i,o,s,l=this._id;return arguments.length<2?Ir(this.node(),l).on.on(e):this.each((n=l,a=t,s=((r=e)+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return!(e=0<=t?e.slice(0,t):e)||"start"===e})?kr:_r,function(){var e=s(this,n),t=e.on;t!==i&&(o=(i=t).copy()).on(r,a),e.on=o}))},attr:function(e,t){var n=Je(e),r="transform"===n?Wn:Tr;return this.attrTween(e,"function"==typeof t?(n.local?function(r,a,i){var o,s,l;return function(){var e,t,n=i(this);if(null!=n)return(e=this.getAttributeNS(r.space,r.local))===(t=n+"")?null:e===o&&t===s?l:(s=t,l=a(o=e,n));this.removeAttributeNS(r.space,r.local)}}:function(r,a,i){var o,s,l;return function(){var e,t,n=i(this);if(null!=n)return(e=this.getAttribute(r))===(t=n+"")?null:e===o&&t===s?l:(s=t,l=a(o=e,n));this.removeAttribute(r)}})(n,r,Nr(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(t,n,r){var a,i,o=r+"";return function(){var e=this.getAttributeNS(t.space,t.local);return e===o?null:e===a?i:i=n(a=e,r)}}:function(t,n,r){var a,i,o=r+"";return function(){var e=this.getAttribute(t);return e===o?null:e===a?i:i=n(a=e,r)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Je(e);return this.tween(n,(r.local?Or:Mr)(r,t))},style:function(e,t,n){var r,a,i,o,s,l,u,c,d,m,f,h,p,g,y,v,b,w,E,S,x,k,_,I,C,N="transform"==(e+="")?Zn:Tr;return null==t?this.styleTween(e,(x=e,k=N,function(){var e=wt(this,x),t=(this.style.removeProperty(x),wt(this,x));return e===t?null:e===_&&t===I?C:C=k(_=e,I=t)})).on("end.style."+e,Rr(e)):"function"==typeof t?this.styleTween(e,(v=N,b=Nr(this,"style."+(y=e),t),function(){var e=wt(this,y),t=b(this),n=t+"";return null==t&&(this.style.removeProperty(y),n=t=wt(this,y)),e===n?null:e===w&&n===E?S:(E=n,S=v(w=e,t))})).each((u=this._id,g="end."+(p="style."+(c=e)),function(){var e=_r(this,u),t=e.on,n=null==e.value[p]?h=h||Rr(c):void 0;t===d&&f===n||(m=(d=t).copy()).on(g,f=n),e.on=m})):this.styleTween(e,(r=e,a=N,l=(i=t)+"",function(){var e=wt(this,r);return e===l?null:e===o?s:s=a(o=e,i)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Dr(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?(n=Nr(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(t=null==e?"":e+"",function(){this.textContent=t}));var t,n},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Pr(e))},remove:function(){return this.on("end.remove",(n=this._id,function(){var e,t=this.parentNode;for(e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=Ir(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?function(a,i){var o,s;return function(){var e=_r(this,a),t=e.tween;if(t!==o)for(var n=0,r=(s=o=t).length;n<r;++n)if(s[n].name===i){(s=s.slice()).splice(n,1);break}e.tween=s}}:function(i,o,s){var l,u;if("function"!=typeof s)throw new Error;return function(){var e=_r(this,i),t=e.tween;if(t!==l){u=(l=t).slice();for(var n={name:o,value:s},r=0,a=u.length;r<a;++r)if(u[r].name===o){u[r]=n;break}r===a&&u.push(n)}e.tween=u}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){kr(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){kr(this,e).delay=t}})(t,e)):Ir(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){_r(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){_r(this,e).duration=t}})(t,e)):Ir(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){_r(this,e).ease=t}}(t,e)):Ir(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each((t=this._id,n=e,function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;_r(this,t).ease=e}));var t,n},end:function(){var a,i,o=this,s=o._id,l=o.size();return new Promise(function(e,t){var n={value:t},r={value:function(){0==--l&&e()}};o.each(function(){var e=_r(this,s),t=e.on;t!==a&&((i=(a=t).copy())._.cancel.push(n),i._.interrupt.push(n),i._.end.push(r)),e.on=i}),0===l&&e()})},[Symbol.iterator]:r[Symbol.iterator]};var Vr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};t.prototype.interrupt=function(e){return this.each(function(){Cr(this,e)})},t.prototype.transition=function(e){var t,n;e=e instanceof Fr?(t=e._id,e._name):(t=++Lr,(n=Vr).time=or(),null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],l=s.length,u=0;u<l;++u)(o=s[u])&&xr(o,e,t,u,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}(o,t));return new Fr(r,this._parents,e,t)};var jr=e=>()=>e;function zr(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Br(e,t,n){this.k=e,this.x=t,this.y=n}Br.prototype={constructor:Br,scale:function(e){return 1===e?this:new Br(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Br(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ur=new Br(1,0,0);function $r(e){e.stopImmediatePropagation()}function Hr(e){e.preventDefault(),e.stopImmediatePropagation()}function Zr(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Wr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Kr(){return this.__zoom||Ur}function Yr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],t=e.invertY(t[1][1])-n[1][1];return e.translate(r<a?(r+a)/2:Math.min(0,r)||Math.max(0,a),i<t?(i+t)/2:Math.min(0,i)||Math.max(0,t))}function Gr(){var u,c,l,d=Zr,m=Wr,f=Xr,o=Yr,t=qr,s=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],p=250,g=Xn,n=qe("start","zoom","end"),y=500,v=150,b=0,w=10;function E(e){e.property("__zoom",Kr).on("wheel.zoom",a,{passive:!1}).on("mousedown.zoom",i).on("dblclick.zoom",C).filter(t).on("touchstart.zoom",N).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new Br(t,e.x,e.y)}function x(e,t,n){var r=t[0]-n[0]*e.k,t=t[1]-n[1]*e.k;return r===e.x&&t===e.y?e:new Br(e.k,r,t)}function k(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,n,l,u){e.on("start.zoom",function(){I(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(u).end()}).tween("zoom",function(){var e=arguments,r=I(this,e).event(u),t=m.apply(this,e),a=null==l?k(t):"function"==typeof l?l.apply(this,e):l,i=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),t=this.__zoom,o="function"==typeof n?n.apply(this,e):n,s=g(t.invert(a).concat(i/t.k),o.invert(a).concat(i/o.k));return function(e){var t,n;e=1===e?o:(t=s(e),new Br(n=i/t[2],a[0]-t[0]*n,a[1]-t[1]*n)),r.zoom(null,e)}})}function I(e,t,n){return!n&&e.__zooming||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=m.apply(e,t),this.taps=0}function a(e,...t){if(d.apply(this,arguments)){var n=I(this,t).event(e),r=this.__zoom,a=Math.max(s[0],Math.min(s[1],r.k*Math.pow(2,o.apply(this,arguments)))),i=Bt(e);if(n.wheel)n.mouse[0][0]===i[0]&&n.mouse[0][1]===i[1]||(n.mouse[1]=r.invert(n.mouse[0]=i)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[i,r.invert(i)],Cr(this),n.start()}Hr(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},v),n.zoom("mouse",f(x(S(r,a),n.mouse[0],n.mouse[1]),n.extent,h))}}function i(e,...t){var r,a,n,i,o,s;!l&&d.apply(this,arguments)&&(r=e.currentTarget,a=I(this,t,!0).event(e),n=zt(e.view).on("mousemove.zoom",function(e){{var t,n;Hr(e),a.moved||(t=e.clientX-o,n=e.clientY-s,a.moved=b<t*t+n*n)}a.event(e).zoom("mouse",f(x(a.that.__zoom,a.mouse[0]=Bt(e,r),a.mouse[1]),a.extent,h))},!0).on("mouseup.zoom",function(e){n.on("mousemove.zoom mouseup.zoom",null),Kt(e.view,a.moved),Hr(e),a.event(e).end()},!0),i=Bt(e,r),o=e.clientX,s=e.clientY,Wt(e.view),$r(e),a.mouse=[i,this.__zoom.invert(i)],Cr(this),a.start())}function C(e,...t){var n,r,a,i;d.apply(this,arguments)&&(i=this.__zoom,n=Bt(e.changedTouches?e.changedTouches[0]:e,this),r=i.invert(n),a=i.k*(e.shiftKey?.5:2),i=f(x(S(i,a),n,r),m.apply(this,t),h),Hr(e),0<p?zt(this).transition().duration(p).call(_,i,n,e):zt(this).call(E.transform,i,n,e))}function N(e,...t){if(d.apply(this,arguments)){var n,r,a,i,o=e.touches,s=o.length,l=I(this,t,e.changedTouches.length===s).event(e);for($r(e),r=0;r<s;++r)i=[i=Bt(a=o[r],this),this.__zoom.invert(i),a.identifier],l.touch0?l.touch1||l.touch0[2]===i[2]||(l.touch1=i,l.taps=0):(l.touch0=i,n=!0,l.taps=1+!!u);u=u&&clearTimeout(u),n&&(l.taps<2&&(c=i[0],u=setTimeout(function(){u=null},y)),Cr(this),l.start())}}function T(e,...t){if(this.__zooming){var n,r=I(this,t).event(e),a=e.changedTouches,i=a.length;for(Hr(e),n=0;n<i;++n)d=Bt(c=a[n],this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=d:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=d);if(c=r.that.__zoom,r.touch1)var t=r.touch0[0],e=r.touch0[1],o=r.touch1[0],s=r.touch1[1],l=(l=o[0]-t[0])*l+(l=o[1]-t[1])*l,u=(u=s[0]-e[0])*u+(u=s[1]-e[1])*u,c=S(c,Math.sqrt(l/u)),d=[(t[0]+o[0])/2,(t[1]+o[1])/2],l=[(e[0]+s[0])/2,(e[1]+s[1])/2];else{if(!r.touch0)return;d=r.touch0[0],l=r.touch0[1]}r.zoom("touch",f(x(c,d,l),r.extent,h))}}function O(e,...t){if(this.__zooming){var n,r,a,i=I(this,t).event(e),o=e.changedTouches,s=o.length;for($r(e),l&&clearTimeout(l),l=setTimeout(function(){l=null},y),n=0;n<s;++n)a=o[n],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):(i.end(),2===i.taps&&(a=Bt(a,this),Math.hypot(c[0]-a[0],c[1]-a[1])<w)&&(r=zt(this).on("dblclick.zoom"))&&r.apply(this,arguments))}}return E.transform=function(e,t,n,r){var a=e.selection?e.selection():e;a.property("__zoom",Kr),e!==a?_(e,t,n,r):a.interrupt().each(function(){I(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},E.scaleBy=function(e,t,n,r){E.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},E.scaleTo=function(e,i,o,t){E.transform(e,function(){var e=m.apply(this,arguments),t=this.__zoom,n=null==o?k(e):"function"==typeof o?o.apply(this,arguments):o,r=t.invert(n),a="function"==typeof i?i.apply(this,arguments):i;return f(x(S(t,a),n,r),e,h)},o,t)},E.translateBy=function(e,t,n,r){E.transform(e,function(){return f(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),m.apply(this,arguments),h)},null,r)},E.translateTo=function(e,r,a,i,t){E.transform(e,function(){var e=m.apply(this,arguments),t=this.__zoom,n=null==i?k(e):"function"==typeof i?i.apply(this,arguments):i;return f(Ur.translate(n[0],n[1]).scale(t.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof a?-a.apply(this,arguments):-a),e,h)},i,t)},r.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=zt(this.that).datum();n.call(e,this.that,new zr(e,{sourceEvent:this.sourceEvent,target:E,type:e,transform:this.that.__zoom,dispatch:n}),t)}},E.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:jr(+e),E):o},E.filter=function(e){return arguments.length?(d="function"==typeof e?e:jr(!!e),E):d},E.touchable=function(e){return arguments.length?(t="function"==typeof e?e:jr(!!e),E):t},E.extent=function(e){return arguments.length?(m="function"==typeof e?e:jr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),E):m},E.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],E):[s[0],s[1]]},E.translateExtent=function(e){return arguments.length?(h[0][0]=+e[0][0],h[1][0]=+e[1][0],h[0][1]=+e[0][1],h[1][1]=+e[1][1],E):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},E.constrain=function(e){return arguments.length?(f=e,E):f},E.duration=function(e){return arguments.length?(p=+e,E):p},E.interpolate=function(e){return arguments.length?(g=e,E):g},E.on=function(){var e=n.on.apply(n,arguments);return e===n?E:e},E.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,E):Math.sqrt(b)},E.tapDistance=function(e){return arguments.length?(w=+e,E):w},E}e(X(),1);var Jr=(0,ut.createContext)(null),Qr=Jr.Provider,ea={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ta=ea.error001();function na(e,t){var n=(0,ut.useContext)(Jr);if(null===n)throw new Error(ta);return Be(n,e,t)}var ra=()=>{const e=(0,ut.useContext)(Jr);if(null===e)throw new Error(ta);return(0,ut.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},aa=e=>e.userSelectionActive?"none":"all";function ia({position:e,children:t,className:n,style:r,...a}){var i=na(aa),e=(""+e).split("-");return ut.default.createElement("div",{className:ct(["react-flow__panel",n,...e]),style:{...r,pointerEvents:i},...a},t)}function oa({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:ut.default.createElement(ia,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ut.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var sa=(0,ut.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:l,className:u,...c})=>{const d=(0,ut.useRef)(null),[m,f]=(0,ut.useState)({x:0,y:0,width:0,height:0});u=ct(["react-flow__edge-textwrapper",u]);return(0,ut.useEffect)(()=>{var e;d.current&&(e=d.current.getBBox(),f({x:e.x,y:e.y,width:e.width,height:e.height}))},[n]),void 0!==n&&n?ut.default.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:u,visibility:m.width?"visible":"hidden",...c},a&&ut.default.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),ut.default.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:d,style:r},n),l):null}),la=e=>({width:e.offsetWidth,height:e.offsetHeight}),ua=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ca=(e={x:0,y:0},t)=>({x:ua(e.x,t[0][0],t[1][0]),y:ua(e.y,t[0][1],t[1][1])}),da=(e,t,n)=>e<t?ua(Math.abs(e-t),1,50)/50:n<e?-ua(Math.abs(e-n),1,50)/50:0,ma=(e,t)=>{return[20*da(e.x,35,t.width-35),20*da(e.y,35,t.height-35)]},fa=e=>e.getRootNode?.()||window?.document,ha=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),pa=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ga=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ya=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),va=(e,t)=>ga(ha(pa(e),pa(t))),ba=(e,t)=>{var n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),e=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*e)},wa=e=>Ea(e.width)&&Ea(e.height)&&Ea(e.x)&&Ea(e.y),Ea=e=>!isNaN(e)&&isFinite(e),Sa=Symbol.for("internals"),xa=["Enter"," ","Escape"],ka=(e,t)=>{console.warn(`[React Flow]: ${t} Help: https://reactflow.dev/error#`+e)},_a=e=>"nativeEvent"in e;function Ia(e){e=(_a(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(e?.nodeName)||e?.hasAttribute("contenteditable")||!!e?.closest(".nokey")}var Ca,Na,Ta,Oa,A,Ma=e=>"clientX"in e,Aa=(e,t)=>{var n=Ma(e),r=(n?e:e.touches?.[0]).clientX,n=(n?e:e.touches?.[0]).clientY;return{x:r-(t?.left??0),y:n-(t?.top??0)}},Ra=()=>"undefined"!=typeof navigator&&0<=navigator?.userAgent?.indexOf("Mac"),Da=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:m,interactionWidth:f=20})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:m}),f&&ut.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),a&&Ea(n)&&Ea(r)?ut.default.createElement(sa,{x:n,y:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null);function Pa(n,r,a){return void 0===a?a:e=>{var t=r().edges.find(e=>e.id===n);t&&a(e,{...t})}}function La({sourceX:e,sourceY:t,targetX:n,targetY:r}){var a=Math.abs(n-e)/2,e=n<e?n+a:n-a,n=Math.abs(r-t)/2;return[e,r<t?r+n:r-n,a,n]}function Fa({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:i,targetControlX:o,targetControlY:s}){a=.125*e+.375*a+.375*o+.125*n,o=.125*t+.375*i+.375*s+.125*r;return[a,o,Math.abs(a-e),Math.abs(o-t)]}function Va({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===A.Left||e===A.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function ja({sourceX:e,sourceY:t,sourcePosition:n=A.Bottom,targetX:r,targetY:a,targetPosition:i=A.Top}){var[n,o]=Va({pos:n,x1:e,y1:t,x2:r,y2:a}),[i,s]=Va({pos:i,x1:r,y1:a,x2:e,y2:t}),[l,u,c,d]=Fa({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:o,targetControlX:i,targetControlY:s});return[`M${e},${t} C${n},${o} ${i},${s} ${r},`+a,l,u,c,d]}Da.displayName="BaseEdge",(rn=Ca=Ca||{}).Strict="strict",rn.Loose="loose",(a=Na=Na||{}).Free="free",a.Vertical="vertical",a.Horizontal="horizontal",(r=Ta=Ta||{}).Partial="partial",r.Full="full",(t=Oa=Oa||{}).Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier",(rn=Us=Us||{}).Arrow="arrow",rn.ArrowClosed="arrowclosed",(a=A=A||{}).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";var za=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=A.Bottom,targetPosition:i=A.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:h,interactionWidth:p})=>{var[e,t,a]=ja({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:i});return ut.default.createElement(Da,{path:e,labelX:t,labelY:a,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:h,interactionWidth:p})}),Ba=(za.displayName="SimpleBezierEdge",{[A.Left]:{x:-1,y:0},[A.Right]:{x:1,y:0},[A.Top]:{x:0,y:-1},[A.Bottom]:{x:0,y:1}}),Ua=({source:e,sourcePosition:t=A.Bottom,target:n})=>t===A.Left||t===A.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},$a=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ha({sourceX:e,sourceY:t,sourcePosition:n=A.Bottom,targetX:r,targetY:a,targetPosition:i=A.Top,borderRadius:o=5,centerX:s,centerY:l,offset:u=20}){const[c,d,m,f,h]=function({source:e,sourcePosition:t=A.Bottom,target:n,targetPosition:r=A.Top,center:a,offset:i}){var o=Ba[t],s=Ba[r],l={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+s.x*i,y:n.y+s.y*i},c=0!==(d=Ua({source:l,sourcePosition:t,target:u})).x?"x":"y",d=d[c];let m=[],f,h;var p={x:0,y:0},g={x:0,y:0},[y,v,b,w]=La({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});return o[c]*s[c]==-1?(f=a.x??y,h=a.y??v,y=[{x:f,y:l.y},{x:f,y:u.y}],a=[{x:l.x,y:h},{x:u.x,y:h}],m=o[c]===d?"x"==c?y:a:"x"==c?a:y):(v=[{x:l.x,y:u.y}],a=[{x:u.x,y:l.y}],m="x"==c?o.x===d?a:v:o.y===d?v:a,t===r&&(y=Math.abs(e[c]-n[c]))<=i&&(i=Math.min(i-1,i-y),o[c]===d?p[c]=(l[c]>e[c]?-1:1)*i:g[c]=(u[c]>n[c]?-1:1)*i),t!==r&&(d=o[c]===s[y="x"==c?"y":"x"],i=u[y]<l[y],t=l[y]<u[y],1===o[c]&&(!d&&i||d&&t)||1!==o[c]&&(!d&&t||d&&i))&&(m="x"==c?v:a),r={x:l.x+p.x,y:l.y+p.y},s={x:u.x+g.x,y:u.y+g.y},y=Math.max(Math.abs(r.x-m[0].x),Math.abs(s.x-m[0].x)),o=Math.max(Math.abs(r.y-m[0].y),Math.abs(s.y-m[0].y)),h=o<=y?(f=(r.x+s.x)/2,m[0].y):(f=m[0].x,(r.y+s.y)/2)),[t=[e,{x:l.x+p.x,y:l.y+p.y},...m,{x:u.x+g.x,y:u.y+g.y},n],f,h,b,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:i,center:{x:s,y:l},offset:u});return[c.reduce((e,t,n)=>{let r="";return e+=r=0<n&&n<c.length-1?function(e,t,n,r){var a,r=Math.min($a(e,t)/2,$a(t,n)/2,r),{x:t,y:i}=t;return e.x===t&&t===n.x||e.y===i&&i===n.y?`L${t} `+i:e.y===i?`L ${t+r*(e.x<n.x?-1:1)},${i}Q ${t},${i} ${t},`+(i+r*(e.y<n.y?1:-1)):(a=e.x<n.x?1:-1,`L ${t},${i+r*(e.y<n.y?-1:1)}Q ${t},${i} ${t+r*a},`+i)}(c[n-1],t,c[n+1],o):(0===n?"M":"L")+t.x+" "+t.y},""),d,m,f,h]}var Za=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:d=A.Bottom,targetPosition:m=A.Top,markerEnd:f,markerStart:h,pathOptions:p,interactionWidth:g})=>{var[e,t,d]=Ha({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:m,borderRadius:p?.borderRadius,offset:p?.offset});return ut.default.createElement(Da,{path:e,labelX:t,labelY:d,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:h,interactionWidth:g})}),Wa=(Za.displayName="SmoothStepEdge",(0,ut.memo)(e=>ut.default.createElement(Za,{...e,pathOptions:(0,ut.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])})));Wa.displayName="StepEdge";var Ka=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:m,interactionWidth:f})=>{var[e,t,n]=function({sourceX:e,sourceY:t,targetX:n,targetY:r}){var[a,i,o,s]=La({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},`+r,a,i,o,s]}({sourceX:e,sourceY:t,targetX:n,targetY:r});return ut.default.createElement(Da,{path:e,labelX:t,labelY:n,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:m,interactionWidth:f})});function Ya(e,t){return 0<=e?.5*e:25*t*Math.sqrt(-e)}function qa({pos:e,x1:t,y1:n,x2:r,y2:a,c:i}){switch(e){case A.Left:return[t-Ya(t-r,i),n];case A.Right:return[t+Ya(r-t,i),n];case A.Top:return[t,n-Ya(n-a,i)];case A.Bottom:return[t,n+Ya(a-n,i)]}}function Xa({sourceX:e,sourceY:t,sourcePosition:n=A.Bottom,targetX:r,targetY:a,targetPosition:i=A.Top,curvature:o=.25}){var[n,s]=qa({pos:n,x1:e,y1:t,x2:r,y2:a,c:o}),[i,o]=qa({pos:i,x1:r,y1:a,x2:e,y2:t,c:o}),[l,u,c,d]=Fa({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:s,targetControlX:i,targetControlY:o});return[`M${e},${t} C${n},${s} ${i},${o} ${r},`+a,l,u,c,d]}Ka.displayName="StraightEdge";var Ga=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=A.Bottom,targetPosition:i=A.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:h,pathOptions:p,interactionWidth:g})=>{var[e,t,a]=Xa({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:i,curvature:p?.curvature});return ut.default.createElement(Da,{path:e,labelX:t,labelY:a,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:h,interactionWidth:g})}),Ja=(Ga.displayName="BezierEdge",(0,ut.createContext)(null)),Qa=Ja.Provider,ei=(Ja.Consumer,e=>"id"in e&&"source"in e&&"target"in e),ti=e=>"id"in e&&!("source"in e)&&!("target"in e),ni=(t,e,n)=>{if(!ti(t))return[];const r=n.filter(e=>e.source===t.id).map(e=>e.target);return e.filter(e=>r.includes(e.id))},ri=(t,e,n)=>{if(!ti(t))return[];const r=n.filter(e=>e.target===t.id).map(e=>e.source);return e.filter(e=>r.includes(e.id))},ai=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-`+n+(r||""),ii=(t,e)=>{return void 0===t?"":"string"==typeof t?t:(e?e+"__":"")+Object.keys(t).sort().map(e=>e+"="+t[e]).join("&")},oi=(t,e)=>e.some(e=>!(e.source!==t.source||e.target!==t.target||e.sourceHandle!==t.sourceHandle&&(e.sourceHandle||t.sourceHandle)||e.targetHandle!==t.targetHandle&&(e.targetHandle||t.targetHandle))),si=(e,t)=>{if(!e.source||!e.target)return ka("006",ea.error006()),t;let n;return n=ei(e)?{...e}:{...e,id:ai(e)},oi(n,t)?t:t.concat(n)},li=({x:e,y:t},[n,r,a],i,[o,s])=>{e={x:(e-n)/a,y:(t-r)/a};return i?{x:o*Math.round(e.x/o),y:s*Math.round(e.y/s)}:e},ui=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),ci=(e,t=[0,0])=>{var n,r;return e?(n=(e.width??0)*t[0],t=(e.height??0)*t[1],{...r={x:e.position.x-n,y:e.position.y-t},positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-t}:r}):{x:0,y:0,positionAbsolute:{x:0,y:0}}},di=(e,a=[0,0])=>{return 0===e.length?{x:0,y:0,width:0,height:0}:(e=e.reduce((e,t)=>{var{x:n,y:r}=ci(t,a).positionAbsolute;return ha(e,pa({x:n,y:r,width:t.width||0,height:t.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}),ga(e))},mi=(e,t,[n,r,a]=[0,0,1],i=!1,o=!1,s=[0,0])=>{const l={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(e=>{var{width:t,height:n,selectable:r=!0,hidden:a=!1}=e;if(o&&!r||a)return!1;r=ci(e,s).positionAbsolute,a={x:r.x,y:r.y,width:t||0,height:n||0},r=ba(l,a);(void 0===t||void 0===n||null===t||null===n||i&&0<r||(t||0)*(n||0)<=r||e.dragging)&&u.push(e)}),u},fi=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},hi=(e,t,n,r,a,i=.1)=>{var o=t/(e.width*(1+i)),i=n/(e.height*(1+i)),o=Math.min(o,i),i=ua(o,r,a);return{x:t/2-(e.x+e.width/2)*i,y:n/2-(e.y+e.height/2)*i,zoom:i}},pi=(e,t=0)=>e.transition().duration(t);function gi(n,e,r,a){return(e[r]||[]).reduce((e,t)=>(`${n.id}-${t.id}-`+r!==a&&e.push({id:t.id||null,type:r,nodeId:n.id,x:(n.positionAbsolute?.x??0)+t.x+t.width/2,y:(n.positionAbsolute?.y??0)+t.y+t.height/2}),e),[])}var yi={source:null,target:null,sourceHandle:null,targetHandle:null},vi=()=>({handleDomNode:null,isValid:!1,connection:yi,endHandle:null});function bi(e,t,n,r,a,i,o){var s,l,u,c,d,a="target"===a,o=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),e={...vi(),handleDomNode:o};return o&&(s=wi(void 0,o),l=o.getAttribute("data-nodeid"),u=o.getAttribute("data-handleid"),c=o.classList.contains("connectable"),o=o.classList.contains("connectableend"),e.connection=d={source:a?l:n,sourceHandle:a?u:r,target:a?n:l,targetHandle:a?r:u},c&&o)&&(t===Ca.Strict?a&&"source"===s||!a&&"target"===s:l!==n||u!==r)&&(e.endHandle={nodeId:l,handleId:u,type:s},e.isValid=i(d)),e}function wi(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Ei(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Si({event:e,handleId:u,nodeId:c,onConnect:t,isTarget:d,getState:m,setState:f,isValidConnection:h,edgeUpdaterType:n,onReconnectEnd:p}){const g=fa(e.target),{connectionMode:y,domNode:r,autoPanOnConnect:v,connectionRadius:b,onConnectStart:w,panBy:E,getNodes:S,cancelConnection:x}=m();let k=0,_;var I,C,N,{x:T,y:O}=Aa(e),T=g?.elementFromPoint(T,O),O=wi(n,T);const M=r?.getBoundingClientRect();if(M&&O){let r,a=Aa(e,M),i=!1,o=null,s=!1,l=null;({nodes:T,nodeId:I,handleId:C,handleType:N}=[{nodes:S(),nodeId:c,handleId:u,handleType:O}][0]);const D=T.reduce((n,r)=>{if(r[Sa]){var a=r[Sa]["handleBounds"];let e=[],t=[];a&&(e=gi(r,a,"source",I+`-${C}-`+N),t=gi(r,a,"target",I+`-${C}-`+N)),n.push(...e,...t)}return n},[]);const P=()=>{var e,t;v&&([e,t]=ma(a,M),E({x:e,y:t}),k=requestAnimationFrame(P))};function A(e){var t=m()["transform"],{handle:e,validHandleResult:n}=(a=Aa(e,M),function(e,t,r,a,n,i){var{x:e,y:o}=Aa(e);if(t=t.elementsFromPoint(e,o).find(e=>e.classList.contains("react-flow__handle"))){const d=t.getAttribute("data-nodeid");if(d){const m=wi(void 0,t),f=t.getAttribute("data-handleid");e=i({nodeId:d,id:f,type:m});if(e)return o=n.find(e=>e.nodeId===d&&e.type===m&&e.id===f),{handle:{id:f,type:m,nodeId:d,x:o?.x||r.x,y:o?.y||r.y},validHandleResult:e}}}let s=[],l=1/0;if(n.forEach(e=>{var t,n=Math.sqrt((e.x-r.x)**2+(e.y-r.y)**2);n<=a&&(t=i(e),n<=l)&&(n<l?s=[{handle:e,validHandleResult:t}]:n===l&&s.push({handle:e,validHandleResult:t}),l=n)}),!s.length)return{handle:null,validHandleResult:vi()};if(1===s.length)return s[0];const u=s.some(({validHandleResult:e})=>e.isValid),c=s.some(({handle:e})=>"target"===e.type);return s.find(({handle:e,validHandleResult:t})=>c?"target"===e.type:!u||t.isValid)||s[0]}(e,g,li(a,t,!1,[1,1]),b,D,e=>bi(e,y,c,u,d?"target":"source",h,g)));if(_=e,i||(P(),i=!0),l=n.handleDomNode,o=n.connection,s=n.isValid,f({connectionPosition:_&&s?ui({x:_.x,y:_.y},t):a,connectionStatus:function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!_,s),connectionEndHandle:n.endHandle}),!_&&!s&&!l)return Ei(r);o.source!==o.target&&l&&(Ei(r),(r=l).classList.add("connecting","react-flow__handle-connecting"),l.classList.toggle("valid",s),l.classList.toggle("react-flow__handle-valid",s))}function R(e){(_||l)&&o&&s&&t?.(o),m().onConnectEnd?.(e),n&&p?.(e),Ei(r),x(),cancelAnimationFrame(k),i=!1,s=!1,o=null,l=null,g.removeEventListener("mousemove",A),g.removeEventListener("mouseup",R),g.removeEventListener("touchmove",A),g.removeEventListener("touchend",R)}f({connectionPosition:a,connectionStatus:null,connectionNodeId:c,connectionHandleId:u,connectionHandleType:O,connectionStartHandle:{nodeId:c,handleId:u,type:O},connectionEndHandle:null}),w?.(e,{nodeId:c,handleId:u,handleType:O}),g.addEventListener("mousemove",A),g.addEventListener("mouseup",R),g.addEventListener("touchmove",A),g.addEventListener("touchend",R)}}var xi=()=>!0,ki=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),r=(0,ut.forwardRef)(({type:s="source",position:e=A.Top,isValidConnection:l,isConnectable:t=!0,isConnectableStart:u=!0,isConnectableEnd:n=!0,id:r,onConnect:a,children:i,className:o,onMouseDown:c,onTouchStart:d,...m},f)=>{const h=r||null,p="target"===s,g=ra(),y=(0,ut.useContext)(Ja);var v,b,w,{connectOnClick:r,noPanClassName:E}=na(ki,He),{connecting:S,clickConnecting:x}=na((v=y,b=h,w=s,e=>{var{connectionStartHandle:e,connectionEndHandle:t,connectionClickStartHandle:n}=e;return{connecting:e?.nodeId===v&&e?.handleId===b&&e?.type===w||t?.nodeId===v&&t?.handleId===b&&t?.type===w,clickConnecting:n?.nodeId===v&&n?.handleId===b&&n?.type===w}}),He);y||g.getState().onError?.("010",ea.error010());const k=e=>{var{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),t={...t,...e};r&&({edges:e,setEdges:r}=g.getState(),r(si(t,e))),n?.(t),a?.(t)};var _=e=>{var t;y&&(t=Ma(e),u&&(t&&0===e.button||!t)&&Si({event:e,handleId:h,nodeId:y,onConnect:k,isTarget:p,getState:g.getState,setState:g.setState,isValidConnection:l||g.getState().isValidConnection||xi}),(t?c:d)?.(e))};return ut.default.createElement("div",{"data-handleid":h,"data-nodeid":y,"data-handlepos":e,"data-id":`${y}-${h}-`+s,className:ct(["react-flow__handle","react-flow__handle-"+e,"nodrag",E,o,{source:!p,target:p,connectable:t,connectablestart:u,connectableend:n,connecting:x,connectionindicator:t&&(u&&!S||n&&S)}]),onMouseDown:_,onTouchStart:_,onClick:r?e=>{var t,{onClickConnectStart:n,onClickConnectEnd:r,connectionClickStartHandle:a,connectionMode:i,isValidConnection:o}=g.getState();y&&(a||u)&&(a?(t=fa(e.target),o=l||o||xi,{connection:i,isValid:a}=bi({nodeId:y,id:h,type:s},i,a.nodeId,a.handleId||null,a.type,o,t),a&&k(i),r?.(e),g.setState({connectionClickStartHandle:null})):(n?.(e,{nodeId:y,handleId:h,handleType:s}),g.setState({connectionClickStartHandle:{nodeId:y,type:s,handleId:h}})))}:void 0,ref:f,...m},i)}),v=(r.displayName="Handle",(0,ut.memo)(r)),t=({data:e,isConnectable:t,targetPosition:n=A.Top,sourcePosition:r=A.Bottom})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement(v,{type:"target",position:n,isConnectable:t}),e?.label,ut.default.createElement(v,{type:"source",position:r,isConnectable:t})),_i=(t.displayName="DefaultNode",(0,ut.memo)(t)),rn=({data:e,isConnectable:t,sourcePosition:n=A.Bottom})=>ut.default.createElement(ut.default.Fragment,null,e?.label,ut.default.createElement(v,{type:"source",position:n,isConnectable:t})),Ii=(rn.displayName="InputNode",(0,ut.memo)(rn)),a=({data:e,isConnectable:t,targetPosition:n=A.Top})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement(v,{type:"target",position:n,isConnectable:t}),e?.label),Ci=(a.displayName="OutputNode",(0,ut.memo)(a)),Ni=()=>null,Ti=(Ni.displayName="GroupNode",e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))})),Oi=e=>e.id;function Mi(e,t){return He(e.selectedNodes.map(Oi),t.selectedNodes.map(Oi))&&He(e.selectedEdges.map(Oi),t.selectedEdges.map(Oi))}var Ai=(0,ut.memo)(({onSelectionChange:e})=>{const n=ra(),{selectedNodes:r,selectedEdges:a}=na(Ti,Mi);return(0,ut.useEffect)(()=>{const t={nodes:r,edges:a};e?.(t),n.getState().onSelectionChange.forEach(e=>e(t))},[r,a,e]),null}),Ri=(Ai.displayName="SelectionListener",e=>!!e.onSelectionChange);function Di({onSelectionChange:e}){var t=na(Ri);return e||t?ut.default.createElement(Ai,{onSelectionChange:e}):null}var Pi=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Li(e,t){(0,ut.useEffect)(()=>{void 0!==e&&t(e)},[e])}function te(e,t,n){(0,ut.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}var Fi=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:i,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:m,edgesUpdatable:f,elevateNodesOnSelect:h,minZoom:p,maxZoom:g,nodeExtent:y,onNodesChange:v,onEdgesChange:b,elementsSelectable:w,connectionMode:E,snapGrid:S,snapToGrid:x,translateExtent:k,connectOnClick:_,defaultEdgeOptions:I,fitView:C,fitViewOptions:N,onNodesDelete:T,onEdgesDelete:O,onNodeDrag:M,onNodeDragStart:A,onNodeDragStop:R,onSelectionDrag:D,onSelectionDragStart:L,onSelectionDragStop:F,noPanClassName:V,nodeOrigin:j,rfId:z,autoPanOnConnect:B,autoPanOnNodeDrag:U,onError:$,connectionRadius:H,isValidConnection:Z,nodeDragThreshold:W})=>{const{setNodes:K,setEdges:Y,setDefaultNodesAndEdges:q,setMinZoom:X,setMaxZoom:G,setTranslateExtent:J,setNodeExtent:Q,reset:ee}=na(Pi,He);var P=ra();return(0,ut.useEffect)(()=>{var e=r?.map(e=>({...e,...I}));return q(n,e),()=>{ee()}},[]),te("defaultEdgeOptions",I,P.setState),te("connectionMode",E,P.setState),te("onConnect",a,P.setState),te("onConnectStart",i,P.setState),te("onConnectEnd",o,P.setState),te("onClickConnectStart",s,P.setState),te("onClickConnectEnd",l,P.setState),te("nodesDraggable",u,P.setState),te("nodesConnectable",c,P.setState),te("nodesFocusable",d,P.setState),te("edgesFocusable",m,P.setState),te("edgesUpdatable",f,P.setState),te("elementsSelectable",w,P.setState),te("elevateNodesOnSelect",h,P.setState),te("snapToGrid",x,P.setState),te("snapGrid",S,P.setState),te("onNodesChange",v,P.setState),te("onEdgesChange",b,P.setState),te("connectOnClick",_,P.setState),te("fitViewOnInit",C,P.setState),te("fitViewOnInitOptions",N,P.setState),te("onNodesDelete",T,P.setState),te("onEdgesDelete",O,P.setState),te("onNodeDrag",M,P.setState),te("onNodeDragStart",A,P.setState),te("onNodeDragStop",R,P.setState),te("onSelectionDrag",D,P.setState),te("onSelectionDragStart",L,P.setState),te("onSelectionDragStop",F,P.setState),te("noPanClassName",V,P.setState),te("nodeOrigin",j,P.setState),te("rfId",z,P.setState),te("autoPanOnConnect",B,P.setState),te("autoPanOnNodeDrag",U,P.setState),te("onError",$,P.setState),te("connectionRadius",H,P.setState),te("isValidConnection",Z,P.setState),te("nodeDragThreshold",W,P.setState),Li(e,K),Li(t,Y),Li(p,X),Li(g,G),Li(k,J),Li(y,Q),null},Vi={display:"none"},ji={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},zi="react-flow__node-desc",Bi="react-flow__edge-desc",Ui="react-flow__aria-live",$i=e=>e.ariaLiveMessage;function Hi({rfId:e}){var t=na($i);return ut.default.createElement("div",{id:Ui+"-"+e,"aria-live":"assertive","aria-atomic":"true",style:ji},t)}function Zi({rfId:e,disableKeyboardA11y:t}){return ut.default.createElement(ut.default.Fragment,null,ut.default.createElement("div",{id:zi+"-"+e,style:Vi},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ut.default.createElement("div",{id:Bi+"-"+e,style:Vi},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ut.default.createElement(Hi,{rfId:e}))}var Wi=(i=null,o={actInsideInputWithModifier:!0})=>{const[e,s]=(0,ut.useState)(!1),l=(0,ut.useRef)(!1),u=(0,ut.useRef)(new Set([])),[c,d]=(0,ut.useMemo)(()=>{var e,t;return null!==i?(t=(e=(Array.isArray(i)?i:[i]).filter(e=>"string"==typeof e).map(e=>e.split("+"))).reduce((e,t)=>e.concat(...t),[]),[e,t]):[[],[]]},[i]);return(0,ut.useEffect)(()=>{var e="undefined"!=typeof document?document:null;const t=o?.target||e;if(null!==i){const n=e=>{if(l.current=e.ctrlKey||e.metaKey||e.shiftKey,(!l.current||l.current&&!o.actInsideInputWithModifier)&&Ia(e))return!1;var t=Yi(e.code,d);u.current.add(e[t]),Ki(c,u.current,!1)&&(e.preventDefault(),s(!0))},r=e=>{if((!l.current||l.current&&!o.actInsideInputWithModifier)&&Ia(e))return!1;var t=Yi(e.code,d);Ki(c,u.current,!0)?(s(!1),u.current.clear()):u.current.delete(e[t]),"Meta"===e.key&&u.current.clear(),l.current=!1},a=()=>{u.current.clear(),s(!1)};return t?.addEventListener("keydown",n),t?.addEventListener("keyup",r),window.addEventListener("blur",a),()=>{t?.removeEventListener("keydown",n),t?.removeEventListener("keyup",r),window.removeEventListener("blur",a)}}},[i,s]),e};function Ki(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Yi(e,t){return t.includes(e)?"code":"key"}function qi(a,i,o){a.forEach(e=>{var t,n,r=e.parentNode||e.parentId;if(r&&!a.has(r))throw new Error(`Parent node ${r} not found`);(r||o?.[e.id])&&({x:r,y:t,z:n}=function e(t,n,r,a){var i,t=t.parentNode||t.parentId;return t?(t=n.get(t),i=ci(t,a),e(t,n,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(t[Sa]?.z??0)>(r.z??0)?t[Sa]?.z??0:r.z??0},a)):r}(e,a,{...e.position,z:e[Sa]?.z??0},i),e.positionAbsolute={x:r,y:t},e[Sa].z=n,o?.[e.id])&&(e[Sa].isParent=!0)})}function Xi(e,i,t,n){const o=new Map,s={},l=n?1e3:0;return e.forEach(e=>{var t=(Ea(e.zIndex)?e.zIndex:0)+(e.selected?l:0),n=i.get(e.id),r={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},a=e.parentNode||e.parentId,a=(a&&(s[a]=!0),n?.type&&n?.type!==e.type);Object.defineProperty(r,Sa,{enumerable:!1,value:{handleBounds:a?void 0:n?.[Sa]?.handleBounds,z:t}}),o.set(e.id,r)}),qi(o,t,s),o}function Gi(e,n={}){var{getNodes:e,width:t,height:r,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:s,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:c}=e(),l=n.initial&&!l&&u;if(o&&s&&(l||!n.initial)){var u=e().filter(t=>{var e=n.includeHiddenNodes?t.width&&t.height:!t.hidden;return n.nodes?.length?e&&n.nodes.some(e=>e.id===t.id):e}),l=u.every(e=>e.width&&e.height);if(0<u.length&&l)return e=di(u,c),{x:l,y:u,zoom:c}=hi(e,t,r,n.minZoom??a,n.maxZoom??i,n.padding??.1),e=Ur.translate(l,u).scale(c),"number"==typeof n.duration&&0<n.duration?o.transform(pi(s,n.duration),e):o.transform(s,e),!0}return!1}function Ji({changedNodes:e,changedEdges:t,get:n,set:r}){var a,i,{nodeInternals:n,edges:o,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:c}=n();e?.length&&(u&&r({nodeInternals:(a=n,e.forEach(e=>{var t=a.get(e.id);t&&a.set(t.id,{...t,[Sa]:t[Sa],selected:e.selected})}),new Map(a))}),s?.(e)),t?.length&&(c&&r({edges:(i=t,o.map(t=>{var e=i.find(e=>e.id===t.id);return e&&(t.selected=e.selected),t}))}),l?.(t))}var r=()=>{},Qi={zoomIn:r,zoomOut:r,zoomTo:r,getZoom:()=>1,setViewport:r,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:r,fitBounds:r,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},eo=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),to=()=>{const o=ra(),{d3Zoom:s,d3Selection:l}=na(eo,He);return(0,ut.useMemo)(()=>l&&s?{zoomIn:e=>s.scaleBy(pi(l,e?.duration),1.2),zoomOut:e=>s.scaleBy(pi(l,e?.duration),1/1.2),zoomTo:(e,t)=>s.scaleTo(pi(l,t?.duration),e),getZoom:()=>o.getState().transform[2],setViewport:(e,t)=>{var[n,r,a]=o.getState().transform,n=Ur.translate(e.x??n,e.y??r).scale(e.zoom??a);s.transform(pi(l,t?.duration),n)},getViewport:()=>{var[e,t,n]=o.getState().transform;return{x:e,y:t,zoom:n}},fitView:e=>Gi(o.getState,e),setCenter:(e,t,n)=>{var{width:r,height:a,maxZoom:i}=o.getState(),i=void 0!==n?.zoom?n.zoom:i,r=Ur.translate(r/2-e*i,a/2-t*i).scale(i);s.transform(pi(l,n?.duration),r)},fitBounds:(e,t)=>{var{width:n,height:r,minZoom:a,maxZoom:i}=o.getState(),{x:e,y:n,zoom:r}=hi(e,n,r,a,i,t?.padding??.1),a=Ur.translate(e,n).scale(r);s.transform(pi(l,t?.duration),a)},project:e=>{var{transform:t,snapToGrid:n,snapGrid:r}=o.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),li(e,t,n,r)},screenToFlowPosition:e=>{var t,{transform:n,snapToGrid:r,snapGrid:a,domNode:i}=o.getState();return i?({x:i,y:t}=i.getBoundingClientRect(),i={x:e.x-i,y:e.y-t},li(i,n,r,a)):e},flowToScreenPosition:e=>{var t,{transform:n,domNode:r}=o.getState();return r?({x:r,y:t}=r.getBoundingClientRect(),{x:(n=ui(e,n)).x+r,y:n.y+t}):e},viewportInitialized:!0}:Qi,[s,l])};function no(){const e=to(),p=ra(),t=(0,ut.useCallback)(()=>p.getState().getNodes().map(e=>({...e})),[]),n=(0,ut.useCallback)(e=>p.getState().nodeInternals.get(e),[]),r=(0,ut.useCallback)(()=>{var{edges:e=[]}=p.getState();return e.map(e=>({...e}))},[]),a=(0,ut.useCallback)(t=>{var{edges:e=[]}=p.getState();return e.find(e=>e.id===t)},[]),i=(0,ut.useCallback)(e=>{var{getNodes:t,setNodes:n,hasDefaultNodes:r,onNodesChange:a}=p.getState(),t=t(),e="function"==typeof e?e(t):e;r?n(e):a&&a(0===e.length?t.map(e=>({type:"remove",id:e.id})):e.map(e=>({item:e,type:"reset"})))},[]),o=(0,ut.useCallback)(e=>{var{edges:t=[],setEdges:n,hasDefaultEdges:r,onEdgesChange:a}=p.getState(),e="function"==typeof e?e(t):e;r?n(e):a&&a(0===e.length?t.map(e=>({type:"remove",id:e.id})):e.map(e=>({item:e,type:"reset"})))},[]),s=(0,ut.useCallback)(e=>{var e=Array.isArray(e)?e:[e],{getNodes:t,setNodes:n,hasDefaultNodes:r,onNodesChange:a}=p.getState();r?n([...t(),...e]):a&&a(e.map(e=>({item:e,type:"add"})))},[]),l=(0,ut.useCallback)(e=>{var e=Array.isArray(e)?e:[e],{edges:t=[],setEdges:n,hasDefaultEdges:r,onEdgesChange:a}=p.getState();r?n([...t,...e]):a&&a(e.map(e=>({item:e,type:"add"})))},[]),u=(0,ut.useCallback)(()=>{var{getNodes:e,edges:t=[],transform:n}=p.getState(),[n,r,a]=n;return{nodes:e().map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:n,y:r,zoom:a}}},[]),c=(0,ut.useCallback)(({nodes:e,edges:t})=>{const{nodeInternals:n,getNodes:r,edges:a,hasDefaultNodes:i,hasDefaultEdges:o,onNodesDelete:s,onEdgesDelete:l,onNodesChange:u,onEdgesChange:c}=p.getState(),d=(e||[]).map(e=>e.id),m=(t||[]).map(e=>e.id);var e=r().reduce((e,t)=>{const n=t.parentNode||t.parentId;var r=!d.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(d.includes(t.id)||r)&&e.push(t),e},[]),t=a.filter(e=>"boolean"!=typeof e.deletable||e.deletable),f=t.filter(e=>m.includes(e.id));if(e||f){t=fi(e,t),f=[...f,...t];const h=f.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(o||i)&&(o&&p.setState({edges:a.filter(e=>!h.includes(e.id))}),i)&&(e.forEach(e=>{n.delete(e.id)}),p.setState({nodeInternals:new Map(n)})),0<h.length&&(l?.(f),c)&&c(h.map(e=>({id:e,type:"remove"}))),0<e.length&&(s?.(e),u)&&(t=e.map(e=>({id:e.id,type:"remove"})),u(t))}},[]),d=(0,ut.useCallback)(e=>{var t=wa(e),n=t?null:p.getState().nodeInternals.get(e.id);return t||n?[t?e:ya(n),n,t]:[null,null,t]},[]),m=(0,ut.useCallback)((e,t=!0,n)=>{const[r,a,i]=d(e);return r?(n||p.getState().getNodes()).filter(e=>{return!!(i||e.id!==a.id&&e.positionAbsolute)&&(e=ya(e),e=ba(e,r),t&&0<e||e>=r.width*r.height)}):[]},[]),f=(0,ut.useCallback)((e,t,n=!0)=>{var[e]=d(e);return!!e&&(t=ba(e,t),n&&0<t||t>=e.width*e.height)},[]);return(0,ut.useMemo)(()=>({...e,getNodes:t,getNode:n,getEdges:r,getEdge:a,setNodes:i,setEdges:o,addNodes:s,addEdges:l,toObject:u,deleteElements:c,getIntersectingNodes:m,isNodeIntersecting:f}),[e,t,n,r,a,i,o,s,l,u,c,m,f])}var ro={actInsideInputWithModifier:!1};var ao={position:"absolute",width:"100%",height:"100%",top:0,left:0},io=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,oo=e=>({x:e.x,y:e.y,zoom:e.k}),so=(e,t)=>e.target.closest("."+t),lo=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),uo=e=>{var t=e.ctrlKey&&Ra()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},co=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),mo=({onMove:u,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:m=!0,panOnScroll:i=!1,panOnScrollSpeed:f=.5,panOnScrollMode:h=Na.Free,zoomOnDoubleClick:o=!0,elementsSelectable:e,panOnDrag:s=!0,defaultViewport:l,translateExtent:p,minZoom:g,maxZoom:y,zoomActivationKeyCode:t,preventScrolling:n=!0,children:v,noWheelClassName:b,noPanClassName:L})=>{const w=(0,ut.useRef)(),E=ra(),S=(0,ut.useRef)(!1),x=(0,ut.useRef)(!1),k=(0,ut.useRef)(null),_=(0,ut.useRef)({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:C,d3ZoomHandler:N,userSelectionActive:T}=na(co,He),O=Wi(t),M=(0,ut.useRef)(0),A=(0,ut.useRef)(!1),R=(0,ut.useRef)();{var D=k;const P=ra();(0,ut.useEffect)(()=>{let e;const t=()=>{var e;D.current&&(0!==(e=la(D.current)).height&&0!==e.width||P.getState().onError?.("004",ea.error004()),P.setState({width:e.width||500,height:e.height||500}))};return t(),window.addEventListener("resize",t),D.current&&(e=new ResizeObserver(()=>t())).observe(D.current),()=>{window.removeEventListener("resize",t),e&&D.current&&e.unobserve(D.current)}},[])}return(0,ut.useEffect)(()=>{var e,t,n,r;k.current&&(n=k.current.getBoundingClientRect(),e=Gr().scaleExtent([g,y]).translateExtent(p),t=zt(k.current).call(e),r=Ur.translate(l.x,l.y).scale(ua(l.zoom,g,y)),n=[[0,0],[n.width,n.height]],r=e.constrain()(r,n,p),e.transform(t,r),e.wheelDelta(uo),E.setState({d3Zoom:e,d3Selection:t,d3ZoomHandler:t.on("wheel.zoom"),transform:[r.x,r.y,r.k],domNode:k.current.closest(".react-flow")}))},[]),(0,ut.useEffect)(()=>{C&&I&&(!i||O||T?void 0!==N&&C.on("wheel.zoom",function(e,t){if(!n&&"wheel"===e.type&&!e.ctrlKey||so(e,b))return null;e.preventDefault(),N.call(this,e,t)},{passive:!1}):C.on("wheel.zoom",n=>{if(so(n,b))return!1;n.preventDefault(),n.stopImmediatePropagation();var e,r=C.property("__zoom").k||1;if(n.ctrlKey&&m)e=Bt(n),a=uo(n),a=r*Math.pow(2,a),I.scaleTo(C,a,e,n);else{var a=1===n.deltaMode?20:1;let e=h===Na.Vertical?0:n.deltaX*a,t=h===Na.Horizontal?0:n.deltaY*a;!Ra()&&n.shiftKey&&h!==Na.Vertical&&(e=n.deltaY*a,t=0),I.translateBy(C,-e/r*f,-t/r*f,{internal:!0});const i=oo(C.property("__zoom")),{onViewportChangeStart:o,onViewportChange:s,onViewportChangeEnd:l}=E.getState();clearTimeout(R.current),A.current||(A.current=!0,c?.(n,i),o?.(i)),A.current&&(u?.(n,i),s?.(i),R.current=setTimeout(()=>{d?.(n,i),l?.(i),A.current=!1},150))}},{passive:!1}))},[T,i,h,C,I,N,O,m,n,b,c,u,d]),(0,ut.useEffect)(()=>{I&&I.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;M.current=e.sourceEvent?.button;var t=E.getState()["onViewportChangeStart"],n=oo(e.transform);S.current=!0,_.current=n,"mousedown"===e.sourceEvent?.type&&E.setState({paneDragging:!0}),t?.(n),c?.(e.sourceEvent,n)})},[I,c]),(0,ut.useEffect)(()=>{I&&(T&&!S.current?I.on("zoom",null):T||I.on("zoom",e=>{var t,n=E.getState()["onViewportChange"];E.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),x.current=!(!r||!lo(s,M.current??0)),!u&&!n||e.sourceEvent?.internal||(t=oo(e.transform),n?.(t),u?.(e.sourceEvent,t))}))},[T,I,u,s,r]),(0,ut.useEffect)(()=>{I&&I.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const t=E.getState()["onViewportChangeEnd"];if(S.current=!1,E.setState({paneDragging:!1}),r&&lo(s,M.current??0)&&!x.current&&r(e.sourceEvent),x.current=!1,(d||t)&&io(_.current,e.transform)){const n=oo(e.transform);_.current=n,clearTimeout(w.current),w.current=setTimeout(()=>{t?.(n),d?.(e.sourceEvent,n)},i?150:0)}})},[I,i,s,d,r]),(0,ut.useEffect)(()=>{I&&I.filter(e=>{var t,n=O||a,r=m&&e.ctrlKey;return!(!(!0===s||Array.isArray(s)&&s.includes(1))||1!==e.button||"mousedown"!==e.type||!so(e,"react-flow__node")&&!so(e,"react-flow__edge"))||!!(s||n||i||o||m)&&!T&&!(!o&&"dblclick"===e.type||so(e,b)&&"wheel"===e.type||so(e,L)&&("wheel"!==e.type||i&&"wheel"===e.type&&!O)||!m&&e.ctrlKey&&"wheel"===e.type||!(n||i||r||"wheel"!==e.type)||!(s||"mousedown"!==e.type&&"touchstart"!==e.type)||Array.isArray(s)&&!s.includes(e.button)&&"mousedown"===e.type||(t=Array.isArray(s)&&s.includes(e.button)||!e.button||e.button<=1,e.ctrlKey&&"wheel"!==e.type))&&t})},[T,I,a,m,i,o,s,e,O]),ut.default.createElement("div",{className:"react-flow__renderer",ref:k,style:ao},v)},fo=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ho(){var{userSelectionActive:e,userSelectionRect:t}=na(fo,He);return e&&t?ut.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function po(e,t){const n=t.parentNode||t.parentId;var r,a,e=e.find(e=>e.id===n);e&&(r=t.position.x+t.width-e.width,a=t.position.y+t.height-e.height,0<r||0<a||t.position.x<0||t.position.y<0)&&(e.style={...e.style},e.style.width=e.style.width??e.width,e.style.height=e.style.height??e.height,0<r&&(e.style.width+=r),0<a&&(e.style.height+=a),t.position.x<0&&(r=Math.abs(t.position.x),e.position.x=e.position.x-r,e.style.width+=r,t.position.x=0),t.position.y<0&&(a=Math.abs(t.position.y),e.position.y=e.position.y-a,e.style.height+=a,t.position.y=0),e.width=e.style.width,e.height=e.style.height)}function go(i,e){var t;return i.some(e=>"reset"===e.type)?i.filter(e=>"reset"===e.type).map(e=>e.item):(t=i.filter(e=>"add"===e.type).map(e=>e.item),e.reduce((e,t)=>{var n=i.filter(e=>e.id===t.id);if(0===n.length)e.push(t);else{var r={...t};for(const a of n)if(a)switch(a.type){case"select":r.selected=a.selected;break;case"position":void 0!==a.position&&(r.position=a.position),void 0!==a.positionAbsolute&&(r.positionAbsolute=a.positionAbsolute),void 0!==a.dragging&&(r.dragging=a.dragging),r.expandParent&&po(e,r);break;case"dimensions":void 0!==a.dimensions&&(r.width=a.dimensions.width,r.height=a.dimensions.height),void 0!==a.updateStyle&&(r.style={...r.style||{},...a.dimensions}),"boolean"==typeof a.resizing&&(r.resizing=a.resizing),r.expandParent&&po(e,r);break;case"remove":return e}e.push(r)}return e},t))}function yo(e,t){return go(e,t)}function vo(e,t){return go(e,t)}var bo=(e,t)=>({id:e,type:"select",selected:t});function wo(e,r){return e.reduce((e,t)=>{var n=r.includes(t.id);return!t.selected&&n?(t.selected=!0,e.push(bo(t.id,!0))):t.selected&&!n&&(t.selected=!1,e.push(bo(t.id,!1))),e},[])}var Eo=(t,n)=>e=>{e.target===n.current&&t?.(e)},So=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),xo=(0,ut.memo)(({isSelecting:d,selectionMode:m=Ta.Full,panOnDrag:t,onSelectionStart:a,onSelectionEnd:n,onPaneClick:r,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:e,onPaneMouseMove:s,onPaneMouseLeave:l,children:u})=>{const c=(0,ut.useRef)(null),f=ra(),h=(0,ut.useRef)(0),p=(0,ut.useRef)(0),g=(0,ut.useRef)(),{userSelectionActive:y,elementsSelectable:v,dragging:b}=na(So,He),w=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),h.current=0,p.current=0},E=e=>{r?.(e),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})};var S=o?e=>o(e):void 0,x=v&&(d||y);return ut.default.createElement("div",{className:ct(["react-flow__pane",{dragging:b,selection:d}]),onClick:x?void 0:Eo(E,c),onContextMenu:Eo(e=>{Array.isArray(t)&&t?.includes(2)?e.preventDefault():i?.(e)},c),onWheel:Eo(S,c),onMouseEnter:x?void 0:e,onMouseDown:x?e=>{var t,{resetSelectedElements:n,domNode:r}=f.getState();g.current=r?.getBoundingClientRect(),v&&d&&0===e.button&&e.target===c.current&&g.current&&({x:r,y:t}=Aa(e,g.current),n(),f.setState({userSelectionRect:{width:0,height:0,startX:r,startY:t,x:r,y:t}}),a?.(e))}:void 0,onMouseMove:x?e=>{var t,n,{userSelectionRect:r,nodeInternals:a,edges:i,transform:o,onNodesChange:s,onEdgesChange:l,nodeOrigin:u,getNodes:c}=f.getState();d&&g.current&&r&&(f.setState({userSelectionActive:!0,nodesSelectionActive:!1}),e=Aa(e,g.current),t=r.startX??0,n=r.startY??0,r={...r,x:e.x<t?e.x:t,y:e.y<n?e.y:n,width:Math.abs(e.x-t),height:Math.abs(e.y-n)},t=c(),e=mi(a,r,o,m===Ta.Partial,!0,u),n=fi(e,i).map(e=>e.id),c=e.map(e=>e.id),h.current!==c.length&&(h.current=c.length,(a=wo(t,c)).length)&&s?.(a),p.current!==n.length&&(p.current=n.length,(o=wo(i,n)).length)&&l?.(o),f.setState({userSelectionRect:r}))}:s,onMouseUp:x?e=>{var t;0===e.button&&(t=f.getState()["userSelectionRect"],!y&&t&&e.target===c.current&&E(e),f.setState({nodesSelectionActive:0<h.current}),w(),n?.(e))}:void 0,onMouseLeave:x?e=>{y&&(f.setState({nodesSelectionActive:0<h.current}),n?.(e)),w()}:l,ref:c,style:ao},u,ut.default.createElement(ho,null))});function ko(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1}while(r=r.parentElement);return!1}function _o(t,n,r,a){return Array.from(t.values()).filter(e=>(e.selected||e.id===a)&&(!e.parentNode||e.parentId||!function e(t,n){t=t.parentNode||t.parentId;return!!t&&!!(t=n.get(t))&&(!!t.selected||e(t,n))}(e,t))&&(e.draggable||n&&void 0===e.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:r.x-(e.positionAbsolute?.x??0),y:r.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function Io(e,t,n,r,a=[0,0],i){var o=(r=(o=e).extent||r)&&"parent"!==r?[r[0],[r[1][0]-(o.width||0),r[1][1]-(o.height||0)]]:r;let s=o;var l,u,r=e.parentNode||e.parentId;"parent"!==e.extent||e.expandParent?e.extent&&r&&"parent"!==e.extent&&(l=n.get(r),{x:l,y:u}=ci(l,a).positionAbsolute,s=[[e.extent[0][0]+l,e.extent[0][1]+u],[e.extent[1][0]+l,e.extent[1][1]+u]]):s=r&&e.width&&e.height?(l=n.get(r),{x:u,y:d}=ci(l,a).positionAbsolute,l&&Ea(u)&&Ea(d)&&Ea(l.width)&&Ea(l.height)?[[u+e.width*a[0],d+e.height*a[1]],[u+l.width-e.width+e.width*a[0],d+l.height-e.height+e.height*a[1]]]:s):(i?.("005",ea.error005()),o);let c={x:0,y:0};r&&(u=n.get(r),c=ci(u,a).positionAbsolute);var d=s&&"parent"!==s?ca(t,s):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function Co({nodeId:t,dragItems:e,nodeInternals:n}){e=e.map(e=>{return{...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}});return[t?e.find(e=>e.id===t):e[0],e]}xo.displayName="Pane";var No=(e,t,n,r)=>{e=t.querySelectorAll(e);if(!e||!e.length)return null;e=Array.from(e);const a=t.getBoundingClientRect(),i={x:a.width*r[0],y:a.height*r[1]};return e.map(e=>{var t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-i.x)/n,y:(t.top-a.top-i.y)/n,...la(e)}})};function To(n,r,a){return void 0===a?a:e=>{var t=r().nodeInternals.get(n);t&&a(e,{...t})}}function Oo({id:e,store:t,unselect:n=!1,nodeRef:r}){var{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:s,onError:l}=t.getState(),s=s.get(e);s?(t.setState({nodesSelectionActive:!1}),s.selected?(n||s.selected&&o)&&(i({nodes:[s],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])):l?.("012",ea.error012(e))}function Mo(r){return(e,t,n)=>r?.(e,n)}function Ao({nodeRef:_,disabled:I=!1,noDragClassName:C,handleSelector:N,nodeId:T,isSelectable:O,selectNodesOnDrag:M}){const A=ra(),[e,R]=(0,ut.useState)(!1),D=(0,ut.useRef)([]),P=(0,ut.useRef)({x:null,y:null}),L=(0,ut.useRef)(0),F=(0,ut.useRef)(null),V=(0,ut.useRef)({x:0,y:0}),j=(0,ut.useRef)(null),z=(0,ut.useRef)(!1),B=(0,ut.useRef)(!1),U=(0,ut.useRef)(!1),$=function(){const i=ra();return(0,ut.useCallback)(({sourceEvent:e})=>{var{transform:t,snapGrid:n,snapToGrid:r}=i.getState(),a=(e.touches?e.touches[0]:e).clientX,e=(e.touches?e.touches[0]:e).clientY,a={x:(a-t[0])/t[2],y:(e-t[1])/t[2]};return{xSnapped:r?n[0]*Math.round(a.x/n[0]):a.x,ySnapped:r?n[1]*Math.round(a.y/n[1]):a.y,...a}},[])}();return(0,ut.useEffect)(()=>{if(_?.current){const E=zt(_.current),S=({x:r,y:a})=>{const{nodeInternals:i,onNodeDrag:e,onSelectionDrag:t,updateNodePositions:n,nodeExtent:o,snapGrid:s,snapToGrid:l,nodeOrigin:u,onError:c}=A.getState();let d=!(P.current={x:r,y:a}),m={x:0,y:0,x2:0,y2:0};var f,h,p;1<D.current.length&&o&&(f=di(D.current,u),m=pa(f)),D.current=D.current.map(e=>{var t={x:r-e.distance.x,y:a-e.distance.y},n=(l&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1])),[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]),t=(1<D.current.length&&o&&!e.extent&&(n[0][0]=e.positionAbsolute.x-m.x+o[0][0],n[1][0]=e.positionAbsolute.x+(e.width??0)-m.x2+o[1][0],n[0][1]=e.positionAbsolute.y-m.y+o[0][1],n[1][1]=e.positionAbsolute.y+(e.height??0)-m.y2+o[1][1]),Io(e,t,i,n,u,c));return d=d||e.position.x!==t.position.x||e.position.y!==t.position.y,e.position=t.position,e.positionAbsolute=t.positionAbsolute,e}),d&&(n(D.current,!0,!0),R(!0),f=T?e:Mo(t))&&j.current&&([h,p]=Co({nodeId:T,dragItems:D.current,nodeInternals:i}),f(j.current,h,p))},x=()=>{var e,t,n,r;F.current&&([e,t]=ma(V.current,F.current),0===e&&0===t||({transform:n,panBy:r}=A.getState(),P.current.x=(P.current.x??0)-e/n[2],P.current.y=(P.current.y??0)-t/n[2],r({x:e,y:t})&&S(P.current)),L.current=requestAnimationFrame(x))},k=e=>{var{nodeInternals:t,multiSelectionActive:n,nodesDraggable:r,unselectNodesAndEdges:a,onNodeDragStart:i,onSelectionDragStart:o}=A.getState(),i=(B.current=!0,T?i:Mo(o)),o=(M&&O||n||!T||t.get(T)?.selected||a(),T&&O&&M&&Oo({id:T,store:A,nodeRef:_}),$(e));P.current=o,D.current=_o(t,r,o,T),i&&D.current&&([n,a]=Co({nodeId:T,dragItems:D.current,nodeInternals:t}),i(e.sourceEvent,n,a))};var e;if(!I)return m=Xt,f=Gt,g=Jt,h=Qt,y={},v=qe("start","drag","end"),w=b=0,p.filter=function(e){return arguments.length?(m="function"==typeof e?e:Yt(!!e),p):m},p.container=function(e){return arguments.length?(f="function"==typeof e?e:Yt(e),p):f},p.subject=function(e){return arguments.length?(g="function"==typeof e?e:Yt(e),p):g},p.touchable=function(e){return arguments.length?(h="function"==typeof e?e:Yt(!!e),p):h},p.on=function(){var e=v.on.apply(v,arguments);return e===v?p:e},p.clickDistance=function(e){return arguments.length?(w=(e=+e)*e,p):Math.sqrt(w)},e=p.on("start",e=>{var{domNode:t,nodeDragThreshold:n}=A.getState(),n=(0===n&&k(e),U.current=!1,$(e));P.current=n,F.current=t?.getBoundingClientRect()||null,V.current=Aa(e.sourceEvent,F.current)}).on("drag",e=>{var t,n=$(e),{autoPanOnNodeDrag:r,nodeDragThreshold:a}=A.getState();"touchmove"===e.sourceEvent.type&&1<e.sourceEvent.touches.length&&(U.current=!0),U.current||(!z.current&&B.current&&r&&(z.current=!0,x()),B.current||(r=n.xSnapped-(P?.current?.x??0),t=n.ySnapped-(P?.current?.y??0),a<Math.sqrt(r*r+t*t)&&k(e)),(P.current.x!==n.xSnapped||P.current.y!==n.ySnapped)&&D.current&&B.current&&(j.current=e.sourceEvent,V.current=Aa(e.sourceEvent,F.current),S(n)))}).on("end",e=>{var t,n,r,a;B.current&&!U.current&&(R(!1),z.current=!1,B.current=!1,cancelAnimationFrame(L.current),D.current)&&({updateNodePositions:a,nodeInternals:t,onNodeDragStop:n,onSelectionDragStop:r}=A.getState(),n=T?n:Mo(r),a(D.current,!1,!1),n)&&([r,a]=Co({nodeId:T,dragItems:D.current,nodeInternals:t}),n(e.sourceEvent,r,a))}).filter(e=>{var t=e.target;return!e.button&&(!C||!ko(t,"."+C,_))&&(!N||ko(t,N,_))}),E.call(e),()=>{E.on(".drag",null)};E.on(".drag",null)}function p(e){e.on("mousedown.drag",t).filter(h).on("touchstart.drag",a).on("touchmove.drag",i,Ut).on("touchend.drag touchcancel.drag",o).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(e,t){!d&&m.call(this,e,t)&&(t=s(this,f.call(this,e,t),e,t,"mouse"))&&(zt(e.view).on("mousemove.drag",n,$t).on("mouseup.drag",r,$t),Wt(e.view),Ht(e),c=!1,l=e.clientX,u=e.clientY,t("start",e))}function n(e){var t,n;Zt(e),c||(t=e.clientX-l,n=e.clientY-u,c=w<t*t+n*n),y.mouse("drag",e)}function r(e){zt(e.view).on("mousemove.drag mouseup.drag",null),Kt(e.view,c),Zt(e),y.mouse("end",e)}function a(e,t){if(m.call(this,e,t))for(var n,r=e.changedTouches,a=f.call(this,e,t),i=r.length,o=0;o<i;++o)(n=s(this,a,e,t,r[o].identifier,r[o]))&&(Ht(e),n("start",e,r[o]))}function i(e){for(var t,n=e.changedTouches,r=n.length,a=0;a<r;++a)(t=y[n[a].identifier])&&(Zt(e),t("drag",e,n[a]))}function o(e){var t,n,r=e.changedTouches,a=r.length;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),t=0;t<a;++t)(n=y[r[t].identifier])&&(Ht(e),n("end",e,r[t]))}function s(o,s,e,l,u,t){var c,d,m,f=v.copy(),h=Bt(t||e,s);if(null!=(m=g.call(o,new qt("beforestart",{sourceEvent:e,target:p,identifier:u,active:b,x:h[0],y:h[1],dx:0,dy:0,dispatch:f}),l)))return c=m.x-h[0]||0,d=m.y-h[1]||0,function e(t,n,r){var a,i=h;switch(t){case"start":y[u]=e,a=b++;break;case"end":delete y[u],--b;case"drag":h=Bt(r||n,s),a=b}f.call(t,o,new qt(t,{sourceEvent:n,subject:m,target:p,identifier:u,active:a,x:h[0]+c,y:h[1]+d,dx:h[0]-i[0],dy:h[1]-i[1],dispatch:f}),l)}}var l,u,c,d,m,f,g,h,y,v,b,w},[_,I,C,N,O,A,T,M,$]),e}function Ro(){const p=ra();return(0,ut.useCallback)(e=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:t,getNodes:n,snapToGrid:i,snapGrid:o,onError:s,nodesDraggable:l}=p.getState();var u=n().filter(e=>e.selected&&(e.draggable||l&&void 0===e.draggable)),c=i?o[0]:5,d=i?o[1]:5,m=e.isShiftPressed?4:1;const f=e.x*c*m,h=e.y*d*m;c=u.map(e=>{var t,n;return e.positionAbsolute&&(t={x:e.positionAbsolute.x+f,y:e.positionAbsolute.y+h},{positionAbsolute:t,position:n}=(i&&(t.x=o[0]*Math.round(t.x/o[0]),t.y=o[1]*Math.round(t.y/o[1])),Io(e,t,r,a,void 0,s)),e.position=n,e.positionAbsolute=t),e});t(c,!0,!1)},[])}var Do={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Po=$=>{var e=({id:r,type:a,data:e,xPos:n,yPos:i,xPosOrigin:t,yPosOrigin:o,selected:s,onClick:l,onMouseEnter:u,onMouseMove:c,onMouseLeave:d,onContextMenu:m,onDoubleClick:f,style:h,className:p,isDraggable:g,isSelectable:y,isConnectable:L,isFocusable:v,selectNodesOnDrag:b,sourcePosition:w,targetPosition:E,hidden:S,resizeObserver:x,dragHandle:k,zIndex:_,isParent:F,noDragClassName:I,noPanClassName:V,initialized:C,disableKeyboardA11y:N,ariaLabel:j,rfId:z,hasHandleBounds:T})=>{const O=ra(),M=(0,ut.useRef)(null),A=(0,ut.useRef)(null),R=(0,ut.useRef)(w),D=(0,ut.useRef)(E),P=(0,ut.useRef)(a);var B=y||g||l||u||c||d;const U=Ro();u=To(r,O.getState,u),c=To(r,O.getState,c),d=To(r,O.getState,d),m=To(r,O.getState,m),f=To(r,O.getState,f),(0,ut.useEffect)(()=>()=>{A.current&&(x?.unobserve(A.current),A.current=null)},[]),(0,ut.useEffect)(()=>{var e;M.current&&!S&&(e=M.current,C&&T&&A.current===e||(A.current&&x?.unobserve(A.current),x?.observe(e),A.current=e))},[S,C,T]),(0,ut.useEffect)(()=>{var e=P.current!==a,t=R.current!==w,n=D.current!==E;M.current&&(e||t||n)&&(e&&(P.current=a),t&&(R.current=w),n&&(D.current=E),O.getState().updateNodeDimensions([{id:r,nodeElement:M.current,forceUpdate:!0}]))},[r,a,w,E]),I=Ao({nodeRef:M,disabled:S||!g,noDragClassName:I,handleSelector:k,nodeId:r,isSelectable:y,selectNodesOnDrag:b});return S?null:ut.default.createElement("div",{className:ct(["react-flow__node","react-flow__node-"+a,{[V]:g},p,{selected:s,selectable:y,parent:F,dragging:I}]),ref:M,style:{zIndex:_,transform:`translate(${t}px,${o}px)`,pointerEvents:B?"all":"none",visibility:C?"visible":"hidden",...h},"data-id":r,"data-testid":"rf__node-"+r,onMouseEnter:u,onMouseMove:c,onMouseLeave:d,onContextMenu:m,onClick:e=>{var t=O.getState()["nodeDragThreshold"];y&&(!b||!g||0<t)&&Oo({id:r,store:O,nodeRef:M}),l&&(t=O.getState().nodeInternals.get(r))&&l(e,{...t})},onDoubleClick:f,onKeyDown:v?e=>{var t;Ia(e)||N||(xa.includes(e.key)&&y?(t="Escape"===e.key,Oo({id:r,store:O,unselect:t,nodeRef:M})):g&&s&&Object.prototype.hasOwnProperty.call(Do,e.key)&&(O.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~n}, y: `+~~i}),U({x:Do[e.key].x,y:Do[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:v?0:void 0,role:v?"button":void 0,"aria-describedby":N?void 0:zi+"-"+z,"aria-label":j},ut.default.createElement(Qa,{value:r},ut.default.createElement($,{id:r,data:e,type:a,xPos:n,yPos:i,selected:s,isConnectable:L,sourcePosition:w,targetPosition:E,dragging:I,dragHandle:k,zIndex:_})))};return e.displayName="NodeWrapper",(0,ut.memo)(e)},Lo=e=>{var t=e.getNodes().filter(e=>e.selected);return{...di(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var Fo=(0,ut.memo)(function({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const r=ra();var{width:a,height:i,x:o,y:s,transformString:l,userSelectionActive:u}=na(Lo,He);const c=Ro(),d=(0,ut.useRef)(null);return(0,ut.useEffect)(()=>{t||d.current?.focus({preventScroll:!0})},[t]),Ao({nodeRef:d}),!u&&a&&i?(u=n?e=>{var t=r.getState().getNodes().filter(e=>e.selected);n(e,t)}:void 0,ut.default.createElement("div",{className:ct(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},ut.default.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:t?void 0:-1,onKeyDown:t?void 0:e=>{Object.prototype.hasOwnProperty.call(Do,e.key)&&c({x:Do[e.key].x,y:Do[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:i,top:s,left:o}}))):null}),Vo=e=>e.nodesSelectionActive,t=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:s,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:m,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:S,panOnScrollSpeed:x,panOnScrollMode:k,zoomOnDoubleClick:_,panOnDrag:I,defaultViewport:C,translateExtent:N,minZoom:T,maxZoom:O,preventScrolling:L,onSelectionContextMenu:F,noWheelClassName:V,noPanClassName:M,disableKeyboardA11y:j})=>{var z=na(Vo),d=Wi(d),y=Wi(y),I=y||I,y=y||S,S=d||m&&!0!==I;{var{deleteKeyCode:m,multiSelectionKeyCode:s}={deleteKeyCode:s,multiSelectionKeyCode:g};const A=ra(),R=no()["deleteElements"],D=Wi(m,ro),P=Wi(s);(0,ut.useEffect)(()=>{var e,t;D&&({edges:t,getNodes:e}=A.getState(),e=e().filter(e=>e.selected),t=t.filter(e=>e.selected),R({nodes:e,edges:t}),A.setState({nodesSelectionActive:!1}))},[D]),(0,ut.useEffect)(()=>{A.setState({multiSelectionActive:P})},[P])}return ut.default.createElement(mo,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:y,panOnScrollSpeed:x,panOnScrollMode:k,zoomOnDoubleClick:_,panOnDrag:!d&&I,defaultViewport:C,translateExtent:N,minZoom:T,maxZoom:O,zoomActivationKeyCode:v,preventScrolling:L,noWheelClassName:V,noPanClassName:M},ut.default.createElement(xo,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:I,isSelecting:!!S,selectionMode:f},e,z&&ut.default.createElement(Fo,{onSelectionContextMenu:F,noPanClassName:M,disableKeyboardA11y:j})))},jo=(t.displayName="FlowRenderer",(0,ut.memo)(t));function zo(n){var e={input:Po(n.input||Ii),default:Po(n.default||_i),output:Po(n.output||Ci),group:Po(n.group||Ni)},t=Object.keys(n).filter(e=>!["input","default","output","group"].includes(e)).reduce((e,t)=>(e[t]=Po(n[t]||_i),e),{});return{...e,...t}}var Bo=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),rn=h=>{const{nodesDraggable:p,nodesConnectable:g,nodesFocusable:y,elementsSelectable:v,updateNodeDimensions:t,onError:b}=na(Bo,He);n=h.onlyRenderVisibleElements;var n,e=na((0,ut.useCallback)(e=>n?mi(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[n]));const r=(0,ut.useRef)(),w=(0,ut.useMemo)(()=>{var e;return"undefined"==typeof ResizeObserver?null:(e=new ResizeObserver(e=>{e=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));t(e)}),r.current=e)},[]);return(0,ut.useEffect)(()=>()=>{r?.current?.disconnect()},[]),ut.default.createElement("div",{className:"react-flow__nodes",style:ao},e.map(e=>{let t=e.type||"default";h.nodeTypes[t]||(b?.("003",ea.error003(t)),t="default");var n,r,a,i,o=h.nodeTypes[t]||h.nodeTypes.default,s=!!(e.draggable||p&&void 0===e.draggable),l=!!(e.selectable||v&&void 0===e.selectable),u=!!(e.connectable||g&&void 0===e.connectable),c=!!(e.focusable||y&&void 0===e.focusable),d=h.nodeExtent?ca(e.positionAbsolute,h.nodeExtent):e.positionAbsolute,m=d?.x??0,d=d?.y??0,f=({x:f,y:n,width:r,height:a,origin:i}=[{x:m,y:d,width:e.width??0,height:e.height??0,origin:h.nodeOrigin}][0],!r||!a||i[0]<0||i[1]<0||1<i[0]||1<i[1]?{x:f,y:n}:{x:f-r*i[0],y:n-a*i[1]});return ut.default.createElement(o,{key:e.id,id:e.id,className:e.className,style:e.style,type:t,data:e.data,sourcePosition:e.sourcePosition||A.Bottom,targetPosition:e.targetPosition||A.Top,hidden:e.hidden,xPos:m,yPos:d,xPosOrigin:f.x,yPosOrigin:f.y,selectNodesOnDrag:h.selectNodesOnDrag,onClick:h.onNodeClick,onMouseEnter:h.onNodeMouseEnter,onMouseMove:h.onNodeMouseMove,onMouseLeave:h.onNodeMouseLeave,onContextMenu:h.onNodeContextMenu,onDoubleClick:h.onNodeDoubleClick,selected:!!e.selected,isDraggable:s,isSelectable:l,isConnectable:u,isFocusable:c,resizeObserver:w,dragHandle:e.dragHandle,zIndex:e[Sa]?.z??0,isParent:!!e[Sa]?.isParent,noDragClassName:h.noDragClassName,noPanClassName:h.noPanClassName,initialized:!!e.width&&!!e.height,rfId:h.rfId,disableKeyboardA11y:h.disableKeyboardA11y,ariaLabel:e.ariaLabel,hasHandleBounds:!!e[Sa]?.handleBounds})}))},Uo=(rn.displayName="NodeRenderer",(0,ut.memo)(rn)),$o="react-flow__edgeupdater",Ho=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:i,onMouseOut:o,type:s})=>{return ut.default.createElement("circle",{onMouseDown:a,onMouseEnter:i,onMouseOut:o,className:ct([$o,$o+"-"+s]),cx:(a=t,i=r,(o=e)===A.Left?a-i:o===A.Right?a+i:a),cy:(s=n,t=r,(o=e)===A.Top?s-t:o===A.Bottom?s+t:s),r:r,stroke:"transparent",fill:"transparent"})},Zo=()=>!0,Wo=ee=>{var e=({id:l,className:e,type:t,data:L,onClick:i,onEdgeDoubleClick:n,selected:r,animated:a,label:F,labelStyle:V,labelShowBg:j,labelBgStyle:z,labelBgPadding:B,labelBgBorderRadius:U,style:$,source:u,target:c,sourceX:o,sourceY:s,targetX:d,targetY:m,sourcePosition:f,targetPosition:h,elementsSelectable:p,hidden:g,sourceHandleId:y,targetHandleId:v,onContextMenu:b,onMouseEnter:w,onMouseMove:E,onMouseLeave:S,reconnectRadius:x,onReconnect:H,onReconnectStart:Z,onReconnectEnd:W,markerEnd:k,markerStart:_,rfId:I,ariaLabel:C,isFocusable:N,isReconnectable:T,pathOptions:K,interactionWidth:Y,disableKeyboardA11y:q})=>{const O=(0,ut.useRef)(null),[X,M]=(0,ut.useState)(!1),[G,A]=(0,ut.useState)(!1),R=ra();var J=(0,ut.useMemo)(()=>`url('#${ii(_,I)}')`,[_,I]),Q=(0,ut.useMemo)(()=>`url('#${ii(k,I)}')`,[k,I]);if(g)return null;g=Pa(l,R.getState,n),n=Pa(l,R.getState,b),b=Pa(l,R.getState,w),w=Pa(l,R.getState,E),E=Pa(l,R.getState,S);const D=(e,t)=>{if(0===e.button){var{edges:n,isValidConnection:r}=R.getState(),a=t?c:u,i=(t?v:y)||null;const o=t?"target":"source";r=r||Zo;const s=n.find(e=>e.id===l);A(!0),Z?.(e,s,o);Si({event:e,handleId:i,nodeId:a,onConnect:e=>H?.(s,e),isTarget:t,getState:R.getState,setState:R.setState,isValidConnection:r,edgeUpdaterType:o,onReconnectEnd:e=>{A(!1),W?.(e,s,o)}})}};var S=()=>M(!0),P=()=>M(!1);return ut.default.createElement("g",{className:ct(["react-flow__edge","react-flow__edge-"+t,e,{selected:r,animated:a,inactive:!p&&!i,updating:X}]),onClick:e=>{var{edges:t,addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:a}=R.getState(),t=t.find(e=>e.id===l);t&&(p&&(R.setState({nodesSelectionActive:!1}),t.selected&&a?(r({nodes:[],edges:[t]}),O.current?.blur()):n([l])),i)&&i(e,t)},onDoubleClick:g,onContextMenu:n,onMouseEnter:b,onMouseMove:w,onMouseLeave:E,onKeyDown:N?e=>{var t,n,r;!q&&xa.includes(e.key)&&p&&({unselectNodesAndEdges:t,addSelectedEdges:n,edges:r}=R.getState(),"Escape"===e.key?(O.current?.blur(),t({edges:[r.find(e=>e.id===l)]})):n([l]))}:void 0,tabIndex:N?0:void 0,role:N?"button":"img","data-testid":"rf__edge-"+l,"aria-label":null===C?void 0:C||`Edge from ${u} to `+c,"aria-describedby":N?Bi+"-"+I:void 0,ref:O},!G&&ut.default.createElement(ee,{id:l,source:u,target:c,selected:r,animated:a,label:F,labelStyle:V,labelShowBg:j,labelBgStyle:z,labelBgPadding:B,labelBgBorderRadius:U,data:L,style:$,sourceX:o,sourceY:s,targetX:d,targetY:m,sourcePosition:f,targetPosition:h,sourceHandleId:y,targetHandleId:v,markerStart:J,markerEnd:Q,pathOptions:K,interactionWidth:Y}),T&&ut.default.createElement(ut.default.Fragment,null,("source"===T||!0===T)&&ut.default.createElement(Ho,{position:f,centerX:o,centerY:s,radius:x,onMouseDown:e=>D(e,!0),onMouseEnter:S,onMouseOut:P,type:"source"}),("target"===T||!0===T)&&ut.default.createElement(Ho,{position:h,centerX:d,centerY:m,radius:x,onMouseDown:e=>D(e,!1),onMouseEnter:S,onMouseOut:P,type:"target"})))};return e.displayName="EdgeWrapper",(0,ut.memo)(e)};function Ko(n){var e={default:Wo(n.default||Ga),straight:Wo(n.bezier||Ka),step:Wo(n.step||Wa),smoothstep:Wo(n.step||Za),simplebezier:Wo(n.simplebezier||za)},t=Object.keys(n).filter(e=>!["default","bezier"].includes(e)).reduce((e,t)=>(e[t]=Wo(n[t]||Ga),e),{});return{...e,...t}}function Yo(e,t,n=null){var r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,i=n?.width||t.width,o=n?.height||t.height;switch(e){case A.Top:return{x:r+i/2,y:a};case A.Right:return{x:r+i,y:a+o/2};case A.Bottom:return{x:r+i/2,y:a+o};case A.Left:return{x:r,y:a+o/2}}}function qo(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function Xo(e){var t=e?.[Sa]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var Go=[{level:0,isMaxLevel:!0,edges:[]}];function Jo(e,c,t){var n=na((0,ut.useCallback)(u=>e?u.edges.filter(e=>{var t,n,r,a,i,o,s,l=c.get(e.source),e=c.get(e.target);return l?.width&&l?.height&&e?.width&&e?.height&&({sourcePos:l,targetPos:e,sourceWidth:t,sourceHeight:n,targetWidth:r,targetHeight:a,width:i,height:o,transform:s}=[{sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:e.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:e.width,targetHeight:e.height,width:u.width,height:u.height,transform:u.transform}][0],(t={x:Math.min(l.x,e.x),y:Math.min(l.y,e.y),x2:Math.max(l.x+t,e.x+r),y2:Math.max(l.y+n,e.y+a)}).x===t.x2&&(t.x2+=1),t.y===t.y2&&(t.y2+=1),r=pa({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:i/s[2],height:o/s[2]}),l=Math.max(0,Math.min(r.x2,t.x2)-Math.max(r.x,t.x)),n=Math.max(0,Math.min(r.y2,t.y2)-Math.max(r.y,t.y)),0<Math.ceil(l*n))}):u.edges,[e,c]));{var[n,l,u=!1]=[n,c,t];let s=-1;return n=n.reduce((e,t)=>{var n,r,a,i=Ea(t.zIndex);let o=i?t.zIndex:0;return u&&(n=l.get(t.target),a=l.get(t.source),r=t.selected||n?.selected||a?.selected,a=Math.max(a?.[Sa]?.z||0,n?.[Sa]?.z||0,1e3),o=(i?t.zIndex:0)+(r?a:0)),e[o]?e[o].push(t):e[o]=[t],s=o>s?o:s,e},{}),0===(n=Object.entries(n).map(([e,t])=>{e=+e;return{edges:t,level:e,isMaxLevel:e===s}})).length?Go:n}}var Qo={[Us.Arrow]:({color:e="none",strokeWidth:t=1})=>ut.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Us.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>ut.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};var es=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:s="auto-start-reverse"})=>{t=function(e){const t=ra();return(0,ut.useMemo)(()=>{return Object.prototype.hasOwnProperty.call(Qo,e)?Qo[e]:(t.getState().onError?.("009",ea.error009(e)),null)},[e])}(t);return t?ut.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:""+r,markerHeight:""+a,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0"},ut.default.createElement(t,{color:n,strokeWidth:o})):null},a=({defaultColor:e,rfId:t})=>{var a,i,e=na((0,ut.useCallback)(({defaultColor:a,rfId:i}=[{defaultColor:e,rfId:t}][0],e=>{const r=[];return e.edges.reduce((n,e)=>([e.markerStart,e.markerEnd].forEach(e=>{var t;e&&"object"==typeof e&&(t=ii(e,i),r.includes(t)||(n.push({id:t,color:e.color||a,...e}),r.push(t)))}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))}),[e,t]),(e,n)=>!(e.length!==n.length||e.some((e,t)=>e.id!==n[t].id)));return ut.default.createElement("defs",null,e.map(e=>ut.default.createElement(es,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))},ts=(a.displayName="MarkerDefinitions",(0,ut.memo)(a)),ns=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),r=({defaultMarkerColor:r,onlyRenderVisibleElements:e,elevateEdgesOnSelect:t,rfId:m,edgeTypes:f,noPanClassName:h,onEdgeContextMenu:p,onEdgeMouseEnter:g,onEdgeMouseMove:y,onEdgeMouseLeave:v,onEdgeClick:b,onEdgeDoubleClick:w,onReconnect:E,onReconnectStart:S,onReconnectEnd:x,reconnectRadius:k,children:n,disableKeyboardA11y:_})=>{const{edgesFocusable:I,edgesUpdatable:C,elementsSelectable:N,width:a,height:i,connectionMode:T,nodeInternals:O,onError:M}=na(ns,He);e=Jo(e,O,t);return a?ut.default.createElement(ut.default.Fragment,null,e.map(({level:e,edges:t,isMaxLevel:n})=>ut.default.createElement("svg",{key:e,style:{zIndex:e},width:a,height:i,className:"react-flow__edges react-flow__container"},n&&ut.default.createElement(ts,{defaultColor:r,rfId:m}),ut.default.createElement("g",null,t.map(e=>{var[t,n,r]=Xo(O.get(e.source)),[a,i,o]=Xo(O.get(e.target));if(!r||!o)return null;let s=e.type||"default";f[s]||(M?.("011",ea.error011(s)),s="default");var l,r=f[s]||f.default,o=T===Ca.Strict?i.target:(i.target??[]).concat(i.source??[]),i=qo(n.source,e.sourceHandle),n=qo(o,e.targetHandle),o=i?.position||A.Bottom,u=n?.position||A.Top,c=!!(e.focusable||I&&void 0===e.focusable),d=e.reconnectable||e.updatable,d=void 0!==E&&(d||C&&void 0===d);return i&&n?({sourceX:t,sourceY:a,targetX:n,targetY:l}=((e,t,n,r,a,i)=>{n=Yo(n,e,t),e=Yo(i,r,a);return{sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y}})(t,i,o,a,n,u),ut.default.createElement(r,{key:e.id,id:e.id,className:ct([e.className,h]),type:s,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:t,sourceY:a,targetX:n,targetY:l,sourcePosition:o,targetPosition:u,elementsSelectable:N,onContextMenu:p,onMouseEnter:g,onMouseMove:y,onMouseLeave:v,onClick:b,onEdgeDoubleClick:w,onReconnect:E,onReconnectStart:S,onReconnectEnd:x,reconnectRadius:k,rfId:m,ariaLabel:e.ariaLabel,isFocusable:c,isReconnectable:d,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:_})):(M?.("008",ea.error008(i,e)),null)})))),n):null},rs=(r.displayName="EdgeRenderer",(0,ut.memo)(r)),as=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function is({children:e}){var t=na(as);return ut.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}var os={[A.Left]:A.Right,[A.Right]:A.Left,[A.Top]:A.Bottom,[A.Bottom]:A.Top},ss=({nodeId:t,handleType:e,style:n,type:r=Oa.Bezier,CustomComponent:a,connectionStatus:i})=>{const{fromNode:o,handleId:s,toX:l,toY:u,connectionMode:c}=na((0,ut.useCallback)(e=>({fromNode:e.nodeInternals.get(t),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[t]),He);var d=o?.[Sa]?.handleBounds;let m=d?.[e];if(c===Ca.Loose&&(m=m||d?.["source"===e?"target":"source"]),!o||!m)return null;var d=s?m.find(e=>e.id===s):m[0],e=d?d.x+d.width/2:(o.width??0)/2,f=d?d.y+d.height/2:o.height??0,e=(o.positionAbsolute?.x??0)+e,f=(o.positionAbsolute?.y??0)+f,h=d?.position,p=h?os[h]:null;if(!h||!p)return null;if(a)return ut.default.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:d,fromX:e,fromY:f,toX:l,toY:u,fromPosition:h,toPosition:p,connectionStatus:i});let g="";a={sourceX:e,sourceY:f,sourcePosition:h,targetX:l,targetY:u,targetPosition:p};return r===Oa.Bezier?[g]=Xa(a):r===Oa.Step?[g]=Ha({...a,borderRadius:0}):r===Oa.SmoothStep?[g]=Ha(a):r===Oa.SimpleBezier?[g]=ja(a):g=`M${e},${f} ${l},`+u,ut.default.createElement("path",{d:g,fill:"none",className:"react-flow__connection-path",style:n})},ls=(ss.displayName="ConnectionLine",e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}));function us({containerStyle:e,style:t,type:n,component:r}){var{nodeId:a,handleType:i,nodesConnectable:o,width:s,height:l,connectionStatus:u}=na(ls,He);return a&&i&&s&&o?ut.default.createElement("svg",{style:e,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},ut.default.createElement("g",{className:ct(["react-flow__connection",u])},ut.default.createElement(ss,{nodeId:a,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:u}))):null}function cs(t,n){const r=(0,ut.useRef)(null),a=ra();return(0,ut.useMemo)(()=>{var e=Object.keys(t);return He(r.current,e)&&a.getState().onError?.("002",ea.error002()),r.current=e,n(t)},[t])}var t=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:i,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:f,onSelectionContextMenu:h,onSelectionStart:p,onSelectionEnd:g,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:b,connectionLineContainerStyle:w,selectionKeyCode:E,selectionOnDrag:S,selectionMode:x,multiSelectionKeyCode:k,panActivationKeyCode:_,zoomActivationKeyCode:I,deleteKeyCode:C,onlyRenderVisibleElements:N,elementsSelectable:L,selectNodesOnDrag:F,defaultViewport:V,translateExtent:j,minZoom:z,maxZoom:B,preventScrolling:U,defaultMarkerColor:$,zoomOnScroll:H,zoomOnPinch:Z,panOnScroll:W,panOnScrollSpeed:K,panOnScrollMode:Y,zoomOnDoubleClick:q,panOnDrag:X,onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:ee,onPaneScroll:te,onPaneContextMenu:ne,onEdgeContextMenu:re,onEdgeMouseEnter:ae,onEdgeMouseMove:ie,onEdgeMouseLeave:oe,onReconnect:se,onReconnectStart:le,onReconnectEnd:ue,reconnectRadius:ce,noDragClassName:T,noWheelClassName:de,noPanClassName:O,elevateEdgesOnSelect:me,disableKeyboardA11y:M,nodeOrigin:fe,nodeExtent:he,rfId:A})=>{e=cs(e,zo),t=cs(t,Ko);{var R=i;const D=no(),P=(0,ut.useRef)(!1);(0,ut.useEffect)(()=>{!P.current&&D.viewportInitialized&&R&&(setTimeout(()=>R(D),1),P.current=!0)},[R,D.viewportInitialized])}return ut.default.createElement(jo,{onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:ee,onPaneContextMenu:ne,onPaneScroll:te,deleteKeyCode:C,selectionKeyCode:E,selectionOnDrag:S,selectionMode:x,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:k,panActivationKeyCode:_,zoomActivationKeyCode:I,elementsSelectable:L,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:H,zoomOnPinch:Z,zoomOnDoubleClick:q,panOnScroll:W,panOnScrollSpeed:K,panOnScrollMode:Y,panOnDrag:X,defaultViewport:V,translateExtent:j,minZoom:z,maxZoom:B,onSelectionContextMenu:h,preventScrolling:U,noDragClassName:T,noWheelClassName:de,noPanClassName:O,disableKeyboardA11y:M},ut.default.createElement(is,null,ut.default.createElement(rs,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:u,onlyRenderVisibleElements:N,onEdgeContextMenu:re,onEdgeMouseEnter:ae,onEdgeMouseMove:ie,onEdgeMouseLeave:oe,onReconnect:se,onReconnectStart:le,onReconnectEnd:ue,reconnectRadius:ce,defaultMarkerColor:$,noPanClassName:O,elevateEdgesOnSelect:!!me,disableKeyboardA11y:M,rfId:A},ut.default.createElement(us,{style:v,type:y,component:b,containerStyle:w})),ut.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),ut.default.createElement(Uo,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:f,selectNodesOnDrag:F,onlyRenderVisibleElements:N,noPanClassName:O,noDragClassName:T,disableKeyboardA11y:M,nodeOrigin:fe,nodeExtent:he,rfId:A})))},ds=(t.displayName="GraphView",(0,ut.memo)(t)),ms=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ms,nodeExtent:ms,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ca.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ka,isValidConnection:void 0},hs=({children:e})=>{var t=(0,ut.useRef)(null);return t.current||(t.current=$e((c,d)=>({...fs,setNodes:e=>{var{nodeInternals:t,nodeOrigin:n,elevateNodesOnSelect:r}=d();c({nodeInternals:Xi(e,t,n,r)})},getNodes:()=>Array.from(d().nodeInternals.values()),setEdges:e=>{const{defaultEdgeOptions:t={}}=d();c({edges:e.map(e=>({...t,...e}))})},setDefaultNodesAndEdges:(e,t)=>{var n=void 0!==e,r=void 0!==t,e=n?Xi(e,new Map,d().nodeOrigin,d().elevateNodesOnSelect):new Map;c({nodeInternals:e,edges:r?t:[],hasDefaultNodes:n,hasDefaultEdges:r})},updateNodeDimensions:e=>{const{onNodesChange:t,nodeInternals:a,fitViewOnInit:n,fitViewOnInitDone:r,fitViewOnInitOptions:i,domNode:o,nodeOrigin:s}=d();var l=o?.querySelector(".react-flow__viewport");if(l){l=window.getComputedStyle(l);const u=new window.DOMMatrixReadOnly(l.transform)["m22"];l=e.reduce((e,t)=>{var n,r=a.get(t.id);return r?.hidden?a.set(r.id,{...r,[Sa]:{...r[Sa],handleBounds:void 0}}):r&&(n=la(t.nodeElement)).width&&n.height&&(r.width!==n.width||r.height!==n.height||t.forceUpdate)&&(a.set(r.id,{...r,[Sa]:{...r[Sa],handleBounds:{source:No(".source",t.nodeElement,u,s),target:No(".target",t.nodeElement,u,s)}},...n}),e.push({id:r.id,type:"dimensions",dimensions:n})),e},[]),e=(qi(a,s),r||n&&!r&&Gi(d,{initial:!0,...i}));c({nodeInternals:new Map(a),fitViewOnInitDone:e}),0<l?.length&&t?.(l)}},updateNodePositions:(e,n=!0,r=!1)=>{var t=d()["triggerNodeChanges"];t(e.map(e=>{var t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:e=>{var{onNodesChange:t,nodeInternals:n,hasDefaultNodes:r,nodeOrigin:a,getNodes:i,elevateNodesOnSelect:o}=d();e?.length&&(r&&(r=Xi(yo(e,i()),n,a,o),c({nodeInternals:r})),t?.(e))},addSelectedNodes:e=>{var{multiSelectionActive:t,edges:n,getNodes:r}=d();let a,i=null;t?a=e.map(e=>bo(e,!0)):(a=wo(r(),e),i=wo(n,[])),Ji({changedNodes:a,changedEdges:i,get:d,set:c})},addSelectedEdges:e=>{var{multiSelectionActive:t,edges:n,getNodes:r}=d();let a,i=null;t?a=e.map(e=>bo(e,!0)):(a=wo(n,e),i=wo(r(),[])),Ji({changedNodes:i,changedEdges:a,get:d,set:c})},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{var{edges:n,getNodes:r}=d(),t=t||n;Ji({changedNodes:(e||r()).map(e=>(e.selected=!1,bo(e.id,!1))),changedEdges:t.map(e=>bo(e.id,!1)),get:d,set:c})},setMinZoom:e=>{var{d3Zoom:t,maxZoom:n}=d();t?.scaleExtent([e,n]),c({minZoom:e})},setMaxZoom:e=>{var{d3Zoom:t,minZoom:n}=d();t?.scaleExtent([n,e]),c({maxZoom:e})},setTranslateExtent:e=>{d().d3Zoom?.translateExtent(e),c({translateExtent:e})},resetSelectedElements:()=>{var{edges:e,getNodes:t}=d();Ji({changedNodes:t().filter(e=>e.selected).map(e=>bo(e.id,!1)),changedEdges:e.filter(e=>e.selected).map(e=>bo(e.id,!1)),get:d,set:c})},setNodeExtent:t=>{var e=d()["nodeInternals"];e.forEach(e=>{e.positionAbsolute=ca(e.position,t)}),c({nodeExtent:t,nodeInternals:new Map(e)})},panBy:e=>{var{transform:t,width:n,height:r,d3Zoom:a,d3Selection:i,translateExtent:o}=d();return!(!a||!i||!e.x&&!e.y)&&(e=Ur.translate(t[0]+e.x,t[1]+e.y).scale(t[2]),n=[[0,0],[n,r]],r=a?.constrain()(e,n,o),a.transform(i,r),t[0]!==r.x||t[1]!==r.y||t[2]!==r.k)},cancelConnection:()=>c({connectionNodeId:fs.connectionNodeId,connectionHandleId:fs.connectionHandleId,connectionHandleType:fs.connectionHandleType,connectionStatus:fs.connectionStatus,connectionStartHandle:fs.connectionStartHandle,connectionEndHandle:fs.connectionEndHandle}),reset:()=>c({...fs})}),Object.is)),ut.default.createElement(Qr,{value:t.current},e)},ps=(hs.displayName="ReactFlowProvider",({children:e})=>{return(0,ut.useContext)(Jr)?ut.default.createElement(ut.default.Fragment,null,e):ut.default.createElement(hs,null,e)}),gs=(ps.displayName="ReactFlowWrapper",{input:Ii,default:_i,output:Ci,group:Ni}),ys={default:Ga,straight:Ka,step:Wa,smoothstep:Za,simplebezier:za},vs=[0,0],bs=[15,15],ws={x:0,y:0,zoom:1},Es={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ss=(0,ut.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:i=gs,edgeTypes:o=ys,onNodeClick:s,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:m,onConnect:f,onConnectStart:h,onConnectEnd:p,onClickConnectStart:g,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:S,onNodeDragStart:x,onNodeDrag:k,onNodeDragStop:_,onNodesDelete:I,onEdgesDelete:L,onSelectionChange:F,onSelectionDragStart:V,onSelectionDrag:j,onSelectionDragStop:z,onSelectionContextMenu:B,onSelectionStart:U,onSelectionEnd:$,connectionMode:H=Ca.Strict,connectionLineType:Z=Oa.Bezier,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:Y,deleteKeyCode:q="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:G=!1,selectionMode:J=Ta.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:ee=Ra()?"Meta":"Control",zoomActivationKeyCode:te=Ra()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:re=bs,onlyRenderVisibleElements:ae=!1,selectNodesOnDrag:ie=!0,nodesDraggable:oe,nodesConnectable:se,nodesFocusable:le,nodeOrigin:C=vs,edgesFocusable:ue,edgesUpdatable:ce,elementsSelectable:de,defaultViewport:me=ws,minZoom:N=.5,maxZoom:T=2,translateExtent:O=ms,preventScrolling:fe=!0,nodeExtent:M,defaultMarkerColor:he="#b1b1b7",zoomOnScroll:pe=!0,zoomOnPinch:ge=!0,panOnScroll:ye=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:be=Na.Free,zoomOnDoubleClick:we=!0,panOnDrag:Ee=!0,onPaneClick:Se,onPaneMouseEnter:xe,onPaneMouseMove:ke,onPaneMouseLeave:_e,onPaneScroll:Ie,onPaneContextMenu:Ce,children:Ne,onEdgeContextMenu:Te,onEdgeDoubleClick:Oe,onEdgeMouseEnter:Me,onEdgeMouseMove:Ae,onEdgeMouseLeave:Re,onEdgeUpdate:De,onEdgeUpdateStart:Pe,onEdgeUpdateEnd:Le,onReconnect:Fe,onReconnectStart:Ve,onReconnectEnd:je,reconnectRadius:ze=10,edgeUpdaterRadius:Be=10,onNodesChange:Ue,onEdgesChange:$e,noDragClassName:He="nodrag",noWheelClassName:Ze="nowheel",noPanClassName:A="nopan",fitView:We=!1,fitViewOptions:Ke,connectOnClick:Ye=!0,attributionPosition:qe,proOptions:Xe,defaultEdgeOptions:Ge,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Qe=!1,disableKeyboardA11y:R=!1,autoPanOnConnect:et=!0,autoPanOnNodeDrag:tt=!0,connectionRadius:nt=20,isValidConnection:rt,onError:at,style:it,id:D,nodeDragThreshold:ot,...st},lt)=>{var P=D||"1";return ut.default.createElement("div",{...st,style:{...it,...Es},ref:lt,className:ct(["react-flow",a]),"data-testid":"rf__wrapper",id:D},ut.default.createElement(ps,null,ut.default.createElement(ds,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:m,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:S,nodeTypes:i,edgeTypes:o,connectionLineType:Z,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:Y,selectionKeyCode:X,selectionOnDrag:G,selectionMode:J,deleteKeyCode:q,multiSelectionKeyCode:ee,panActivationKeyCode:Q,zoomActivationKeyCode:te,onlyRenderVisibleElements:ae,selectNodesOnDrag:ie,defaultViewport:me,translateExtent:O,minZoom:N,maxZoom:T,preventScrolling:fe,zoomOnScroll:pe,zoomOnPinch:ge,zoomOnDoubleClick:we,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:be,panOnDrag:Ee,onPaneClick:Se,onPaneMouseEnter:xe,onPaneMouseMove:ke,onPaneMouseLeave:_e,onPaneScroll:Ie,onPaneContextMenu:Ce,onSelectionContextMenu:B,onSelectionStart:U,onSelectionEnd:$,onEdgeContextMenu:Te,onEdgeDoubleClick:Oe,onEdgeMouseEnter:Me,onEdgeMouseMove:Ae,onEdgeMouseLeave:Re,onReconnect:Fe??De,onReconnectStart:Ve??Pe,onReconnectEnd:je??Le,reconnectRadius:ze??Be,defaultMarkerColor:he,noDragClassName:He,noWheelClassName:Ze,noPanClassName:A,elevateEdgesOnSelect:Qe,rfId:P,disableKeyboardA11y:R,nodeOrigin:C,nodeExtent:M}),ut.default.createElement(Fi,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:h,onConnectEnd:p,onClickConnectStart:g,onClickConnectEnd:y,nodesDraggable:oe,nodesConnectable:se,nodesFocusable:le,edgesFocusable:ue,edgesUpdatable:ce,elementsSelectable:de,elevateNodesOnSelect:Je,minZoom:N,maxZoom:T,nodeExtent:M,onNodesChange:Ue,onEdgesChange:$e,snapToGrid:ne,snapGrid:re,connectionMode:H,translateExtent:O,connectOnClick:Ye,defaultEdgeOptions:Ge,fitView:We,fitViewOptions:Ke,onNodesDelete:I,onEdgesDelete:L,onNodeDragStart:x,onNodeDrag:k,onNodeDragStop:_,onSelectionDrag:j,onSelectionDragStart:V,onSelectionDragStop:z,noPanClassName:A,nodeOrigin:C,rfId:P,autoPanOnConnect:et,autoPanOnNodeDrag:tt,onError:at,connectionRadius:nt,isValidConnection:rt,nodeDragThreshold:ot}),ut.default.createElement(Di,{onSelectionChange:F}),Ne,ut.default.createElement(oa,{proOptions:Xe,position:qe}),ut.default.createElement(Zi,{rfId:P,disableKeyboardA11y:R})))});function xs(r){return e=>{const[t,n]=(0,ut.useState)(e);e=(0,ut.useCallback)(t=>n(e=>r(t,e)),[]);return[t,n,e]}}Ss.displayName="ReactFlow";xs(yo),xs(vo);var ks=e(b(),1),rn=({id:t,x:e,y:n,width:r,height:a,style:i,color:o,strokeColor:s,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,onClick:m,selected:f})=>{var{background:i,backgroundColor:h}=i||{},o=o||i||h;return ks.default.createElement("rect",{className:ct(["react-flow__minimap-node",{selected:f},u]),x:e,y:n,rx:c,ry:c,width:r,height:a,fill:o,stroke:s,strokeWidth:l,shapeRendering:d,onClick:m?e=>m(e,t):void 0})},_s=(rn.displayName="MiniMapNode",(0,ks.memo)(rn)),Is=e=>e.nodeOrigin,Cs=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),Ns=e=>e instanceof Function?e:()=>e;var Ts=(0,ks.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:i=_s,onClick:o}){var s=na(Cs,He);const l=na(Is),u=Ns(t),c=Ns(e),d=Ns(n),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return ks.default.createElement(ks.default.Fragment,null,s.map(e=>{var{x:t,y:n}=ci(e,l).positionAbsolute;return ks.default.createElement(i,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:d(e),color:u(e),borderRadius:r,strokeColor:c(e),strokeWidth:a,shapeRendering:m,onClick:o,id:e.id})}))}),Os=e=>{var t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:0<t.length?va(di(t,e.nodeOrigin),n):n,rfId:e.rfId}};function Ms({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:s,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:m,onNodeClick:f,pannable:h=!1,zoomable:p=!1,ariaLabel:g="React Flow mini map",inversePan:y=!1,zoomStep:v=10,offsetScale:b=5}){const w=ra(),E=(0,ks.useRef)(null);var{boundingRect:S,viewBB:x,rfId:k}=na(Os,He),_=e?.width??200,I=e?.height??150,C=S.width/_,N=S.height/I,C=Math.max(C,N),N=C*_,T=C*I,b=b*C,O=S.x-(N-S.width)/2-b,S=S.y-(T-S.height)/2-b,N=N+2*b,T=T+2*b,k="react-flow__minimap-desc-"+k;const M=(0,ks.useRef)(0);M.current=C,(0,ks.useEffect)(()=>{if(E.current){const t=zt(E.current);var e=Gr().on("zoom",h?e=>{var t,{transform:n,d3Selection:r,d3Zoom:a,translateExtent:i,width:o,height:s}=w.getState();"mousemove"===e.sourceEvent.type&&r&&a&&(t=M.current*Math.max(1,n[2])*(y?-1:1),e={x:n[0]-e.sourceEvent.movementX*t,y:n[1]-e.sourceEvent.movementY*t},t=[[0,0],[o,s]],o=Ur.translate(e.x,e.y).scale(n[2]),s=a.constrain()(o,t,i),a.transform(r,s))}:null).on("zoom.wheel",p?e=>{var{transform:t,d3Selection:n,d3Zoom:r}=w.getState();"wheel"===e.sourceEvent.type&&n&&r&&(e=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*v,t=t[2]*Math.pow(2,e),r.scaleTo(n,t))}:null);return t.call(e),()=>{t.on("zoom",null)}}},[h,p,y,v]);var C=m?e=>{var t=Bt(e);m(e,{x:t[0],y:t[1]})}:void 0,A=f?(e,t)=>{t=w.getState().nodeInternals.get(t);f(e,t)}:void 0;return ks.default.createElement(ia,{position:d,style:e,className:ct(["react-flow__minimap",t]),"data-testid":"rf__minimap"},ks.default.createElement("svg",{width:_,height:I,viewBox:O+` ${S} ${N} `+T,role:"img","aria-labelledby":k,ref:E,onClick:C},g&&ks.default.createElement("title",{id:k},g),ks.default.createElement(Ts,{onClick:A,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:a,nodeStrokeWidth:o,nodeComponent:s}),ks.default.createElement("path",{className:"react-flow__minimap-mask",d:`M${O-b},${S-b}h${N+2*b}v${T+2*b}h${-N-2*b}z
        M${x.x},${x.y}h${x.width}v${x.height}h${-x.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:c,pointerEvents:"none"})))}Ms.displayName="MiniMap";var As=(0,ks.memo)(Ms),Rs=e(b(),1);function Ds(){return Rs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Rs.default.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ps(){return Rs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Rs.default.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Ls(){return Rs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Rs.default.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Fs(){return Rs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Rs.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Vs(){return Rs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Rs.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var js,zs=({children:e,className:t,...n})=>Rs.default.createElement("button",{type:"button",className:ct(["react-flow__controls-button",t]),...n},e),Bs=(zs.displayName="ControlButton",e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom})),Us=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:i,onZoomOut:o,onFitView:s,onInteractiveChange:l,className:u,children:c,position:d="bottom-left"})=>{const m=ra(),[f,h]=(0,Rs.useState)(!1),{isInteractive:p,minZoomReached:g,maxZoomReached:y}=na(Bs,He),{zoomIn:v,zoomOut:b,fitView:w}=no();return(0,Rs.useEffect)(()=>{h(!0)},[]),f?Rs.default.createElement(ia,{className:ct(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&Rs.default.createElement(Rs.default.Fragment,null,Rs.default.createElement(zs,{onClick:()=>{v(),i?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},Rs.default.createElement(Ds,null)),Rs.default.createElement(zs,{onClick:()=>{b(),o?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},Rs.default.createElement(Ps,null))),n&&Rs.default.createElement(zs,{className:"react-flow__controls-fitview",onClick:()=>{w(a),s?.()},title:"fit view","aria-label":"fit view"},Rs.default.createElement(Ls,null)),r&&Rs.default.createElement(zs,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),l?.(!p)},title:"toggle interactivity","aria-label":"toggle interactivity"},p?Rs.default.createElement(Vs,null):Rs.default.createElement(Fs,null)),c):null},$s=(Us.displayName="Controls",(0,Rs.memo)(Us)),Hs=e(b(),1);function Zs({color:e,dimensions:t,lineWidth:n}){return Hs.default.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H`+t[0]})}function Ws({color:e,radius:t}){return Hs.default.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(a=js=js||{}).Lines="lines",a.Dots="dots",a.Cross="cross";var Ks={[js.Dots]:"#91919a",[js.Lines]:"#eee",[js.Cross]:"#e2e2e2"},Ys={[js.Dots]:1,[js.Lines]:1,[js.Cross]:6},qs=e=>({transform:e.transform,patternId:"pattern-"+e.rfId});function Xs({id:e,variant:t=js.Dots,gap:n=20,size:r,lineWidth:a=1,offset:i=2,color:o,style:s,className:l}){var u=(0,Hs.useRef)(null),{transform:c,patternId:d}=na(qs,He),o=o||Ks[t],r=r||Ys[t],m=t===js.Dots,t=t===js.Cross,n=Array.isArray(n)?n:[n,n],n=[n[0]*c[2]||1,n[1]*c[2]||1],r=r*c[2],t=t?[r,r]:n,f=m?[r/i,r/i]:[t[0]/i,t[1]/i];return Hs.default.createElement("svg",{className:ct(["react-flow__background",l]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},Hs.default.createElement("pattern",{id:d+e,x:c[0]%n[0],y:c[1]%n[1],width:n[0],height:n[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${f[0]},-${f[1]})`},m?Hs.default.createElement(Ws,{color:o,radius:r/i}):Hs.default.createElement(Zs,{dimensions:t,color:o,lineWidth:a})),Hs.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Xs.displayName="Background";var Gs=(0,Hs.memo)(Xs);e(b(),1),e(X(),1);var Js=e(b(),1).default["useRef"];function Qs(t){const n=Js();return e=>{e=t(e);return function(e,t){if(Object.is(e,t))return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return;for(var[n,r]of e)if(!Object.is(r,t.get(n)))return;return 1}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return;for(const i of e)if(!t.has(i))return;return 1}var a=Object.keys(e);if(a.length===Object.keys(t).length){for(const o of a)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return;return 1}}}(n.current,e)?n.current:n.current=e}}var el=e(b(),1),tl=e=>"checkbox"===e.type,nl=e=>e instanceof Date,rl=e=>null==e,al=e=>"object"==typeof e,il=e=>!rl(e)&&!Array.isArray(e)&&al(e)&&!nl(e),ol=e=>il(e)&&e.target?tl(e.target)?e.target.checked:e.target.value:e,sl=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ll=(e,t)=>e.has(sl(t)),ul="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function cl(e){let t;var n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(ul&&(e instanceof Blob||e instanceof FileList)||!n&&!il(e))return e;if(t=n?[]:{},n||(e=>{e=e.constructor&&e.constructor.prototype;return il(e)&&e.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=cl(e[r]));else t=e}return t}var dl=e=>Array.isArray(e)?e.filter(Boolean):[],ml=e=>void 0===e,z=(e,t,n)=>{var r;return t&&il(e)?(r=dl(t.split(/[,[\].]+?/)).reduce((e,t)=>rl(e)?e:e[t],e),ml(r)||r===e?ml(e[t])?n:e[t]:r):n},fl=e=>"boolean"==typeof e,hl=e=>/^\w*$/.test(e),pl=e=>dl(e.replace(/["|']|\]/g,"").split(/\.|\[/)),gl=(t,e,n)=>{let r=-1;for(var a=hl(e)?[e]:pl(e),i=a.length,o=i-1;++r<i;){var s,l=a[r];let e=n;if(r!==o&&(s=t[l],e=il(s)||Array.isArray(s)?s:isNaN(+a[r+1])?{}:[]),"__proto__"===l)return;t[l]=e,t=t[l]}return t},yl="blur",vl="focusout",bl="change",wl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},El={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Sl=el.default.createContext(null),xl=()=>el.default.useContext(Sl),kl=(t,n,r,a=!0)=>{var e={defaultValues:n._defaultValues};for(const i in t)Object.defineProperty(e,i,{get:()=>{var e=i;return n._proxyFormState[e]!==wl.all&&(n._proxyFormState[e]=!a||wl.all),r&&(r[e]=!0),t[e]}});return e},_l=e=>il(e)&&!Object.keys(e).length,Il=(e,t,n,r)=>{n(e);const{name:a,...i}=e;return _l(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!r||wl.all))},Cl=e=>Array.isArray(e)?e:[e],Nl=(e,t,n)=>!e||!t||e===t||Cl(e).some(e=>e&&(n?e===t:e.startsWith(t)||t.startsWith(e)));function Tl(t){const n=el.default.useRef(t);n.current=t,el.default.useEffect(()=>{const e=!t.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{e&&e.unsubscribe()}},[t.disabled])}var Ol=e=>"string"==typeof e,Ml=(e,t,n,r,a)=>Ol(e)?(r&&t.watch.add(e),z(n,e,a)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),z(n,e))):(r&&(t.watchAll=!0),n);function Al(e){var t=xl();const{control:n=t.control,name:r,defaultValue:a,disabled:i,exact:o}=e||{},s=el.default.useRef(r),[l,u]=(s.current=r,Tl({disabled:i,subject:n._subjects.values,next:e=>{Nl(s.current,e.name,o)&&u(cl(Ml(s.current,n._names,e.values||n._formValues,!1,a)))}}),el.default.useState(n._getWatch(r,a)));return el.default.useEffect(()=>n._removeUnmounted()),l}function Rl(e){var t=xl();const{name:r,disabled:n,control:a=t.control,shouldUnregister:i}=e,o=ll(a._names.array,r);t=Al({control:a,name:r,defaultValue:z(a._formValues,r,z(a._defaultValues,r,e.defaultValue)),exact:!0});const s=function(e){var t=xl();const{control:n=t.control,disabled:r,name:a,exact:i}=e||{},[o,s]=el.default.useState(n._formState),l=el.default.useRef(!0),u=el.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=el.default.useRef(a);return c.current=a,Tl({disabled:r,next:e=>l.current&&Nl(c.current,e.name,i)&&Il(e,u.current,n._updateFormState)&&s({...n._formState,...e}),subject:n._subjects.state}),el.default.useEffect(()=>(l.current=!0,u.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),kl(o,n,u.current,!1)}({control:a,name:r}),l=el.default.useRef(a.register(r,{...e.rules,value:t,...fl(e.disabled)?{disabled:e.disabled}:{}}));return el.default.useEffect(()=>{const e=a._options.shouldUnregister||i,t=(e,t)=>{e=z(a._fields,e);e&&e._f&&(e._f.mount=t)};var n;return t(r,!0),e&&(n=cl(z(a._options.defaultValues,r)),gl(a._defaultValues,r,n),ml(z(a._formValues,r)))&&gl(a._formValues,r,n),()=>{(o?e&&!a._state.action:e)?a.unregister(r):t(r,!1)}},[r,a,o,i]),el.default.useEffect(()=>{z(a._fields,r)&&a._updateDisabledField({disabled:n,fields:a._fields,name:r,value:z(a._fields,r)._f.value})},[n,r,a]),{field:{name:r,value:t,...fl(n)||s.disabled?{disabled:s.disabled||n}:{},onChange:el.default.useCallback(e=>l.current.onChange({target:{value:ol(e),name:r},type:bl}),[r]),onBlur:el.default.useCallback(()=>l.current.onBlur({target:{value:z(a._formValues,r),name:r},type:yl}),[r,a]),ref:t=>{var e=z(a._fields,r);e&&t&&(e._f.ref={focus:()=>t.focus(),select:()=>t.select(),setCustomValidity:e=>t.setCustomValidity(e),reportValidity:()=>t.reportValidity()})}},formState:s,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!z(s.errors,r)},isDirty:{enumerable:!0,get:()=>!!z(s.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!z(s.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!z(s.validatingFields,r)},error:{enumerable:!0,get:()=>z(s.errors,r)}})}}var Dl=e=>e.render(Rl(e)),Pl=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},Ll=e=>({isOnSubmit:!e||e===wl.onSubmit,isOnBlur:e===wl.onBlur,isOnChange:e===wl.onChange,isOnAll:e===wl.all,isOnTouch:e===wl.onTouched}),Fl=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(e=>t.startsWith(e)&&/^\.\w+/.test(t.slice(e.length)))),Vl=(e,t,n,r)=>{for(const i of n||Object.keys(e)){var a=z(e,i);if(a){const{_f:o,...s}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)break;if(o.ref&&t(o.ref,o.name)&&!r)break;Vl(s,t)}else il(s)&&Vl(s,t)}}},jl=e=>"file"===e.type,zl=e=>"function"==typeof e,Bl=e=>{return!!ul&&e instanceof((e=e?e.ownerDocument:0)&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ul=e=>Ol(e),$l=e=>"radio"===e.type,Hl=e=>e instanceof RegExp,Zl={value:!1,isValid:!1},Wl={value:!0,isValid:!0},Kl=e=>{var t;return Array.isArray(e)?1<e.length?{value:t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value),isValid:!!t.length}:e[0].checked&&!e[0].disabled?!e[0].attributes||ml(e[0].attributes.value)||ml(e[0].value)||""===e[0].value?Wl:{value:e[0].value,isValid:!0}:Zl:Zl},Yl={isValid:!1,value:null},ql=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Yl):Yl;function Xl(e,t,n="validate"){if(Ul(e)||Array.isArray(e)&&e.every(Ul)||fl(e)&&!e)return{type:n,message:Ul(e)?e:"",ref:t}}var Gl=e=>il(e)&&!Hl(e)?e:{value:e,message:""},Jl=async(n,t,r,a,e)=>{const{ref:i,refs:o,required:s,maxLength:l,minLength:u,min:c,max:d,pattern:m,validate:f,name:h,valueAsNumber:p,mount:g,disabled:y}=n._f;var v=z(t,h);if(!g||y)return{};const b=o?o[0]:i;var w=e=>{a&&b.reportValidity&&(b.setCustomValidity(!fl(e)&&e||""),b.reportValidity())};const E={};var n=$l(i),S=tl(i),x=n||S,k=(p||jl(i))&&ml(i.value)&&ml(v)||Bl(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length;const _=Pl.bind(null,h,r,E);var I=(e,t,n,r=El.maxLength,a=El.minLength)=>{t=e?t:n;E[h]={type:e?r:a,message:t,ref:i,..._(e?r:a,t)}};if(e?!Array.isArray(v)||!v.length:s&&(!x&&(k||rl(v))||fl(v)&&!v||S&&!Kl(o).isValid||n&&!ql(o).isValid)){var{value:x,message:S}=Ul(s)?{value:!!s,message:s}:Gl(s);if(x&&(E[h]={type:El.required,message:S,ref:b,..._(El.required,S)},!r))return w(S),E}if(!(k||rl(c)&&rl(d))){let e,t;n=Gl(d),x=Gl(c);if(rl(v)||isNaN(v)?(S=i.valueAsDate||new Date(v),C=e=>new Date((new Date).toDateString()+" "+e),T="time"==i.type,N="week"==i.type,Ol(n.value)&&v&&(e=T?C(v)>C(n.value):N?v>n.value:S>new Date(n.value)),Ol(x.value)&&v&&(t=T?C(v)<C(x.value):N?v<x.value:S<new Date(x.value))):(T=i.valueAsNumber||v&&+v,rl(n.value)||(e=T>n.value),rl(x.value)||(t=T<x.value)),(e||t)&&(I(!!e,n.message,x.message,El.max,El.min),!r))return w(E[h].message),E}if((l||u)&&!k&&(Ol(v)||e&&Array.isArray(v))){var C=Gl(l),N=Gl(u),S=!rl(C.value)&&v.length>+C.value,T=!rl(N.value)&&v.length<+N.value;if((S||T)&&(I(S,C.message,N.message),!r))return w(E[h].message),E}if(m&&!k&&Ol(v)){var{value:n,message:x}=Gl(m);if(Hl(n)&&!v.match(n)&&(E[h]={type:El.pattern,message:x,ref:i,..._(El.pattern,x)},!r))return w(x),E}if(f)if(zl(f)){e=Xl(await f(v,t),b);if(e&&(E[h]={...e,..._(El.validate,e.message)},!r))return w(e.message),E}else if(il(f)){let e={};for(const M in f){if(!_l(e)&&!r)break;var O=Xl(await f[M](v,t),b,M);O&&(e={...O,..._(M,O.message)},w(O.message),r)&&(E[h]=e)}if(!_l(e)&&(E[h]={ref:b,...e},!r))return E}return w(!0),E};function Ql(e,t){var t=Array.isArray(t)?t:hl(t)?[t]:pl(t),n=1===t.length?e:function(e,t){var n=t.slice(0,-1).length;let r=0;for(;r<n;)e=ml(e)?r++:e[t[r++]];return e}(e,t),r=t.length-1,a=t[r];return n&&delete n[a],0!=r&&(il(n)&&_l(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!ml(e[t]))return;return 1}(n))&&Ql(e,t.slice(0,-1)),e}var eu=()=>{let n=[];return{get observers(){return n},next:e=>{for(const t of n)t.next&&t.next(e)},subscribe:t=>(n.push(t),{unsubscribe:()=>{n=n.filter(e=>e!==t)}}),unsubscribe:()=>{n=[]}}},tu=e=>rl(e)||!al(e);function nu(e,t){if(tu(e)||tu(t))return e===t;if(nl(e)&&nl(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){var a=e[o];if(!r.includes(o))return!1;if("ref"!==o){var i=t[o];if(nl(a)&&nl(i)||il(a)&&il(i)||Array.isArray(a)&&Array.isArray(i)?!nu(a,i):a!==i)return!1}}return!0}var ru=e=>"select-multiple"===e.type,au=e=>Bl(e)&&e.isConnected,iu=e=>{for(const t in e)if(zl(e[t]))return!0;return!1};function ou(e,t={}){var n=Array.isArray(e);if(il(e)||n)for(const r in e)Array.isArray(e[r])||il(e[r])&&!iu(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ou(e[r],t[r])):rl(e[r])||(t[r]=!0);return t}var su=(e,t)=>function e(t,n,r){var a=Array.isArray(t);if(il(t)||a)for(const i in t)Array.isArray(t[i])||il(t[i])&&!iu(t[i])?ml(n)||tu(r[i])?r[i]=Array.isArray(t[i])?ou(t[i],[]):{...ou(t[i])}:e(t[i],rl(n)?{}:n[i],r[i]):r[i]=!nu(t[i],n[i]);return r}(e,t,ou(t)),lu=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>ml(e)?e:t?""===e?NaN:e&&+e:n&&Ol(e)?new Date(e):r?r(e):e;function uu(e){var t=e.ref;if(e.refs?!e.refs.every(e=>e.disabled):!t.disabled)return jl(t)?t.files:$l(t)?ql(e.refs).value:ru(t)?[...t.selectedOptions].map(({value:e})=>e):tl(t)?Kl(e.refs).value:lu((ml(t.value)?e.ref:t).value,e)}var cu=e=>ml(e)?e:Hl(e)?e.source:il(e)?Hl(e.value)?e.value.source:e.value:e;function du(e,t,n){var r=z(e,n);if(r||hl(n))return{error:r,name:n};for(var a=n.split(".");a.length;){var i=a.join("."),o=z(t,i),s=z(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(s&&s.type)return{name:i,error:s};a.pop()}return{name:n}}var mu={mode:wl.onSubmit,reValidateMode:wl.onChange,shouldFocusError:!0};function fu(u={}){let p={...mu,...u},g={submitCount:0,isDirty:!1,isLoading:zl(p.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:p.errors||{},disabled:p.disabled||!1},y={},c=(il(p.defaultValues)||il(p.values))&&cl(p.defaultValues||p.values)||{},v=p.shouldUnregister?{}:cl(c),b={action:!1,mount:!1,watch:!1},w={mount:new Set,unMount:new Set,array:new Set,watch:new Set},E,s=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:eu(),array:eu(),state:eu()},L=Ll(p.mode),F=Ll(p.reValidateMode),k=p.criteriaMode===wl.all,_=async e=>{(S.isValid||e)&&(e=p.resolver?_l((await N()).errors):await T(y,!0))!==g.isValid&&x.state.next({isValid:e})},I=(e,t)=>{(S.isValidating||S.validatingFields)&&((e||Array.from(w.mount)).forEach(e=>{e&&(t?gl(g.validatingFields,e,t):Ql(g.validatingFields,e))}),x.state.next({validatingFields:g.validatingFields,isValidating:!_l(g.validatingFields)}))};const o=(e,t,n,r)=>{var a=z(y,e);a&&(n=z(v,e,ml(n)?z(c,e):n),ml(n)||r&&r.defaultChecked||t?gl(v,e,t?n:uu(a._f)):l(e,n),b.mount)&&_()},C=(e,t,n,r,a)=>{let i=!1,o=!1;var s={name:e},l=!!(z(y,e)&&z(y,e)._f&&z(y,e)._f.disabled);return n&&!r||(S.isDirty&&(o=g.isDirty,g.isDirty=s.isDirty=d(),i=o!==s.isDirty),r=l||nu(z(c,e),t),o=!(l||!z(g.dirtyFields,e)),r||l?Ql(g.dirtyFields,e):gl(g.dirtyFields,e,!0),s.dirtyFields=g.dirtyFields,i=i||S.dirtyFields&&o!==!r),n&&!(t=z(g.touchedFields,e))&&(gl(g.touchedFields,e,n),s.touchedFields=g.touchedFields,i=i||S.touchedFields&&t!==n),i&&a&&x.state.next(s),i?s:{}},V=(n,e,r,t)=>{var a,i=z(g.errors,n),o=S.isValid&&fl(e)&&g.isValid!==e;u.delayError&&r?(E=(a=()=>{return e=n,t=r,gl(g.errors,e,t),void x.state.next({errors:g.errors});var e,t},e=>{clearTimeout(s),s=setTimeout(a,e)}))(u.delayError):(clearTimeout(s),E=null,r?gl(g.errors,n,r):Ql(g.errors,n)),(r?nu(i,r):!i)&&_l(t)&&!o||(i={...t,...o&&fl(e)?{isValid:e}:{},errors:g.errors,name:n},g={...g,...i},x.state.next(i))},N=async e=>{I(e,!0);var t=await p.resolver(v,p.context,((e,t,n,r)=>{var a={};for(const o of e){var i=z(t,o);i&&gl(a,o,i._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}})(e||w.mount,y,p.criteriaMode,p.shouldUseNativeValidation));return I(e),t},T=async(e,t,n={valid:!0})=>{for(const l in e){var r=e[l];if(r){const{_f:u,...c}=r;if(u){var a=w.array.has(u.name),r=(I([l],!0),await Jl(r,v,k,p.shouldUseNativeValidation&&!t,a));if(I([l]),r[u.name]&&(n.valid=!1,t))break;t||(z(r,u.name)?a?(a=g.errors,i=r,o=u.name,s=void 0,s=Cl(z(a,o)),gl(s,"root",i[o]),gl(a,o,s)):gl(g.errors,u.name,r[u.name]):Ql(g.errors,u.name))}c&&await T(c,t,n)}}var i,o,s;return n.valid};const d=(e,t)=>(e&&t&&gl(v,e,t),!nu(n(),c)),r=(e,t,n)=>Ml(e,w,{...b.mount?v:ml(t)?c:Ol(e)?{[e]:t}:t},n,t);const l=(e,t,n={})=>{var r=z(y,e);let a=t;r&&(r=r._f)&&(r.disabled||gl(v,e,lu(t,r)),a=Bl(r.ref)&&rl(t)?"":t,ru(r.ref)?[...r.ref.options].forEach(e=>e.selected=a.includes(e.value)):r.refs?tl(r.ref)?1<r.refs.length?r.refs.forEach(t=>(!t.defaultChecked||!t.disabled)&&(t.checked=Array.isArray(a)?!!a.find(e=>e===t.value):a===t.value)):r.refs[0]&&(r.refs[0].checked=!!a):r.refs.forEach(e=>e.checked=e.value===a):jl(r.ref)?r.ref.value="":(r.ref.value=a,r.ref.type||x.values.next({name:e,values:{...v}}))),(n.shouldDirty||n.shouldTouch)&&C(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&O(e)},m=(e,t,n)=>{for(const o in t){var r=t[o],a=e+"."+o,i=z(y,a);(!w.array.has(e)&&tu(r)&&(!i||i._f)||nl(r)?l:m)(a,r,n)}},f=(e,t,n={})=>{var r=z(y,e),a=w.array.has(e),t=cl(t);gl(v,e,t),a?(x.array.next({name:e,values:{...v}}),(S.isDirty||S.dirtyFields)&&n.shouldDirty&&x.state.next({name:e,dirtyFields:su(c,v),isDirty:d(e,t)})):(!r||r._f||rl(t)?l:m)(e,t,n),Fl(e,w)&&x.state.next({...g}),x.values.next({name:b.mount?e:void 0,values:{...v}})},t=async n=>{b.mount=!0;const r=n.target;let a=r.name,i=!0;const o=z(y,a);var s=e=>{i=Number.isNaN(e)||e===z(v,a,e)};if(o){let e,t;var l,u=r.type?uu(o._f):ol(n),c=n.type===yl||n.type===vl,d=!((l=o._f).mount&&(l.required||l.min||l.max||l.maxLength||l.minLength||l.pattern||l.validate)||p.resolver||z(g.errors,a)||o._f.deps)||(l=c,d=z(g.touchedFields,a),m=g.isSubmitted,f=F,!(h=L).isOnAll&&(!m&&h.isOnTouch?!(d||l):(m?f:h).isOnBlur?!l:!(m?f:h).isOnChange||l)),m=Fl(a,w,c),f=(gl(v,a,u),c?(o._f.onBlur&&o._f.onBlur(n),E&&E(0)):o._f.onChange&&o._f.onChange(n),C(a,u,c,!1)),h=!_l(f)||m;if(c||x.values.next({name:a,type:n.type,values:{...v}}),d)return S.isValid&&_(),h&&x.state.next({name:a,...m?{}:f});!c&&m&&x.state.next({...g}),p.resolver?(l=(await N([a]))["errors"],s(u),i&&(n=du(g.errors,y,a),c=du(l,y,n.name||a),e=c.error,a=c.name,t=_l(l))):(I([a],!0),e=(await Jl(o,v,k,p.shouldUseNativeValidation))[a],I([a]),s(u),i&&(e?t=!1:S.isValid&&(t=await T(y,!0)))),i&&(o._f.deps&&O(o._f.deps),V(a,t,e,f))}},h=(e,t)=>{if(z(g.errors,t)&&e.focus)return e.focus(),1},O=async(e,t={})=>{let n,r;var a=Cl(e);if(p.resolver){const i=await(async e=>{var t=(await N(e))["errors"];if(e)for(const r of e){var n=z(t,r);n?gl(g.errors,r,n):Ql(g.errors,r)}else g.errors=t;return t})(ml(e)?e:a);n=_l(i),r=e?!a.some(e=>z(i,e)):n}else e?((r=(await Promise.all(a.map(async e=>{var t=z(y,e);return T(t&&t._f?{[e]:t}:t)}))).every(Boolean))||g.isValid)&&_():r=n=await T(y);return x.state.next({...!Ol(e)||S.isValid&&n!==g.isValid?{}:{name:e},...p.resolver||!e?{isValid:n}:{},errors:g.errors}),t.shouldFocus&&!r&&Vl(y,h,e?a:w.mount),r},n=e=>{const t={...b.mount?v:c};return ml(e)?t:Ol(e)?z(t,e):e.map(e=>z(t,e))};var e=(e,t)=>({invalid:!!z((t||g).errors,e),isDirty:!!z((t||g).dirtyFields,e),error:z((t||g).errors,e),isValidating:!!z(g.validatingFields,e),isTouched:!!z((t||g).touchedFields,e)}),a=(e,t,n)=>{var r=(z(y,e,{_f:{}})._f||{}).ref;const{ref:a,message:i,type:o,...s}=z(g.errors,e)||{};gl(g.errors,e,{...s,...t,ref:r}),x.state.next({name:e,errors:g.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()};const i=(e,t={})=>{for(const n of e?Cl(e):w.mount)w.mount.delete(n),w.array.delete(n),t.keepValue||(Ql(y,n),Ql(v,n)),t.keepError||Ql(g.errors,n),t.keepDirty||Ql(g.dirtyFields,n),t.keepTouched||Ql(g.touchedFields,n),t.keepIsValidating||Ql(g.validatingFields,n),p.shouldUnregister||t.keepDefaultValue||Ql(c,n);x.values.next({values:{...v}}),x.state.next({...g,...t.keepDirty?{isDirty:d()}:{}}),t.keepIsValid||_()},M=({disabled:e,name:t,field:n,fields:r,value:a})=>{(fl(e)&&b.mount||e)&&(e=e?void 0:ml(a)?uu((n||z(r,t))._f):a,gl(v,t,e),C(t,e,!1,!1,!0))},A=(r,a={})=>{let i=z(y,r);var e=fl(a.disabled);return gl(y,r,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:r}},name:r,mount:!0,...a}}),w.mount.add(r),i?M({field:i,disabled:a.disabled,name:r,value:a.value}):o(r,!0,a.value),{...e?{disabled:a.disabled}:{},...p.progressive?{required:!!a.required,min:cu(a.min),max:cu(a.max),minLength:cu(a.minLength),maxLength:cu(a.maxLength),pattern:cu(a.pattern)}:{},name:r,onChange:t,onBlur:t,ref:e=>{if(e){A(r,a),i=z(y,r);const n=ml(e.value)&&e.querySelectorAll&&e.querySelectorAll("input,select,textarea")[0]||e;e=n;var e=$l(e)||tl(e),t=i._f.refs||[];(e?t.find(e=>e===n):n===i._f.ref)||(gl(y,r,{_f:{...i._f,...e?{refs:[...t.filter(au),n,...Array.isArray(z(c,r))?[{}]:[]],ref:{type:n.type,name:r}}:{ref:n}}}),o(r,!1,void 0,n))}else(i=z(y,r,{}))._f&&(i._f.mount=!1),!p.shouldUnregister&&!a.shouldUnregister||ll(w.array,r)&&b.action||w.unMount.add(r)}}},R=()=>p.shouldFocusError&&Vl(y,h,w.mount);var D=(i,o)=>async e=>{let t=void 0,n=(e&&(e.preventDefault&&e.preventDefault(),e.persist)&&e.persist(),cl(v));var r,a;if(x.state.next({isSubmitting:!0}),p.resolver?({errors:r,values:a}=await N(),g.errors=r,n=a):await T(y),Ql(g.errors,"root"),_l(g.errors)){x.state.next({errors:{}});try{await i(n,e)}catch(e){t=e}}else o&&await o({...g.errors},e),R(),setTimeout(R);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_l(g.errors)&&!t,submitCount:g.submitCount+1,errors:g.errors}),t)throw t};const P=(e,t={})=>{var n=e?cl(e):c,r=cl(n),a=_l(e),i=a?c:r;if(t.keepDefaultValues||(c=n),!t.keepValues){if(t.keepDirtyValues)for(const s of w.mount)z(g.dirtyFields,s)?gl(i,s,z(v,s)):f(s,z(i,s));else{if(ul&&ml(e))for(const l of w.mount){var o=z(y,l);if(o&&o._f){o=Array.isArray(o._f.refs)?o._f.refs[0]:o._f.ref;if(Bl(o)){o=o.closest("form");if(o){o.reset();break}}}}y={}}v=u.shouldUnregister?t.keepDefaultValues?cl(c):{}:cl(i),x.array.next({values:{...i}}),x.values.next({values:{...i}})}w={mount:t.keepDirtyValues?w.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!S.isValid||!!t.keepIsValid||!!t.keepDirtyValues,b.watch=!!u.shouldUnregister,x.state.next({submitCount:t.keepSubmitCount?g.submitCount:0,isDirty:!a&&(t.keepDirty?g.isDirty:!(!t.keepDefaultValues||nu(e,c))),isSubmitted:!!t.keepIsSubmitted&&g.isSubmitted,dirtyFields:a?{}:t.keepDirtyValues?t.keepDefaultValues&&v?su(c,v):g.dirtyFields:t.keepDefaultValues&&e?su(c,e):t.keepDirty?g.dirtyFields:{},touchedFields:t.keepTouched?g.touchedFields:{},errors:t.keepErrors?g.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&g.isSubmitSuccessful,isSubmitting:!1})},j=(e,t)=>P(zl(e)?e(v):e,t);return{control:{register:A,unregister:i,getFieldState:e,handleSubmit:D,setError:a,_executeSchema:N,_getWatch:r,_getDirty:d,_updateValid:_,_removeUnmounted:()=>{for(const t of w.unMount){var e=z(y,t);e&&(e._f.refs?e._f.refs.every(e=>!au(e)):!au(e._f.ref))&&i(t)}w.unMount=new Set},_updateFieldArray:(e,t=[],n,r,a=!0,i=!0)=>{var o,s;r&&n?(b.action=!0,i&&Array.isArray(z(y,e))&&(o=n(z(y,e),r.argA,r.argB),a)&&gl(y,e,o),i&&Array.isArray(z(g.errors,e))&&(o=n(z(g.errors,e),r.argA,r.argB),a&&gl(g.errors,e,o),o=g.errors,dl(z(o,s=e)).length||Ql(o,s)),S.touchedFields&&i&&Array.isArray(z(g.touchedFields,e))&&(s=n(z(g.touchedFields,e),r.argA,r.argB),a)&&gl(g.touchedFields,e,s),S.dirtyFields&&(g.dirtyFields=su(c,v)),x.state.next({name:e,isDirty:d(e,t),dirtyFields:g.dirtyFields,errors:g.errors,isValid:g.isValid})):gl(v,e,t)},_updateDisabledField:M,_getFieldArray:e=>dl(z(b.mount?v:c,e,u.shouldUnregister?z(c,e,[]):[])),_reset:P,_resetDefaultValues:()=>zl(p.defaultValues)&&p.defaultValues().then(e=>{j(e,p.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:e=>{g={...g,...e}},_disableForm:r=>{fl(r)&&(x.state.next({disabled:r}),Vl(y,(e,t)=>{const n=z(y,t);n&&(e.disabled=n._f.disabled||r,Array.isArray(n._f.refs))&&n._f.refs.forEach(e=>{e.disabled=n._f.disabled||r})},0,!1))},_subjects:x,_proxyFormState:S,_setErrors:e=>{g.errors=e,x.state.next({errors:g.errors,isValid:!1})},get _fields(){return y},get _formValues(){return v},get _state(){return b},set _state(e){b=e},get _defaultValues(){return c},get _names(){return w},set _names(e){w=e},get _formState(){return g},set _formState(e){g=e},get _options(){return p},set _options(e){p={...p,...e}}},trigger:O,register:A,handleSubmit:D,watch:(t,n)=>zl(t)?x.values.subscribe({next:e=>t(r(void 0,n),e)}):r(t,n,!0),setValue:f,getValues:n,reset:j,resetField:(e,t={})=>{z(y,e)&&(ml(t.defaultValue)?f(e,cl(z(c,e))):(f(e,t.defaultValue),gl(c,e,cl(t.defaultValue))),t.keepTouched||Ql(g.touchedFields,e),t.keepDirty||(Ql(g.dirtyFields,e),g.isDirty=t.defaultValue?d(e,cl(z(c,e))):d()),t.keepError||(Ql(g.errors,e),S.isValid&&_()),x.state.next({...g}))},clearErrors:e=>{e&&Cl(e).forEach(e=>Ql(g.errors,e)),x.state.next({errors:e?g.errors:{}})},unregister:i,setError:a,setFocus:(e,t={})=>{var e=z(y,e),e=e&&e._f;e&&(e=e.refs?e.refs[0]:e.ref).focus&&(e.focus(),t.shouldSelect)&&e.select()},getFieldState:e}}function hu(e={}){var t=el.default.useRef();const n=el.default.useRef(),[r,a]=el.default.useState({isDirty:!1,isValidating:!1,isLoading:zl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:zl(e.defaultValues)?void 0:e.defaultValues}),i=(t.current||(t.current={...fu(e),formState:r}),t.current.control);return i._options=e,Tl({subject:i._subjects.state,next:e=>{Il(e,i._proxyFormState,i._updateFormState,!0)&&a({...i._formState})}}),el.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),el.default.useEffect(()=>{var e;i._proxyFormState.isDirty&&(e=i._getDirty())!==r.isDirty&&i._subjects.state.next({isDirty:e})},[i,r.isDirty]),el.default.useEffect(()=>{e.values&&!nu(e.values,n.current)?(i._reset(e.values,i._options.resetOptions),n.current=e.values,a(e=>({...e}))):i._resetDefaultValues()},[e.values,i]),el.default.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),el.default.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),el.default.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=kl(r,i),t.current}for(var pu,gu=(e,t,n)=>{e&&"reportValidity"in e&&(n=z(n,t),e.setCustomValidity(n&&n.message||""),e.reportValidity())},yu=(t,e)=>{for(const r in e.fields){var n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?gu(n.ref,r,t):n.refs&&n.refs.forEach(e=>gu(e,r,t))}},vu=(e,t)=>{t.shouldUseNativeValidation&&yu(e,t);var n={};for(const i in e){var r,a=z(t.fields,i),a=Object.assign(e[i]||{},{ref:a&&a.ref});((e,t)=>e.some(e=>e.startsWith(t+".")))(t.names||Object.keys(e),i)?(r=Object.assign({},z(n,i)),gl(r,"root",a),gl(n,i,r)):gl(n,i,a)}return n},bu=function(t,e){for(var n={};t.length;){var r,a=t[0],i=a.code,o=a.message,s=a.path.join(".");n[s]||("unionErrors"in a?(r=a.unionErrors[0].errors[0],n[s]={message:r.message,type:r.code}):n[s]={message:o,type:i}),"unionErrors"in a&&a.unionErrors.forEach(function(e){return e.errors.forEach(function(e){return t.push(e)})}),e&&(o=(r=n[s].types)&&r[a.code],n[s]=Pl(s,e,n,i,o?[].concat(o,a.message):a.message)),t.shift()}return n},wu=function(a,i,o){return void 0===o&&(o={}),function(n,e,r){try{return Promise.resolve(function(t){try{var e=Promise.resolve(a["sync"===o.mode?"parse":"parseAsync"](n,i)).then(function(e){return r.shouldUseNativeValidation&&yu({},r),{errors:{},values:o.raw?n:e}})}catch(e){return t(e)}return e&&e.then?e.then(void 0,t):e}(function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:vu(bu(e.errors,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};throw e}))}catch(e){return Promise.reject(e)}}},Eu=e(b()),Su=[],xu=0;xu<256;++xu)Su.push((xu+256).toString(16).slice(1));var ku=new Uint8Array(16);var _u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Iu=function(e,t,n){if(_u.randomUUID&&!t&&!e)return _u.randomUUID();var r=(e=e||{}).random||(e.rng||function(){if(pu=pu||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return pu(ku);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return(Su[r[(e=0)+0]]+Su[r[e+1]]+Su[r[e+2]]+Su[r[e+3]]+"-"+Su[r[e+4]]+Su[r[e+5]]+"-"+Su[r[e+6]]+Su[r[e+7]]+"-"+Su[r[e+8]]+Su[r[e+9]]+"-"+Su[r[e+10]]+Su[r[e+11]]+Su[r[e+12]]+Su[r[e+13]]+Su[r[e+14]]+Su[r[e+15]]).toLowerCase()},r=e(b(),1),t=e(n(),1),Cu={},Nu=r.default["useDebugValue"],Tu=t.default["useSyncExternalStoreWithSelector"],Ou=!1,Mu=e=>e;var d,Au,Ru,Du=e=>{"production"!==(Cu.env?Cu.env.MODE:void 0)&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r="function"==typeof e?Fe(e):e;e=(e,t)=>{return[e,t=Mu,n]=[r,e,t],"production"!==(Cu.env?Cu.env.MODE:void 0)&&n&&!Ou&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ou=!0),e=Tu(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n),Nu(e),e;var n};return Object.assign(e,r),e},rn=e=>e?Du(e):Du,Pu="https://api.spotify.com/v1";function Lu(e=!1){let t=y().RequestBuilder.build().withHost(Pu);return t=e?t.withoutMarket():t}function Fu(e){var t=e._base62Id;if(t)return t;if(e.id)return e.id;throw new Error("URI does not have an ID")}(Au=d=d||{}).assertEqual=e=>e,Au.assertIs=function(e){},Au.assertNever=function(e){throw new Error},Au.arrayToEnum=e=>{var t={};for(const n of e)t[n]=n;return t},Au.getValidEnumValues=t=>{var e={};for(const n of Au.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]))e[n]=t[n];return Au.objectValues(e)},Au.objectValues=t=>Au.objectKeys(t).map(function(e){return t[e]}),Au.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{var t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},Au.find=(e,t)=>{for(const n of e)if(t(n))return n},Au.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,Au.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},Au.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(Ru||(Ru={})).mergeShapes=(e,t)=>({...e,...t});var g=d.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vu=e=>{switch(typeof e){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(e)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(e)?g.array:null===e?g.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?g.promise:"undefined"!=typeof Map&&e instanceof Map?g.map:"undefined"!=typeof Set&&e instanceof Set?g.set:"undefined"!=typeof Date&&e instanceof Date?g.date:g.object;default:return g.unknown}},w=d.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ju=class extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};var t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const a=e||function(e){return e.message},i={_errors:[]},t=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(t);else if("invalid_return_type"===r.code)t(r.returnTypeError);else if("invalid_arguments"===r.code)t(r.argumentsError);else if(0===r.path.length)i._errors.push(a(r));else{let e=i,t=0;for(;t<r.path.length;){var n=r.path[t];t===r.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(a(r))):e[n]=e[n]||{_errors:[]},e=e[n],t++}}};return t(this),i}static assert(e){if(!(e instanceof ju))throw new Error("Not a ZodError: "+e)}toString(){return this.message}get message(){return JSON.stringify(this.issues,d.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){var t={},n=[];for(const r of this.issues)(0<r.path.length?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]]):n).push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}},zu=(ju.create=e=>{return new ju(e)},(e,t)=>{let n;switch(e.code){case w.invalid_type:n=e.received===g.undefined?"Required":`Expected ${e.expected}, received `+e.received;break;case w.invalid_literal:n="Invalid literal value, expected "+JSON.stringify(e.expected,d.jsonStringifyReplacer);break;case w.unrecognized_keys:n="Unrecognized key(s) in object: "+d.joinValues(e.keys,", ");break;case w.invalid_union:n="Invalid input";break;case w.invalid_union_discriminator:n="Invalid discriminator value. Expected "+d.joinValues(e.options);break;case w.invalid_enum_value:n=`Invalid enum value. Expected ${d.joinValues(e.options)}, received '${e.received}'`;break;case w.invalid_arguments:n="Invalid function arguments";break;case w.invalid_return_type:n="Invalid function return type";break;case w.invalid_date:n="Invalid date";break;case w.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=n+" at one or more positions greater than or equal to "+e.validation.position)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:d.assertNever(e.validation):n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case w.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?"Number must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+e.minimum:"date"===e.type?"Date must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+new Date(Number(e.minimum)):"Invalid input";break;case w.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} `+new Date(Number(e.maximum)):"Invalid input";break;case w.custom:n="Invalid input";break;case w.invalid_intersection_types:n="Intersection results could not be merged";break;case w.not_multiple_of:n="Number must be a multiple of "+e.multipleOf;break;case w.not_finite:n="Number must be finite";break;default:n=t.defaultError,d.assertNever(e)}return{message:n}}),Bu=zu;function Uu(){return Bu}var $u=e=>{var{data:t,path:e,errorMaps:n,issueData:r}=e,e=[...e,...r.path||[]],a={...r,path:e};if(void 0!==r.message)return{...r,path:e,message:r.message};let i="";for(const o of n.filter(e=>!!e).slice().reverse())i=o(a,{data:t,defaultError:i}).message;return{...r,path:e,message:i}};function E(e,t){var n=Bu,t=$u({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zu?void 0:zu].filter(e=>!!e)});e.common.issues.push(t)}var i,Hu=class{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){var n=[];for(const r of t){if("aborted"===r.status)return x;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){var n=[];for(const i of t){var r=await i.key,a=await i.value;n.push({key:r,value:a})}return Hu.mergeObjectSync(e,n)}static mergeObjectSync(e,t){var n={};for(const i of t){var{key:r,value:a}=i;if("aborted"===r.status)return x;if("aborted"===a.status)return x;"dirty"===r.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===r.value||void 0===a.value&&!i.alwaysSet||(n[r.value]=a.value)}return{status:e.value,value:n}}},x=Object.freeze({status:"aborted"}),Zu=e=>({status:"dirty",value:e}),Wu=e=>({status:"valid",value:e}),Ku=e=>"aborted"===e.status,Yu=e=>"dirty"===e.status,qu=e=>"valid"===e.status,Xu=e=>"undefined"!=typeof Promise&&e instanceof Promise;function Gu(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&r:t.has(e))return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function Ju(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?a.call(e,n):a?a.value=n:t.set(e,n)}(Us=i=i||{}).errToObj=e=>"string"==typeof e?{message:e}:e||{},Us.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var Qu=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ec=(t,e)=>{if(qu(e))return{success:!0,data:e.value};if(t.common.issues.length)return{success:!1,get error(){var e;return this._error||(e=new ju(t.common.issues),this._error=e),this._error}};throw new Error("Validation failed but no issues detected.")};function s(a){if(!a)return{};const{errorMap:e,invalid_type_error:i,required_error:o,description:t}=a;if(e&&(i||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:(e,t)=>{var n,r=a["message"];return"invalid_enum_value"===e.code?{message:null!=r?r:t.defaultError}:void 0===t.data?{message:null!=(n=null!=r?r:o)?n:t.defaultError}:"invalid_type"!==e.code?{message:t.defaultError}:{message:null!=(n=null!=r?r:i)?n:t.defaultError}},description:t}}var tc,o=class{get description(){return this._def.description}_getType(e){return Vu(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Vu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hu,ctx:{common:e.parent.common,data:e.data,parsedType:Vu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){e=this._parse(e);if(Xu(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(e){e=this._parse(e);return Promise.resolve(e)}parse(e,t){e=this.safeParse(e,t);if(e.success)return e.data;throw e.error}safeParse(e,t){var n={common:{issues:[],async:null!=(n=null==t?void 0:t.async)&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vu(e)},t=this._parseSync({data:e,path:n.path,parent:n});return ec(n,t)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vu(e)};if(!this["~standard"].async)try{var n=this._parseSync({data:e,path:[],parent:t});return qu(n)?{value:n.value}:{issues:t.common.issues}}catch(e){null!=(n=null==(n=null==e?void 0:e.message)?void 0:n.toLowerCase())&&n.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>qu(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){e=await this.safeParseAsync(e,t);if(e.success)return e.data;throw e.error}async safeParseAsync(e,t){t={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vu(e)},e=this._parse({data:e,path:t.path,parent:t}),e=await(Xu(e)?e:Promise.resolve(e));return ec(t,e)}refine(a,i){return this._refinement((t,n)=>{var e=a(t);const r=()=>{return n.addIssue({code:w.custom,...(e=t,"string"==typeof i||void 0===i?{message:i}:"function"==typeof i?i(e):i)});var e};return"undefined"!=typeof Promise&&e instanceof Promise?e.then(e=>!!e||(r(),!1)):!!e||(r(),!1)})}refinement(n,r){return this._refinement((e,t)=>!!n(e)||(t.addIssue("function"==typeof r?r(e,t):r),!1))}_refinement(e){return new ad({schema:this,typeName:l.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return id.create(this,this._def)}nullable(){return od.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fc.create(this)}promise(){return rd.create(this,this._def)}or(e){return zc.create([this,e],this._def)}and(e){return Hc.create(this,e,this._def)}transform(e){return new ad({...s(this._def),schema:this,typeName:l.ZodEffects,effect:{type:"transform",transform:e}})}default(e){var t="function"==typeof e?e:()=>e;return new sd({...s(this._def),innerType:this,defaultValue:t,typeName:l.ZodDefault})}brand(){return new cd({typeName:l.ZodBranded,type:this,...s(this._def)})}catch(e){var t="function"==typeof e?e:()=>e;return new ld({...s(this._def),innerType:this,catchValue:t,typeName:l.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return dd.create(this,e)}readonly(){return md.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},nc=/^c[^\s-]{8,}$/i,rc=/^[0-9a-z]+$/,ac=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ic=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,oc=/^[a-z0-9_-]{21}$/i,sc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,lc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,mc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",yc=new RegExp(`^${gc}$`);function vc(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t+="(\\.\\d+)?"),t}function bc(e){return new RegExp(`^${vc(e)}$`)}function wc(e){var t=gc+"T"+vc(e),n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t+=`(${n.join("|")})`,new RegExp(`^${t}$`)}function Ec(e,t){return("v4"===t||!t)&&cc.test(e)||!("v6"!==t&&t||!mc.test(e))}function Sc(e,t){if(sc.test(e))try{var[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a?!(!a.typ||!a.alg||t&&a.alg!==t):void 0}catch(e){}}function xc(e,t){return("v4"===t||!t)&&dc.test(e)||!("v6"!==t&&t||!fc.test(e))}var kc=class extends o{_parse(t){var e;if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==g.string)return E(e=this._getOrReturnCtx(t),{code:w.invalid_type,expected:g.string,received:e.parsedType}),x;var n=new Hu;let r=void 0;for(const o of this._def.checks)if("min"===o.kind)t.data.length<o.value&&(E(r=this._getOrReturnCtx(t,r),{code:w.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if("max"===o.kind)t.data.length>o.value&&(E(r=this._getOrReturnCtx(t,r),{code:w.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if("length"===o.kind){var a=t.data.length>o.value,i=t.data.length<o.value;(a||i)&&(r=this._getOrReturnCtx(t,r),a?E(r,{code:w.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&E(r,{code:w.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if("email"===o.kind)uc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"email",code:w.invalid_string,message:o.message}),n.dirty());else if("emoji"===o.kind)(tc=tc||new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")).test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"emoji",code:w.invalid_string,message:o.message}),n.dirty());else if("uuid"===o.kind)ic.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"uuid",code:w.invalid_string,message:o.message}),n.dirty());else if("nanoid"===o.kind)oc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"nanoid",code:w.invalid_string,message:o.message}),n.dirty());else if("cuid"===o.kind)nc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"cuid",code:w.invalid_string,message:o.message}),n.dirty());else if("cuid2"===o.kind)rc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"cuid2",code:w.invalid_string,message:o.message}),n.dirty());else if("ulid"===o.kind)ac.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"ulid",code:w.invalid_string,message:o.message}),n.dirty());else if("url"===o.kind)try{new URL(t.data)}catch(e){E(r=this._getOrReturnCtx(t,r),{validation:"url",code:w.invalid_string,message:o.message}),n.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"regex",code:w.invalid_string,message:o.message}),n.dirty())):"trim"===o.kind?t.data=t.data.trim():"includes"===o.kind?t.data.includes(o.value,o.position)||(E(r=this._getOrReturnCtx(t,r),{code:w.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):"toLowerCase"===o.kind?t.data=t.data.toLowerCase():"toUpperCase"===o.kind?t.data=t.data.toUpperCase():"startsWith"===o.kind?t.data.startsWith(o.value)||(E(r=this._getOrReturnCtx(t,r),{code:w.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):"endsWith"===o.kind?t.data.endsWith(o.value)||(E(r=this._getOrReturnCtx(t,r),{code:w.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):"datetime"===o.kind?wc(o).test(t.data)||(E(r=this._getOrReturnCtx(t,r),{code:w.invalid_string,validation:"datetime",message:o.message}),n.dirty()):"date"===o.kind?yc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{code:w.invalid_string,validation:"date",message:o.message}),n.dirty()):"time"===o.kind?bc(o).test(t.data)||(E(r=this._getOrReturnCtx(t,r),{code:w.invalid_string,validation:"time",message:o.message}),n.dirty()):"duration"===o.kind?lc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"duration",code:w.invalid_string,message:o.message}),n.dirty()):"ip"===o.kind?Ec(t.data,o.version)||(E(r=this._getOrReturnCtx(t,r),{validation:"ip",code:w.invalid_string,message:o.message}),n.dirty()):"jwt"===o.kind?Sc(t.data,o.alg)||(E(r=this._getOrReturnCtx(t,r),{validation:"jwt",code:w.invalid_string,message:o.message}),n.dirty()):"cidr"===o.kind?xc(t.data,o.version)||(E(r=this._getOrReturnCtx(t,r),{validation:"cidr",code:w.invalid_string,message:o.message}),n.dirty()):"base64"===o.kind?hc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"base64",code:w.invalid_string,message:o.message}),n.dirty()):"base64url"===o.kind?pc.test(t.data)||(E(r=this._getOrReturnCtx(t,r),{validation:"base64url",code:w.invalid_string,message:o.message}),n.dirty()):d.assertNever(o);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(e=>t.test(e),{validation:e,code:w.invalid_string,...i.errToObj(n)})}_addCheck(e){return new kc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...i.errToObj(e)})}url(e){return this._addCheck({kind:"url",...i.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...i.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...i.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...i.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...i.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...i.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...i.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...i.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...i.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...i.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...i.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...i.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(t=null==e?void 0:e.local)&&t,...i.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...i.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...i.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...i.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...i.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...i.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...i.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...i.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...i.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...i.errToObj(t)})}nonempty(e){return this.min(1,i.errToObj(e))}trim(){return new kc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new kc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new kc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function _c(e,t){var n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,n=r<n?n:r;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}kc.create=e=>{var t;return new kc({checks:[],typeName:l.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...s(e)})};var Ic=class extends o{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){var t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number)return E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.number,received:t.parsedType}),x;let n=void 0;var r=new Hu;for(const a of this._def.checks)"int"===a.kind?d.isInteger(e.data)||(E(n=this._getOrReturnCtx(e,n),{code:w.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(E(n=this._getOrReturnCtx(e,n),{code:w.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(E(n=this._getOrReturnCtx(e,n),{code:w.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==_c(e.data,a.value)&&(E(n=this._getOrReturnCtx(e,n),{code:w.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(E(n=this._getOrReturnCtx(e,n),{code:w.not_finite,message:a.message}),r.dirty()):d.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.toString(t))}setLimit(e,t,n,r){return new Ic({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:i.toString(r)}]})}_addCheck(e){return new Ic({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:i.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:i.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&d.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}},Cc=(Ic.create=e=>new Ic({checks:[],typeName:l.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...s(e)}),class extends o{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(e){return this._getInvalidInput(t)}if(this._getType(t)!==g.bigint)return this._getInvalidInput(t);let e=void 0;var n=new Hu;for(const r of this._def.checks)"min"===r.kind?(r.inclusive?t.data<r.value:t.data<=r.value)&&(E(e=this._getOrReturnCtx(t,e),{code:w.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?t.data>r.value:t.data>=r.value)&&(E(e=this._getOrReturnCtx(t,e),{code:w.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?t.data%r.value!==BigInt(0)&&(E(e=this._getOrReturnCtx(t,e),{code:w.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):d.assertNever(r);return{status:n.value,value:t.data}}_getInvalidInput(e){e=this._getOrReturnCtx(e);return E(e,{code:w.invalid_type,expected:g.bigint,received:e.parsedType}),x}gte(e,t){return this.setLimit("min",e,!0,i.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.toString(t))}setLimit(e,t,n,r){return new Cc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:i.toString(r)}]})}_addCheck(e){return new Cc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}),Nc=(Cc.create=e=>{var t;return new Cc({checks:[],typeName:l.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...s(e)})},class extends o{_parse(e){var t;return this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==g.boolean?(E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.boolean,received:t.parsedType}),x):Wu(e.data)}}),Tc=(Nc.create=e=>new Nc({typeName:l.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...s(e)}),class extends o{_parse(e){var t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date)return E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.date,received:t.parsedType}),x;if(isNaN(e.data.getTime()))return E(this._getOrReturnCtx(e),{code:w.invalid_date}),x;var n=new Hu;let r=void 0;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(E(r=this._getOrReturnCtx(e,r),{code:w.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(E(r=this._getOrReturnCtx(e,r),{code:w.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):d.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tc({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:i.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:i.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}),Oc=(Tc.create=e=>new Tc({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:l.ZodDate,...s(e)}),class extends o{_parse(e){var t;return this._getType(e)!==g.symbol?(E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.symbol,received:t.parsedType}),x):Wu(e.data)}}),Mc=(Oc.create=e=>new Oc({typeName:l.ZodSymbol,...s(e)}),class extends o{_parse(e){var t;return this._getType(e)!==g.undefined?(E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.undefined,received:t.parsedType}),x):Wu(e.data)}}),Ac=(Mc.create=e=>new Mc({typeName:l.ZodUndefined,...s(e)}),class extends o{_parse(e){var t;return this._getType(e)!==g.null?(E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.null,received:t.parsedType}),x):Wu(e.data)}}),Rc=(Ac.create=e=>new Ac({typeName:l.ZodNull,...s(e)}),class extends o{constructor(){super(...arguments),this._any=!0}_parse(e){return Wu(e.data)}}),Dc=(Rc.create=e=>new Rc({typeName:l.ZodAny,...s(e)}),class extends o{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wu(e.data)}}),Pc=(Dc.create=e=>new Dc({typeName:l.ZodUnknown,...s(e)}),class extends o{_parse(e){e=this._getOrReturnCtx(e);return E(e,{code:w.invalid_type,expected:g.never,received:e.parsedType}),x}}),Lc=(Pc.create=e=>new Pc({typeName:l.ZodNever,...s(e)}),class extends o{_parse(e){var t;return this._getType(e)!==g.undefined?(E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.void,received:t.parsedType}),x):Wu(e.data)}}),Fc=(Lc.create=e=>new Lc({typeName:l.ZodVoid,...s(e)}),class extends o{_parse(e){const{ctx:n,status:t}=this._processInputParams(e),r=this._def;var a;return n.parsedType!==g.array?(E(n,{code:w.invalid_type,expected:g.array,received:n.parsedType}),x):(null!==r.exactLength&&(e=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value,e||a)&&(E(n,{code:e?w.too_big:w.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),t.dirty()),null!==r.minLength&&n.data.length<r.minLength.value&&(E(n,{code:w.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),t.dirty()),null!==r.maxLength&&n.data.length>r.maxLength.value&&(E(n,{code:w.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),t.dirty()),n.common.async?Promise.all([...n.data].map((e,t)=>r.type._parseAsync(new Qu(n,e,n.path,t)))).then(e=>Hu.mergeArray(t,e)):(a=[...n.data].map((e,t)=>r.type._parseSync(new Qu(n,e,n.path,t))),Hu.mergeArray(t,a)))}get element(){return this._def.type}min(e,t){return new Fc({...this._def,minLength:{value:e,message:i.toString(t)}})}max(e,t){return new Fc({...this._def,maxLength:{value:e,message:i.toString(t)}})}length(e,t){return new Fc({...this._def,exactLength:{value:e,message:i.toString(t)}})}nonempty(e){return this.min(1,e)}});function Vc(e){if(e instanceof jc){const n={};for(const r in e.shape){var t=e.shape[r];n[r]=id.create(Vc(t))}return new jc({...e._def,shape:()=>n})}return e instanceof Fc?new Fc({...e._def,type:Vc(e.element)}):e instanceof id?id.create(Vc(e.unwrap())):e instanceof od?od.create(Vc(e.unwrap())):e instanceof Zc?Zc.create(e.items.map(e=>Vc(e))):e}Fc.create=(e,t)=>new Fc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:l.ZodArray,...s(t)});var jc=class extends o{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){var e,t;return null!==this._cached?this._cached:(e=this._def.shape(),t=d.objectKeys(e),this._cached={shape:e,keys:t})}_parse(e){if(this._getType(e)!==g.object)return E(u=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.object,received:u.parsedType}),x;const{status:t,ctx:n}=this._processInputParams(e);var{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof Pc&&"strip"===this._def.unknownKeys))for(const m in n.data)a.includes(m)||i.push(m);const o=[];for(const f of a){var s=r[f],l=n.data[f];o.push({key:{status:"valid",value:f},value:s._parse(new Qu(n,l,n.path,f)),alwaysSet:f in n.data})}if(this._def.catchall instanceof Pc){var u=this._def.unknownKeys;if("passthrough"===u)for(const h of i)o.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if("strict"===u)0<i.length&&(E(n,{code:w.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==u)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var c=this._def.catchall;for(const p of i){var d=n.data[p];o.push({key:{status:"valid",value:p},value:c._parse(new Qu(n,d,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{var e=[];for(const r of o){var t=await r.key,n=await r.value;e.push({key:t,value:n,alwaysSet:r.alwaysSet})}return e}).then(e=>Hu.mergeObjectSync(t,e)):Hu.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(a){return i.errToObj,new jc({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(e,t)=>{var n,r=null!=(n=null==(n=(r=this._def).errorMap)?void 0:n.call(r,e,t).message)?n:t.defaultError;return"unrecognized_keys"===e.code?{message:null!=(n=i.errToObj(a).message)?n:r}:{message:r}}}:{}})}strip(){return new jc({...this._def,unknownKeys:"strip"})}passthrough(){return new jc({...this._def,unknownKeys:"passthrough"})}extend(e){return new jc({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new jc({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:l.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new jc({...this._def,catchall:e})}pick(t){const n={};return d.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(n[e]=this.shape[e])}),new jc({...this._def,shape:()=>n})}omit(t){const n={};return d.objectKeys(this.shape).forEach(e=>{t[e]||(n[e]=this.shape[e])}),new jc({...this._def,shape:()=>n})}deepPartial(){return Vc(this)}partial(n){const r={};return d.objectKeys(this.shape).forEach(e=>{var t=this.shape[e];n&&!n[e]?r[e]=t:r[e]=t.optional()}),new jc({...this._def,shape:()=>r})}required(e){const n={};return d.objectKeys(this.shape).forEach(t=>{if(e&&!e[t])n[t]=this.shape[t];else{let e=this.shape[t];for(;e instanceof id;)e=e._def.innerType;n[t]=e}}),new jc({...this._def,shape:()=>n})}keyof(){return Jc(d.objectKeys(this.shape))}},zc=(jc.create=(e,t)=>new jc({shape:()=>e,unknownKeys:"strip",catchall:Pc.create(),typeName:l.ZodObject,...s(t)}),jc.strictCreate=(e,t)=>new jc({shape:()=>e,unknownKeys:"strict",catchall:Pc.create(),typeName:l.ZodObject,...s(t)}),jc.lazycreate=(e,t)=>new jc({shape:e,unknownKeys:"strip",catchall:Pc.create(),typeName:l.ZodObject,...s(t)}),class extends o{_parse(t){const r=this._processInputParams(t)["ctx"];t=this._def.options;if(r.common.async)return Promise.all(t.map(async e=>{var t={...r,common:{...r.common,issues:[]},parent:null};return{result:await e._parseAsync({data:r.data,path:r.path,parent:t}),ctx:t}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return r.common.issues.push(...n.ctx.common.issues),n.result;return e=e.map(e=>new ju(e.ctx.common.issues)),E(r,{code:w.invalid_union,unionErrors:e}),x});{let e=void 0;var n=[];for(const o of t){var a={...r,common:{...r.common,issues:[]},parent:null},i=o._parseSync({data:r.data,path:r.path,parent:a});if("valid"===i.status)return i;"dirty"===i.status&&(e=e||{result:i,ctx:a}),a.common.issues.length&&n.push(a.common.issues)}return e?(r.common.issues.push(...e.ctx.common.issues),e.result):(t=n.map(e=>new ju(e)),E(r,{code:w.invalid_union,unionErrors:t}),x)}}get options(){return this._def.options}}),Bc=(zc.create=(e,t)=>new zc({options:e,typeName:l.ZodUnion,...s(t)}),e=>e instanceof Xc?Bc(e.schema):e instanceof ad?Bc(e.innerType()):e instanceof Gc?[e.value]:e instanceof Qc?e.options:e instanceof td?d.objectValues(e.enum):e instanceof sd?Bc(e._def.innerType):e instanceof Mc?[void 0]:e instanceof Ac?[null]:e instanceof id?[void 0,...Bc(e.unwrap())]:e instanceof od?[null,...Bc(e.unwrap())]:e instanceof cd||e instanceof md?Bc(e.unwrap()):e instanceof ld?Bc(e._def.innerType):[]),Uc=class extends o{_parse(e){var t,n,e=this._processInputParams(e)["ctx"];return e.parsedType!==g.object?(E(e,{code:w.invalid_type,expected:g.object,received:e.parsedType}),x):(t=this.discriminator,n=e.data[t],(n=this.optionsMap.get(n))?e.common.async?n._parseAsync({data:e.data,path:e.path,parent:e}):n._parseSync({data:e.data,path:e.path,parent:e}):(E(e,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[t]}),x))}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){var r=new Map;for(const i of t){var a=Bc(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value `+String(o));r.set(o,i)}}return new Uc({typeName:l.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...s(n)})}};function $c(t,n){var e=Vu(t),r=Vu(n);if(t===n)return{valid:!0,data:t};if(e===g.object&&r===g.object){const u=d.objectKeys(n);var a=d.objectKeys(t).filter(e=>-1!==u.indexOf(e)),i={...t,...n};for(const c of a){var o=$c(t[c],n[c]);if(!o.valid)return{valid:!1};i[c]=o.data}return{valid:!0,data:i}}if(e!==g.array||r!==g.array)return e===g.date&&r===g.date&&+t==+n?{valid:!0,data:t}:{valid:!1};if(t.length!==n.length)return{valid:!1};var s=[];for(let e=0;e<t.length;e++){var l=$c(t[e],n[e]);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}var Hc=class extends o{_parse(e){const{status:r,ctx:a}=this._processInputParams(e),n=(e,t)=>{var n;return Ku(e)||Ku(t)?x:(n=$c(e.value,t.value)).valid?((Yu(e)||Yu(t))&&r.dirty(),{status:r.value,value:n.data}):(E(a,{code:w.invalid_intersection_types}),x)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}},Zc=(Hc.create=(e,t,n)=>new Hc({left:e,right:t,typeName:l.ZodIntersection,...s(n)}),class extends o{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);return r.parsedType!==g.array?(E(r,{code:w.invalid_type,expected:g.array,received:r.parsedType}),x):r.data.length<this._def.items.length?(E(r,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x):(!this._def.rest&&r.data.length>this._def.items.length&&(E(r,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty()),e=[...r.data].map((e,t)=>{var n=this._def.items[t]||this._def.rest;return n?n._parse(new Qu(r,e,r.path,t)):null}).filter(e=>!!e),r.common.async?Promise.all(e).then(e=>Hu.mergeArray(t,e)):Hu.mergeArray(t,e))}get items(){return this._def.items}rest(e){return new Zc({...this._def,rest:e})}}),Wc=(Zc.create=(e,t)=>{if(Array.isArray(e))return new Zc({items:e,typeName:l.ZodTuple,rest:null,...s(t)});throw new Error("You must pass an array of schemas to z.tuple([ ... ])")},class extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){var{status:e,ctx:t}=this._processInputParams(e);if(t.parsedType!==g.object)return E(t,{code:w.invalid_type,expected:g.object,received:t.parsedType}),x;var n=[],r=this._def.keyType,a=this._def.valueType;for(const i in t.data)n.push({key:r._parse(new Qu(t,i,t.path,i)),value:a._parse(new Qu(t,t.data[i],t.path,i)),alwaysSet:i in t.data});return t.common.async?Hu.mergeObjectAsync(e,n):Hu.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(e,t,n){return new Wc(t instanceof o?{keyType:e,valueType:t,typeName:l.ZodRecord,...s(n)}:{keyType:kc.create(),valueType:e,typeName:l.ZodRecord,...s(t)})}}),Kc=class extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==g.map)return E(a,{code:w.invalid_type,expected:g.map,received:a.parsedType}),x;const i=this._def.keyType,o=this._def.valueType,s=[...a.data.entries()].map(([e,t],n)=>({key:i._parse(new Qu(a,e,a.path,[n,"key"])),value:o._parse(new Qu(a,t,a.path,[n,"value"]))}));if(a.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const n of s){var e=await n.key,t=await n.value;if("aborted"===e.status||"aborted"===t.status)return x;"dirty"!==e.status&&"dirty"!==t.status||r.dirty(),u.set(e.value,t.value)}return{status:r.value,value:u}})}var t=new Map;for(const c of s){var n=c.key,l=c.value;if("aborted"===n.status||"aborted"===l.status)return x;"dirty"!==n.status&&"dirty"!==l.status||r.dirty(),t.set(n.value,l.value)}return{status:r.value,value:t}}},Yc=(Kc.create=(e,t,n)=>new Kc({valueType:t,keyType:e,typeName:l.ZodMap,...s(n)}),class extends o{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.set)return E(n,{code:w.invalid_type,expected:g.set,received:n.parsedType}),x;e=this._def;null!==e.minSize&&n.data.size<e.minSize.value&&(E(n,{code:w.too_small,minimum:e.minSize.value,type:"set",inclusive:!0,exact:!1,message:e.minSize.message}),r.dirty()),null!==e.maxSize&&n.data.size>e.maxSize.value&&(E(n,{code:w.too_big,maximum:e.maxSize.value,type:"set",inclusive:!0,exact:!1,message:e.maxSize.message}),r.dirty());const a=this._def.valueType;function t(e){var t=new Set;for(const n of e){if("aborted"===n.status)return x;"dirty"===n.status&&r.dirty(),t.add(n.value)}return{status:r.value,value:t}}e=[...n.data.values()].map((e,t)=>a._parse(new Qu(n,e,n.path,t)));return n.common.async?Promise.all(e).then(e=>t(e)):t(e)}min(e,t){return new Yc({...this._def,minSize:{value:e,message:i.toString(t)}})}max(e,t){return new Yc({...this._def,maxSize:{value:e,message:i.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}),qc=(Yc.create=(e,t)=>new Yc({valueType:e,minSize:null,maxSize:null,typeName:l.ZodSet,...s(t)}),class extends o{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const n=this._processInputParams(e)["ctx"];if(n.parsedType!==g.function)return E(n,{code:w.invalid_type,expected:g.function,received:n.parsedType}),x;function a(e,t){return $u({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Uu(),zu].filter(e=>!!e),issueData:{code:w.invalid_arguments,argumentsError:t}})}function i(e,t){return $u({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Uu(),zu].filter(e=>!!e),issueData:{code:w.invalid_return_type,returnTypeError:t}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof rd){const l=this;return Wu(async function(...t){const n=new ju([]);var e=await l._def.args.parseAsync(t,o).catch(e=>{throw n.addIssue(a(t,e)),n});const r=await Reflect.apply(s,this,e);return await l._def.returns._def.type.parseAsync(r,o).catch(e=>{throw n.addIssue(i(r,e)),n})})}{const r=this;return Wu(function(...e){var t=r._def.args.safeParse(e,o);if(!t.success)throw new ju([a(e,t.error)]);e=Reflect.apply(s,this,t.data),t=r._def.returns.safeParse(e,o);if(t.success)return t.data;throw new ju([i(e,t.error)])})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qc({...this._def,args:Zc.create(e).rest(Dc.create())})}returns(e){return new qc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new qc({args:e||Zc.create([]).rest(Dc.create()),returns:t||Dc.create(),typeName:l.ZodFunction,...s(n)})}}),Xc=class extends o{get schema(){return this._def.getter()}_parse(e){e=this._processInputParams(e).ctx;return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}},Gc=(Xc.create=(e,t)=>new Xc({getter:e,typeName:l.ZodLazy,...s(t)}),class extends o{_parse(e){var t;return e.data!==this._def.value?(E(t=this._getOrReturnCtx(e),{received:t.data,code:w.invalid_literal,expected:this._def.value}),x):{status:"valid",value:e.data}}get value(){return this._def.value}});function Jc(e,t){return new Qc({values:e,typeName:l.ZodEnum,...s(t)})}Gc.create=(e,t)=>new Gc({value:e,typeName:l.ZodLiteral,...s(t)});var Qc=class extends o{constructor(){super(...arguments),ed.set(this,void 0)}_parse(e){var t,n;return"string"!=typeof e.data?(n=this._getOrReturnCtx(e),t=this._def.values,E(n,{expected:d.joinValues(t),received:n.parsedType,code:w.invalid_type}),x):(Gu(this,ed,"f")||Ju(this,ed,new Set(this._def.values),"f"),Gu(this,ed,"f").has(e.data)?Wu(e.data):(t=this._getOrReturnCtx(e),n=this._def.values,E(t,{received:t.data,code:w.invalid_enum_value,options:n}),x))}get options(){return this._def.values}get enum(){var e={};for(const t of this._def.values)e[t]=t;return e}get Values(){var e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){var e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qc.create(e,{...this._def,...t})}exclude(t,e=this._def){return Qc.create(this.options.filter(e=>!t.includes(e)),{...this._def,...e})}},ed=new WeakMap,td=(Qc.create=Jc,class extends o{constructor(){super(...arguments),nd.set(this,void 0)}_parse(e){var t,n=d.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);return r.parsedType!==g.string&&r.parsedType!==g.number?(t=d.objectValues(n),E(r,{expected:d.joinValues(t),received:r.parsedType,code:w.invalid_type}),x):(Gu(this,nd,"f")||Ju(this,nd,new Set(d.getValidEnumValues(this._def.values)),"f"),Gu(this,nd,"f").has(e.data)?Wu(e.data):(t=d.objectValues(n),E(r,{received:r.data,code:w.invalid_enum_value,options:t}),x))}get enum(){return this._def.values}}),nd=new WeakMap,rd=(td.create=(e,t)=>new td({values:e,typeName:l.ZodNativeEnum,...s(t)}),class extends o{unwrap(){return this._def.type}_parse(e){const t=this._processInputParams(e)["ctx"];return t.parsedType!==g.promise&&!1===t.common.async?(E(t,{code:w.invalid_type,expected:g.promise,received:t.parsedType}),x):(e=t.parsedType===g.promise?t.data:Promise.resolve(t.data),Wu(e.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}),ad=(rd.create=(e,t)=>new rd({type:e,typeName:l.ZodPromise,...s(t)}),class extends o{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===l.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{E(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type)return e=r.transform(n.data,a),n.common.async?Promise.resolve(e).then(async e=>{return"aborted"===t.value||"aborted"===(e=await this._def.schema._parseAsync({data:e,path:n.path,parent:n})).status?x:"dirty"===e.status||"dirty"===t.value?Zu(e.value):e}):"aborted"===t.value||"aborted"===(e=this._def.schema._parseSync({data:e,path:n.path,parent:n})).status?x:"dirty"===e.status||"dirty"===t.value?Zu(e.value):e;if("refinement"===r.type){const i=e=>{var t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};return!1===n.common.async?"aborted"===(e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n})).status?x:("dirty"===e.status&&t.dirty(),i(e.value),{status:t.value,value:e.value}):this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>"aborted"===e.status?x:("dirty"===e.status&&t.dirty(),i(e.value).then(()=>({status:t.value,value:e.value}))))}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>qu(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qu(e))return e;e=r.transform(e.value,a);if(e instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:e}}d.assertNever(r)}}),id=(ad.create=(e,t,n)=>new ad({schema:e,typeName:l.ZodEffects,effect:t,...s(n)}),ad.createWithPreprocess=(e,t,n)=>new ad({schema:t,effect:{type:"preprocess",transform:e},typeName:l.ZodEffects,...s(n)}),class extends o{_parse(e){return this._getType(e)===g.undefined?Wu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}),od=(id.create=(e,t)=>new id({innerType:e,typeName:l.ZodOptional,...s(t)}),class extends o{_parse(e){return this._getType(e)===g.null?Wu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}),sd=(od.create=(e,t)=>new od({innerType:e,typeName:l.ZodNullable,...s(t)}),class extends o{_parse(e){e=this._processInputParams(e).ctx;let t=e.data;return e.parsedType===g.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}),ld=(sd.create=(e,t)=>new sd({innerType:e,typeName:l.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...s(t)}),class extends o{_parse(e){e=this._processInputParams(e).ctx;const t={...e,common:{...e.common,issues:[]}};e=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return Xu(e)?e.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ju(t.common.issues)},input:t.data})})):{status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ju(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}}),ud=(ld.create=(e,t)=>new ld({innerType:e,typeName:l.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...s(t)}),class extends o{_parse(e){var t;return this._getType(e)!==g.nan?(E(t=this._getOrReturnCtx(e),{code:w.invalid_type,expected:g.nan,received:t.parsedType}),x):{status:"valid",value:e.data}}}),a=(ud.create=e=>new ud({typeName:l.ZodNaN,...s(e)}),Symbol("zod_brand")),cd=class extends o{_parse(e){var e=this._processInputParams(e)["ctx"],t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},dd=class extends o{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);return n.common.async?(async()=>{var e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),Zu(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})():"aborted"===(e=this._def.in._parseSync({data:n.data,path:n.path,parent:n})).status?x:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}static create(e,t){return new dd({in:e,out:t,typeName:l.ZodPipeline})}},md=class extends o{_parse(e){e=this._def.innerType._parse(e);const t=e=>(qu(e)&&(e.value=Object.freeze(e.value)),e);return Xu(e)?e.then(e=>t(e)):t(e)}unwrap(){return this._def.innerType}};function fd(r,a={},i){return r?Rc.create().superRefine((e,t)=>{var n;r(e)||(n=null==(n=null!=(n=(e="function"==typeof a?a(e):"string"==typeof a?{message:a}:a).fatal)?n:i)||n,t.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:n}))}):Rc.create()}md.create=(e,t)=>new md({innerType:e,typeName:l.ZodReadonly,...s(t)});var l,X={object:jc.lazycreate},hd=((n=l=l||{}).ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly",kc.create),pd=Ic.create,r=Cc.create,gd=Nc.create,t=Tc.create,Us=Fc.create,n=jc.create,yd=jc.strictCreate,vd=zc.create,u=Uc.create,bd=Hc.create,wd=Zc.create,Ed=Wc.create,Sd=Yc.create,xd=qc.create,kd=Xc.create,_d=Gc.create,Id=Qc.create,Cd=td.create,Nd=rd.create,Td=ad.create,Od=id.create,Md=od.create,Ad=ad.createWithPreprocess,Rd=dd.create,a=Object.freeze({__proto__:null,defaultErrorMap:zu,setErrorMap:function(e){Bu=e},getErrorMap:Uu,makeIssue:$u,EMPTY_PATH:[],addIssueToContext:E,ParseStatus:Hu,INVALID:x,DIRTY:Zu,OK:Wu,isAborted:Ku,isDirty:Yu,isValid:qu,isAsync:Xu,get util(){return d},get objectUtil(){return Ru},ZodParsedType:g,getParsedType:Vu,ZodType:o,datetimeRegex:wc,ZodString:kc,ZodNumber:Ic,ZodBigInt:Cc,ZodBoolean:Nc,ZodDate:Tc,ZodSymbol:Oc,ZodUndefined:Mc,ZodNull:Ac,ZodAny:Rc,ZodUnknown:Dc,ZodNever:Pc,ZodVoid:Lc,ZodArray:Fc,ZodObject:jc,ZodUnion:zc,ZodDiscriminatedUnion:Uc,ZodIntersection:Hc,ZodTuple:Zc,ZodRecord:Wc,ZodMap:Kc,ZodSet:Yc,ZodFunction:qc,ZodLazy:Xc,ZodLiteral:Gc,ZodEnum:Qc,ZodNativeEnum:td,ZodPromise:rd,ZodEffects:ad,ZodTransformer:ad,ZodOptional:id,ZodNullable:od,ZodDefault:sd,ZodCatch:ld,ZodNaN:ud,BRAND:a,ZodBranded:cd,ZodPipeline:dd,ZodReadonly:md,custom:fd,Schema:o,ZodSchema:o,late:X,get ZodFirstPartyTypeKind(){return l},coerce:{string:e=>kc.create({...e,coerce:!0}),number:e=>Ic.create({...e,coerce:!0}),boolean:e=>Nc.create({...e,coerce:!0}),bigint:e=>Cc.create({...e,coerce:!0}),date:e=>Tc.create({...e,coerce:!0})},any:Rc.create,array:Us,bigint:r,boolean:gd,date:t,discriminatedUnion:u,effect:Td,enum:Id,function:xd,instanceof:(t,e={message:"Input not instance of "+t.name})=>fd(e=>e instanceof t,e),intersection:bd,lazy:kd,literal:_d,map:Kc.create,nan:ud.create,nativeEnum:Cd,never:Pc.create,null:Ac.create,nullable:Md,number:pd,object:n,oboolean:()=>gd().optional(),onumber:()=>pd().optional(),optional:Od,ostring:()=>hd().optional(),pipeline:Rd,preprocess:Ad,promise:Nd,record:Ed,set:Sd,strictObject:yd,string:hd,symbol:Oc.create,transformer:Td,tuple:wd,undefined:Mc.create,union:vd,unknown:Dc.create,void:Lc.create,NEVER:x,ZodIssueCode:w,quotelessJson:e=>{return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:ju}),Dd=a.object({uri:a.string().nonempty({message:"Artist URI is required"}).refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"})}).strict().readonly();var Pd=50,Ld=a.object({uris:a.array(a.string()).nonempty().max(Pd).refine(e=>e.every(e=>Spicetify.URI.isArtist(e)),{message:"Invalid artist URIs"})}).strict().readonly();var Fd=a.object({uris:a.array(a.string()).nonempty().max(100).refine(e=>e.every(e=>Spicetify.URI.isTrack(e)),{message:"Invalid tracks URIs"})}).strict().readonly();function Vd(t,n){var r=[];for(let e=0;e<t.length;e+=n)r.push(t.slice(e,e+n));return r}function jd(e,r){return e.filter((t,e,n)=>e===n.findIndex(e=>r(e)===r(t)))}async function zd(t){await new Promise(e=>setTimeout(e,t))}var X="playlist-maker",Bd=X+":workflows",Ud=X+":artist-genres";function $d(){return JSON.parse(Spicetify.LocalStorage.get(Bd)??"[]")}function Hd(){var e=JSON.parse(Spicetify.LocalStorage.get(Ud)??"[]");return new Map(e)}function Zd(e,t){return{value:e,expiry:(new Date).getTime()+t}}var Wd=15552e6;async function Kd(e){var t;for(const a of Vd(e.filter(e=>!Spicetify.URI.isLocalTrack(e.uri)),100)){t={uris:a.map(e=>e.uri)},Fd.parse(t);var n=await(await Lu().withPath("/audio-features").withEndpointIdentifier("/audio-features").withQueryParameters({ids:t.uris.map(e=>Fu(Spicetify.URI.fromString(e))).join(",")}).send()).body.audio_features;for(const i of a){var r=n.find(e=>null!==e&&e.uri===i.uri);r&&(i.audioFeatures=r)}await zd(20)}}async function Yd(){var e=y().LibraryAPI,t=(await e.getTracks()).unfilteredTotalLength,e=(await e.getTracks({limit:t,offset:0})).items.filter(e=>!Spicetify.URI.isLocalTrack(e.uri));const n=function(e){var t,n,r=new Date;for([t,n]of e.entries())n.expiry<r.getTime()&&e.delete(t);return e}(Hd());let r=jd(e.flatMap(e=>e.artists),e=>e.uri);r=r.filter(e=>!n.has(e.uri)),console.log(`Getting genres for ${r.length.toFixed()} artists`);var a=[];for(const s of Vd(r,Pd)){i={uris:s.map(e=>e.uri)},Ld.parse(i);var i=await(await Lu().withPath("/artists").withEndpointIdentifier("/artists").withQueryParameters({ids:i.uris.map(e=>Fu(Spicetify.URI.fromString(e))).join(",")}).send()).body.artists;a.push(...i),await zd(20)}for(const l of a)n.set(l.uri,Zd(l.genres,Wd));for(const u of r.filter(e=>!n.has(e.uri))){o={uri:u.uri},Dd.parse(o),o=Fu(Spicetify.URI.fromString(o.uri));var o=await(await Lu().withPath("/artists/"+o).withEndpointIdentifier("/artists/{id}").send()).body;console.log(`Artist ${u.name} is now `+o.name),n.set(u.uri,Zd(o.genres,Wd))}return t=n,Spicetify.LocalStorage.set(Ud,JSON.stringify(Array.from(t))),new Map(Array.from(n).map(([e,t])=>[e,t.value]))}var Us=a.object({isExecuting:a.literal(!0).optional()}).strict(),r=class{constructor(e,t,n){this.currentNodeId=e,this.sourceNodeIds=t,this.data=n}updateNodeData=Zy.getState().updateNodeData;resultCache=null;async getResults(e){e=await this.getInputs(e);return this.setExecuting(!0),this.resultCache??=await this.getResultsInternal(e),this.setExecuting(void 0),this.resultCache}async getInputs(e){var t,n,r={};for([t,n]of Object.entries(this.sourceNodeIds)){r[t]=[];for(const i of n){var a=e[i];if(void 0===a)throw new Error(`Processor for node ${i} not found`);r[t].push(...await a.getResults(e))}}return r}setExecuting(e){this.updateNodeData(this.currentNodeId,{isExecuting:e})}},qd=a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict(),Xd=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.acousticness>this.data.range.min&&e.audioFeatures.acousticness<this.data.range.max);return e}},Gd=a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict(),Jd=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.danceability>this.data.range.min&&e.audioFeatures.danceability<this.data.range.max);return e}},Qd=a.object({minDuration:a.number().int().optional(),maxDuration:a.number().int().optional()}).merge(Us).strict(),em=class extends r{getResultsInternal(e){var e=e.source??[],{minDuration:t,maxDuration:n}=this.data;const r=void 0!==t?6e4*t:void 0,a=void 0!==n?6e4*n:void 0;t=e.filter(e=>{e=e.duration;return(void 0===r||e>=r)&&(void 0===a||e<=a)});return Promise.resolve(t)}},tm=a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict(),nm=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.energy>this.data.range.min&&e.audioFeatures.energy<this.data.range.max);return e}},rm=a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict(),am=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.instrumentalness>this.data.range.min&&e.audioFeatures.instrumentalness<this.data.range.max);return e}},im=a.object({isPlayable:a.boolean()}).merge(Us).strict(),om=class extends r{async getResultsInternal(e){e=(e.source??[]).filter(e=>e.isPlayable===this.data.isPlayable);return Promise.resolve(e)}},sm=a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict(),lm=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.liveness>this.data.range.min&&e.audioFeatures.liveness<this.data.range.max);return e}},um=a.object({range:a.object({min:a.number().min(-60).max(10),max:a.number().min(-60).max(10)})}).merge(Us).strict(),cm=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.loudness>this.data.range.min&&e.audioFeatures.loudness<this.data.range.max);return e}},dm=a.object({mode:a.union([a.literal("0"),a.literal("1")])}).merge(Us).strict(),mm=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.mode===+this.data.mode);return e}};async function fm(e,t){var{data:e,errors:t}=await Spicetify.GraphQL.Request(e,t);if(t)throw new Error(t.map(e=>e.message).join("\n"));return e}var hm=a.object({uri:a.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:a.number().nonnegative().int(),limit:a.number().nonnegative().int().max(100),locale:a.string().nonempty()}).strict().readonly();async function pm(e){hm.parse(e);var t=Spicetify.GraphQL.Definitions["getAlbum"];return fm(t,e)}var t=class extends Error{},gm=class extends t{constructor(e){super("Invalid DateTime: "+e.toMessage())}},ym=class extends t{constructor(e){super("Invalid Interval: "+e.toMessage())}},vm=class extends t{constructor(e){super("Invalid Duration: "+e.toMessage())}},bm=class extends t{},wm=class extends t{constructor(e){super("Invalid unit "+e)}},Em=class extends t{},Sm=class extends t{constructor(){super("Zone is an abstract class")}},u="numeric",Id="short",xd="long",xm={year:u,month:u,day:u},km={year:u,month:Id,day:u},_m={year:u,month:Id,day:u,weekday:Id},Im={year:u,month:xd,day:u},Cm={year:u,month:xd,day:u,weekday:xd},Nm={hour:u,minute:u},Tm={hour:u,minute:u,second:u},Om={hour:u,minute:u,second:u,timeZoneName:Id},Mm={hour:u,minute:u,second:u,timeZoneName:xd},Am={hour:u,minute:u,hourCycle:"h23"},Rm={hour:u,minute:u,second:u,hourCycle:"h23"},Dm={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:Id},Pm={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:xd},Lm={year:u,month:u,day:u,hour:u,minute:u},Fm={year:u,month:u,day:u,hour:u,minute:u,second:u},Vm={year:u,month:Id,day:u,hour:u,minute:u},jm={year:u,month:Id,day:u,hour:u,minute:u,second:u},zm={year:u,month:Id,day:u,weekday:Id,hour:u,minute:u},Bm={year:u,month:xd,day:u,hour:u,minute:u,timeZoneName:Id},Um={year:u,month:xd,day:u,hour:u,minute:u,second:u,timeZoneName:Id},$m={year:u,month:xd,day:u,weekday:xd,hour:u,minute:u,timeZoneName:xd},Hm={year:u,month:xd,day:u,weekday:xd,hour:u,minute:u,second:u,timeZoneName:xd},Zm=class{get type(){throw new Sm}get name(){throw new Sm}get ianaName(){return this.name}get isUniversal(){throw new Sm}offsetName(e,t){throw new Sm}formatOffset(e,t){throw new Sm}offset(e){throw new Sm}equals(e){throw new Sm}get isValid(){throw new Sm}},Wm=null,Km=class extends Zm{static get instance(){return Wm=null===Wm?new Km:Wm}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Mh(e,t,n)}formatOffset(e,t){return Ph(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}},Ym=new Map;function qm(e){let t=Ym.get(e);return void 0===t&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Ym.set(e,t)),t}var Xm={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Gm(e,t){var e=e.format(t).replace(/\u200E/g,""),[,t,e,n,r,a,i,o]=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e);return[n,t,e,r,a,i,o]}function Jm(e,t){var n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){var{type:a,value:i}=n[e],o=Xm[a];"era"===a?r[o]=i:k(o)||(r[o]=parseInt(i,10))}return r}var Qm=new Map,ef=class extends Zm{static create(e){let t=Qm.get(e);return void 0===t&&Qm.set(e,t=new ef(e)),t}static resetCache(){Qm.clear(),Ym.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=ef.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Mh(e,t,n,this.name)}formatOffset(e,t){return Ph(this.offset(e),t)}offset(e){if(!this.valid)return NaN;e=new Date(e);if(isNaN(e))return NaN;var t=qm(this.name);let[n,r,a,i,o,s,l]=(t.formatToParts?Jm:Gm)(t,e);t=+e,e=t%1e3;return(Ch({year:n="BC"===i?1-Math.abs(n):n,month:r,day:a,hour:24===o?0:o,minute:s,second:l,millisecond:0})-(t-=0<=e?e:1e3+e))/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}},tf={};function nf(e,t={}){var n=JSON.stringify([e,t]);let r=tf[n];return r||(r=new Intl.ListFormat(e,t),tf[n]=r),r}var rf=new Map;function af(e,t={}){var n=JSON.stringify([e,t]);let r=rf.get(n);return void 0===r&&(r=new Intl.DateTimeFormat(e,t),rf.set(n,r)),r}var of=new Map;function sf(e,t={}){var n=JSON.stringify([e,t]);let r=of.get(n);return void 0===r&&(r=new Intl.NumberFormat(e,t),of.set(n,r)),r}var lf=new Map;function uf(e,t={}){const{base:n,...r}=t;var a=JSON.stringify([e,r]);let i=lf.get(a);return void 0===i&&(i=new Intl.RelativeTimeFormat(e,t),lf.set(a,i)),i}var cf=null;function df(){return cf=cf||(new Intl.DateTimeFormat).resolvedOptions().locale}var mf=new Map;function ff(e){let t=mf.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),mf.set(e,t)),t}var hf=new Map;function pf(e){let t=hf.get(e);var n;return t||(n=new Intl.Locale(e),"minimalDays"in(t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo)||(t={..._f,...t}),hf.set(e,t)),t}function gf(r){var a=r.indexOf("-x-"),a=(r=-1!==a?r.substring(0,a):r).indexOf("-u-");if(-1===a)return[r];{let t,n;try{t=af(r).resolvedOptions(),n=r}catch(e){r=r.substring(0,a);t=af(r).resolvedOptions(),n=r}var{numberingSystem:a,calendar:r}=t;return[n,a,r]}}function yf(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+="-ca-"+n),t)&&(e+="-nu-"+t),e}function vf(t){var n=[];for(let e=1;e<=12;e++){var r=_.utc(2009,e,1);n.push(t(r))}return n}function bf(t){var n=[];for(let e=1;e<=7;e++){var r=_.utc(2016,11,13+e);n.push(t(r))}return n}function wf(e,t,n,r){e=e.listingMode();return"error"===e?null:("en"===e?n:r)(t)}function Ef(e){return(!e.numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===ff(e.locale).numberingSystem)}var Sf=class{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:a,...i}=n;(!t||0<Object.keys(i).length)&&(t={useGrouping:!1,...n},0<n.padTo&&(t.minimumIntegerDigits=n.padTo),this.inf=sf(e,t))}format(e){var t;return this.inf?(t=this.floor?Math.floor(e):e,this.inf.format(t)):bh(this.floor?Math.floor(e):xh(e,3),this.padTo)}},xf=class{constructor(e,t,n){this.opts=n;let r=this.originalZone=void 0;this.opts.timeZone?this.dt=e:"fixed"===e.zone.type?(n=0<=(n=e.offset/60*-1)?"Etc/GMT+"+n:"Etc/GMT"+n,0!==e.offset&&ef.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)):"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);n={...this.opts};n.timeZone=n.timeZone||r,this.dtf=af(t,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){var e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{var t;return"timeZoneName"===e.type?(t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName}),{...e,value:t}):e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},kf=class{constructor(e,t,n){this.opts={style:"long",...n},!t&&mh()&&(this.rtf=uf(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):ep(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},_f={firstDay:1,minimalDays:4,weekend:[6,7]},If=class{static fromOpts(e){return If.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,a=!1){e=e||Zf.defaultLocale,a=e||(a?"en-US":df()),t=t||Zf.defaultNumberingSystem,n=n||Zf.defaultOutputCalendar,r=yh(r)||Zf.defaultWeekSettings;return new If(a,t,n,r,e)}static resetCache(){cf=null,rf.clear(),of.clear(),lf.clear(),mf.clear(),hf.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return If.create(e,t,n,r)}constructor(e,t,n,r,a){var[e,i,o]=gf(e);this.locale=e,this.numberingSystem=t||i||null,this.outputCalendar=n||o||null,this.weekSettings=r,this.intl=yf(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=Ef(this)),this.fastNumbersCached}listingMode(){var e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?If.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,yh(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(n,r=!1){return wf(this,n,zh,()=>{const t=r?{month:n,day:"numeric"}:{month:n},e=r?"format":"standalone";return this.monthsCache[e][n]||(this.monthsCache[e][n]=vf(e=>this.extract(e,t,"month"))),this.monthsCache[e][n]})}weekdays(n,r=!1){return wf(this,n,Hh,()=>{const t=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},e=r?"format":"standalone";return this.weekdaysCache[e][n]||(this.weekdaysCache[e][n]=bf(e=>this.extract(e,t,"weekday"))),this.weekdaysCache[e][n]})}meridiems(){return wf(this,void 0,()=>Zh,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[_.utc(2016,11,13,9),_.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(e){return wf(this,e,qh,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[_.utc(-40,1,1),_.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,n){e=this.dtFormatter(e,t).formatToParts().find(e=>e.type.toLowerCase()===n);return e?e.value:null}numberFormatter(e={}){return new Sf(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new xf(e,this.intl,t)}relFormatter(e={}){return new kf(this.intl,this.isEnglish(),e)}listFormatter(e={}){return nf(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||ff(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings||(fh()?pf(this.locale):_f)}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}},Cf=null,Nf=class extends Zm{static get utcInstance(){return Cf=null===Cf?new Nf(0):Cf}static instance(e){return 0===e?Nf.utcInstance:new Nf(e)}static parseSpecifier(e){if(e){e=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new Nf(Ah(e[1],e[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":"UTC"+Ph(this.fixed,"narrow")}get ianaName(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+Ph(-this.fixed,"narrow")}offsetName(){return this.name}formatOffset(e,t){return Ph(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}},Tf=class extends Zm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Of(e,t){var n;return k(e)||null===e?t:e instanceof Zm?e:"string"==typeof e?"default"===(n=e.toLowerCase())?t:"local"===n||"system"===n?Km.instance:"utc"===n||"gmt"===n?Nf.utcInstance:Nf.parseSpecifier(n)||ef.create(e):uh(e)?Nf.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new Tf(e)}var Mf={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Af={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Rf=Mf.hanidec.replace(/[\[|\]]/g,"").split("");var Df=new Map;function Pf(){Df.clear()}function Lf({numberingSystem:e},t=""){e=e||"latn";let n=Df.get(e),r=(void 0===n&&(n=new Map,Df.set(e,n)),n.get(t));return void 0===r&&(r=new RegExp(""+Mf[e]+t),n.set(t,r)),r}var Ff,Vf=()=>Date.now(),jf="system",zf=null,Bf=null,Uf=null,$f=60,Hf=null,Zf=class{static get now(){return Vf}static set now(e){Vf=e}static set defaultZone(e){jf=e}static get defaultZone(){return Of(jf,Km.instance)}static get defaultLocale(){return zf}static set defaultLocale(e){zf=e}static get defaultNumberingSystem(){return Bf}static set defaultNumberingSystem(e){Bf=e}static get defaultOutputCalendar(){return Uf}static set defaultOutputCalendar(e){Uf=e}static get defaultWeekSettings(){return Hf}static set defaultWeekSettings(e){Hf=yh(e)}static get twoDigitCutoffYear(){return $f}static set twoDigitCutoffYear(e){$f=e%100}static get throwOnInvalid(){return Ff}static set throwOnInvalid(e){Ff=e}static resetCaches(){If.resetCache(),ef.resetCache(),_.resetCache(),Pf()}},Wf=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?this.reason+": "+this.explanation:this.reason}},Kf=[0,31,59,90,120,151,181,212,243,273,304,334],Yf=[0,31,60,91,121,152,182,213,244,274,305,335];function qf(e,t){return new Wf("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Xf(e,t,n){t=new Date(Date.UTC(e,t-1,n)),e<100&&0<=e&&t.setUTCFullYear(t.getUTCFullYear()-1900),n=t.getUTCDay();return 0===n?7:n}function Gf(e,t,n){return n+(kh(e)?Yf:Kf)[t-1]}function Jf(e,t){var e=kh(e)?Yf:Kf,n=e.findIndex(e=>e<t);return{month:n+1,day:t-e[n]}}function Qf(e,t){return(e-t+7)%7+1}function eh(e,t=4,n=1){var{year:r,month:a,day:i}=e,o=Gf(r,a,i),a=Qf(Xf(r,a,i),n);let s=Math.floor((o-a+14-t)/7),l;return s<1?(l=r-1,s=Th(l,t,n)):s>Th(r,t,n)?(l=r+1,s=1):l=r,{weekYear:l,weekNumber:s,weekday:a,...Lh(e)}}function th(e,t=4,n=1){var{weekYear:r,weekNumber:a,weekday:i}=e,n=Qf(Xf(r,1,t),n),o=_h(r);let s=7*a+i-n-7+t,l;s<1?(l=r-1,s+=_h(l)):s>o?(l=r+1,s-=_h(r)):l=r;var{month:a,day:i}=Jf(l,s);return{year:l,month:a,day:i,...Lh(e)}}function nh(e){var{year:t,month:n,day:r}=e;return{year:t,ordinal:Gf(t,n,r),...Lh(e)}}function rh(e){var{year:t,ordinal:n}=e,{month:n,day:r}=Jf(t,n);return{year:t,month:n,day:r,...Lh(e)}}function ah(e,t){if(k(e.localWeekday)&&k(e.localWeekNumber)&&k(e.localWeekYear))return{minDaysInFirstWeek:4,startOfWeek:1};if(k(e.weekday)&&k(e.weekNumber)&&k(e.weekYear))return k(e.localWeekday)||(e.weekday=e.localWeekday),k(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),k(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()};throw new bm("Cannot mix locale-based week fields with ISO-based week fields")}function ih(e,t=4,n=1){var r=ch(e.weekYear),t=vh(e.weekNumber,1,Th(e.weekYear,t,n)),n=vh(e.weekday,1,7);return r?t?!n&&qf("weekday",e.weekday):qf("week",e.weekNumber):qf("weekYear",e.weekYear)}function oh(e){var t=ch(e.year),n=vh(e.ordinal,1,_h(e.year));return t?!n&&qf("ordinal",e.ordinal):qf("year",e.year)}function sh(e){var t=ch(e.year),n=vh(e.month,1,12),r=vh(e.day,1,Ih(e.year,e.month));return t?n?!r&&qf("day",e.day):qf("month",e.month):qf("year",e.year)}function lh(e){var{hour:e,minute:t,second:n,millisecond:r}=e,a=vh(e,0,23)||24===e&&0===t&&0===n&&0===r,i=vh(t,0,59),o=vh(n,0,59),s=vh(r,0,999);return a?i?o?!s&&qf("millisecond",r):qf("second",n):qf("minute",t):qf("hour",e)}function k(e){return void 0===e}function uh(e){return"number"==typeof e}function ch(e){return"number"==typeof e&&e%1==0}function dh(e){return"[object Date]"===Object.prototype.toString.call(e)}function mh(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function fh(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function hh(e){return Array.isArray(e)?e:[e]}function ph(e,n,r){if(0!==e.length)return e.reduce((e,t)=>{t=[n(t),t];return e&&r(e[0],t[0])===e[0]?e:t},null)[1]}function gh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yh(e){if(null==e)return null;if("object"!=typeof e)throw new Em("Week settings must be an object");if(vh(e.firstDay,1,7)&&vh(e.minimalDays,1,7)&&Array.isArray(e.weekend)&&!e.weekend.some(e=>!vh(e,1,7)))return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)};throw new Em("Invalid week settings")}function vh(e,t,n){return ch(e)&&t<=e&&e<=n}function bh(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0")}function wh(e){if(!k(e)&&null!==e&&""!==e)return parseInt(e,10)}function Eh(e){if(!k(e)&&null!==e&&""!==e)return parseFloat(e)}function Sh(e){if(!k(e)&&null!==e&&""!==e)return e=1e3*parseFloat("0."+e),Math.floor(e)}function xh(e,t,n=!1){t=10**t;return(n?Math.trunc:Math.round)(e*t)/t}function kh(e){return e%4==0&&(e%100!=0||e%400==0)}function _h(e){return kh(e)?366:365}function Ih(e,t){var n,r=(r=t-1)-(n=12)*Math.floor(r/n)+1;return 2==r?kh(e+(t-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Ch(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&0<=e.year&&(t=new Date(t)).setUTCFullYear(e.year,e.month-1,e.day),+t}function Nh(e,t,n){return-Qf(Xf(e,1,t),n)+t-1}function Th(e,t=4,n=1){var r=Nh(e,t,n),t=Nh(e+1,t,n);return(_h(e)-r+t)/7}function Oh(e){return 99<e?e:e>Zf.twoDigitCutoffYear?1900+e:2e3+e}function Mh(e,t,n,r=null){var e=new Date(e),a={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},r=(r&&(a.timeZone=r),{timeZoneName:t,...a}),t=new Intl.DateTimeFormat(n,r).formatToParts(e).find(e=>"timezonename"===e.type.toLowerCase());return t?t.value:null}function Ah(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);e=parseInt(t,10)||0,t=n<0||Object.is(n,-0)?-e:e;return 60*n+t}function Rh(e){var t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new Em("Invalid unit value "+e);return t}function Dh(e,t){var n,r={};for(const a in e)gh(e,a)&&null!=(n=e[a])&&(r[t(a)]=Rh(n));return r}function Ph(e,t){var n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),a=0<=e?"+":"-";switch(t){case"short":return a+bh(n,2)+":"+bh(r,2);case"narrow":return a+n+(0<r?":"+r:"");case"techie":return a+bh(n,2)+bh(r,2);default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Lh(e){return n=e,["hour","minute","second","millisecond"].reduce((e,t)=>(e[t]=n[t],e),{});var n}var Fh=["January","February","March","April","May","June","July","August","September","October","November","December"],Vh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],jh=["J","F","M","A","M","J","J","A","S","O","N","D"];function zh(e){switch(e){case"narrow":return[...jh];case"short":return[...Vh];case"long":return[...Fh];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Bh=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Uh=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],$h=["M","T","W","T","F","S","S"];function Hh(e){switch(e){case"narrow":return[...$h];case"short":return[...Uh];case"long":return[...Bh];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Zh=["AM","PM"],Wh=["Before Christ","Anno Domini"],Kh=["BC","AD"],Yh=["B","A"];function qh(e){switch(e){case"narrow":return[...Yh];case"short":return[...Kh];case"long":return[...Wh];default:return null}}function Xh(e){return Zh[e.hour<12?0:1]}function Gh(e,t){return Hh(t)[e.weekday-1]}function Jh(e,t){return zh(t)[e.month-1]}function Qh(e,t){return qh(t)[e.year<0?0:1]}function ep(e,t,n="always",r=!1){var a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&i){var o="days"===e;switch(t){case 1:return o?"tomorrow":"next "+a[e][0];case-1:return o?"yesterday":"last "+a[e][0];case 0:return o?"today":"this "+a[e][0]}}var n=Object.is(t,-0)||t<0,i=Math.abs(t),t=1===i,s=a[e],r=r?!t&&s[2]||s[1]:t?a[e][0]:e;return n?i+` ${r} ago`:`in ${i} `+r}function tp(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}var np={D:xm,DD:km,DDD:Im,DDDD:Cm,t:Nm,tt:Tm,ttt:Om,tttt:Mm,T:Am,TT:Rm,TTT:Dm,TTTT:Pm,f:Lm,ff:Vm,fff:Bm,ffff:$m,F:Fm,FF:jm,FFF:Um,FFFF:Hm},rp=class{static create(e,t={}){return new rp(e,t)}static parseFormat(t){let n=null,r="",a=!1;var i=[];for(let e=0;e<t.length;e++){var o=t.charAt(e);"'"===o?(0<r.length&&i.push({literal:a||/^\s+$/.test(r),val:r}),n=null,r="",a=!a):a||o===n?r+=o:(0<r.length&&i.push({literal:/^\s+$/.test(r),val:r}),r=o,n=o)}return 0<r.length&&i.push({literal:a||/^\s+$/.test(r),val:r}),i}static macroTokenToFormatOpts(e){return np[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){var n;return this.opts.forceSimple?bh(e,t):(n={...this.opts},0<t&&(n.padTo=t),this.loc.numberFormatter(n).format(e))}formatDateTimeFromString(n,e){const r="en"===this.loc.listingMode(),t=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,a=(e,t)=>this.loc.extract(n,e,t),i=e=>n.isOffsetFixed&&0===n.offset&&e.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,e.format):"",o=()=>r?Xh(n):a({hour:"numeric",hourCycle:"h12"},"dayperiod"),s=(e,t)=>r?Jh(n,e):a(t?{month:e}:{month:e,day:"numeric"},"month"),l=(e,t)=>r?Gh(n,e):a(t?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday"),u=e=>{var t=rp.macroTokenToFormatOpts(e);return t?this.formatWithSystemDefault(n,t):e},c=e=>r?Qh(n,e):a({era:e},"era");return tp(rp.parseFormat(e),e=>{switch(e){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12==0?12:n.hour%12);case"hh":return this.num(n.hour%12==0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return o();case"d":return t?a({day:"numeric"},"day"):this.num(n.day);case"dd":return t?a({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return t?a({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return t?a({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return t?a({month:"numeric"},"month"):this.num(n.month);case"MM":return t?a({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return t?a({year:"numeric"},"year"):this.num(n.year);case"yy":return t?a({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return t?a({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return t?a({year:"numeric"},"year"):this.num(n.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return u(e)}})}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=rp.parseFormat(t),a=r.reduce((e,{literal:t,val:n})=>t?e:e.concat(n),[]),i=e.shiftTo(...a.map(n).filter(e=>e));return tp(r,(o=i,e=>{var t=n(e);return t?this.num(o.get(t),e.length):e}));var o}},bd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ap(...e){e=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${e}$`)}function ip(...e){return i=>e.reduce(([e,t,n],r)=>{var[r,n,a]=r(i,n);return[{...e,...r},n||t,a]},[{},null,1]).slice(0,2)}function op(e,...t){if(null!=e)for(var[n,r]of t){n=n.exec(e);if(n)return r(n)}return[null,null]}function sp(...a){return(e,t)=>{var n={};let r;for(r=0;r<a.length;r++)n[a[r]]=wh(e[t+r]);return[n,null,t+r]}}kd=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,_d=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Cd=RegExp(_d.source+`(?:${kd.source}?(?:\\[(${bd.source})\\])?)?`),Md=RegExp(`(?:T${Cd.source})?`),n=sp("weekYear","weekNumber","weekDay"),Od=sp("year","ordinal"),Rd=RegExp(_d.source+` ?(?:${kd.source}|(${bd.source}))?`),Ad=RegExp(`(?: ${Rd.source})?`);function lp(e,t,n){e=e[t];return k(e)?n:wh(e)}function up(e,t){return[{hours:lp(e,t,0),minutes:lp(e,t+1,0),seconds:lp(e,t+2,0),milliseconds:Sh(e[t+3])},null,t+4]}function cp(e,t){var n=!e[t]&&!e[t+1],e=Ah(e[t+1],e[t+2]);return[{},n?null:Nf.instance(e),t+3]}function dp(e,t){return[{},e[t]?ef.create(e[t]):null,t+1]}var mp=RegExp(`^T?${_d.source}$`),fp=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function hp(e){var[e,t,n,r,a,i,o,s,l]=e;const u="-"===e[0];var e=s&&"-"===s[0],c=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:c(Eh(t)),months:c(Eh(n)),weeks:c(Eh(r)),days:c(Eh(a)),hours:c(Eh(i)),minutes:c(Eh(o)),seconds:c(Eh(s),"-0"===s),milliseconds:c(Sh(l),e)}]}var pp={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function gp(e,t,n,r,a,i,o){t={year:2===t.length?Oh(wh(t)):wh(t),month:Vh.indexOf(n)+1,day:wh(r),hour:wh(a),minute:wh(i)};return o&&(t.second=wh(o)),e&&(t.weekday=3<e.length?Bh.indexOf(e)+1:Uh.indexOf(e)+1),t}var yp=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function vp(e){var[,e,t,n,r,a,i,o,s,l,u,c]=e,e=gp(e,r,n,t,a,i,o);let d;return d=s?pp[s]:l?0:Ah(u,c),[e,new Nf(d)]}var bp=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,wp=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ep=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Sp(e){var[,e,t,n,r,a,i,o]=e;return[gp(e,r,n,t,a,i,o),Nf.utcInstance]}function xp(e){var[,e,t,n,r,a,i,o]=e;return[gp(e,o,t,n,r,a,i),Nf.utcInstance]}var kp=ap(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Md),_p=ap(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Md),Ip=ap(/(\d{4})-?(\d{3})/,Md),Cp=ap(Cd),Np=ip(function(e,t){return[{year:lp(e,t),month:lp(e,t+1,1),day:lp(e,t+2,1)},null,t+3]},up,cp,dp),Tp=ip(n,up,cp,dp),Op=ip(Od,up,cp,dp),Mp=ip(up,cp,dp);function Ap(e){return op(e,[kp,Np],[_p,Tp],[Ip,Op],[Cp,Mp])}function Rp(e){return op(e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[yp,vp])}function Dp(e){return op(e,[bp,Sp],[wp,Sp],[Ep,xp])}function Pp(e){return op(e,[fp,hp])}var Lp=ip(up);function Fp(e){return op(e,[mp,Lp])}var Vp=ap(/(\d{4})-(\d\d)-(\d\d)/,Ad),jp=ap(Rd),zp=ip(up,cp,dp);function Bp(e){return op(e,[Vp,Np],[jp,zp])}var Up="Invalid Duration",Nd={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},$p={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...Nd},Ed=365.2425,Sd=30.436875,Hp={years:{quarters:4,months:12,weeks:Ed/7,days:Ed,hours:24*Ed,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:Ed/28,days:Ed/4,hours:24*Ed/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:Sd/7,days:Sd,hours:24*Sd,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...Nd},Zp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Wp=Zp.slice(0).reverse();function Kp(e,t,n=!1){n={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new c(n)}function Yp(e,t){let n=t.milliseconds??0;for(const r of Wp.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function qp(a,i){const o=Yp(a,i)<0?-1:1;Zp.reduceRight((e,t)=>{var n,r;return k(i[t])?e:(e&&(r=i[e]*o,n=a[t][e],r=Math.floor(r/n),i[t]+=r*o,i[e]-=r*n*o),t)},null),Zp.reduce((e,t)=>{var n;return k(i[t])?e:(e&&(n=i[e]%1,i[e]-=n,i[t]+=n*a[e][t]),t)},null)}function Xp(e){var t,n,r={};for([t,n]of Object.entries(e))0!==n&&(r[t]=n);return r}var c=class{constructor(e){var t="longterm"===e.conversionAccuracy||!1;let n=t?Hp:$p;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||If.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return c.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new Em("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new c({values:Dh(e,c.normalizeUnit),loc:If.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(uh(e))return c.fromMillis(e);if(c.isDuration(e))return e;if("object"==typeof e)return c.fromObject(e);throw new Em(`Unknown duration argument ${e} of type `+typeof e)}static fromISO(e,t){var[n]=Pp(e);return n?c.fromObject(n,t):c.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){var[n]=Fp(e);return n?c.fromObject(n,t):c.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Em("need to specify a reason the Duration is invalid");e=e instanceof Wf?e:new Wf(e,t);if(Zf.throwOnInvalid)throw new vm(e);return new c({invalid:e})}static normalizeUnit(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(t)return t;throw new wm(e)}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){t={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?rp.create(this.loc,t).formatDurationFromString(this,e):Up}toHuman(n={}){var e;return this.isValid?(e=Zp.map(e=>{var t=this.values[e];return k(t)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:e.slice(0,-1)}).format(t)}).filter(e=>e),this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(e)):Up}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=xh(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){var t;return!this.isValid||(t=this.toMillis())<0||864e5<=t?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},_.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Yp(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;var t=c.fromDurationLike(e),n={};for(const r of Zp)(gh(t.values,r)||gh(this.values,r))&&(n[r]=t.get(r)+this.get(r));return Kp(this,{values:n},!0)}minus(e){return this.isValid?(e=c.fromDurationLike(e),this.plus(e.negate())):this}mapUnits(e){if(!this.isValid)return this;var t={};for(const n of Object.keys(this.values))t[n]=Rh(e(this.values[n],n));return Kp(this,{values:t},!0)}get(e){return this[c.normalizeUnit(e)]}set(e){return this.isValid?Kp(this,{values:{...this.values,...Dh(e,c.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){e=this.loc.clone({locale:e,numberingSystem:t});return Kp(this,{loc:e,matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){var e;return this.isValid?(e=this.toObject(),qp(this.matrix,e),Kp(this,{values:e},!0)):this}rescale(){var e;return this.isValid?(e=Xp(this.normalize().shiftToAll().toObject()),Kp(this,{values:e},!0)):this}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map(e=>c.normalizeUnit(e));var t={},n={},r=this.toObject();let a;for(const o of Zp)if(0<=e.indexOf(o)){a=o;let e=0;for(const s in n)e+=this.matrix[s][o]*n[s],n[s]=0;uh(r[o])&&(e+=r[o]);var i=Math.trunc(e);t[o]=i,n[o]=(1e3*e-1e3*i)/1e3}else uh(r[o])&&(n[o]=r[o]);for(const l in n)0!==n[l]&&(t[a]+=l===a?n[l]:n[l]/this.matrix[a][l]);return qp(this.matrix,t),Kp(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;var e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return Kp(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of Zp)if(t=this.values[r],n=e.values[r],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}},Gp="Invalid Interval";function Jp(e,t){return e&&e.isValid?t&&t.isValid?t<e?Qp.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=`+t.toISO()):null:Qp.invalid("missing or invalid end"):Qp.invalid("missing or invalid start")}var Qp=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Em("need to specify a reason the Interval is invalid");e=e instanceof Wf?e:new Wf(e,t);if(Zf.throwOnInvalid)throw new ym(e);return new Qp({invalid:e})}static fromDateTimes(e,t){var e=Kg(e),t=Kg(t),n=Jp(e,t);return null==n?new Qp({start:e,end:t}):n}static after(e,t){t=c.fromDurationLike(t),e=Kg(e);return Qp.fromDateTimes(e,e.plus(t))}static before(e,t){t=c.fromDurationLike(t),e=Kg(e);return Qp.fromDateTimes(e.minus(t),e)}static fromISO(e,a){var[i,o]=(e||"").split("/",2);if(i&&o){let e,t;try{e=_.fromISO(i,a),t=e.isValid}catch(e){t=!1}let n,r;try{n=_.fromISO(o,a),r=n.isValid}catch(e){r=!1}if(t&&r)return Qp.fromDateTimes(e,n);if(t){o=c.fromISO(o,a);if(o.isValid)return Qp.after(e,o)}else if(r){o=c.fromISO(i,a);if(o.isValid)return Qp.before(n,o)}}return Qp.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;var n=this.start.startOf(e,t);let r;return r=(r=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end).startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set({start:e,end:t}={}){return this.isValid?Qp.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];var t=e.map(Kg).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),n=[];let r=this["s"],a=0;for(;r<this.e;){var i=t[a]||this.e,i=+i>+this.e?this.e:i;n.push(Qp.fromDateTimes(r,i)),r=i,a+=1}return n}splitBy(e){var t=c.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n=this["s"],r=1,a;for(var i=[];n<this.e;){var o=this.start.plus(t.mapUnits(e=>e*r));a=+o>+this.e?this.e:o,i.push(Qp.fromDateTimes(n,a)),n=a,r+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){var t;return this.isValid?(t=(this.s>e.s?this:e).s,(e=(this.e<e.e?this:e).e)<=t?null:Qp.fromDateTimes(t,e)):this}union(e){var t;return this.isValid?(t=(this.s<e.s?this:e).s,e=(this.e>e.e?this:e).e,Qp.fromDateTimes(t,e)):this}static merge(e){var[e,t]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n],[[],null]);return t&&e.push(t),e}static xor(e){let t=null,n=0;var r=[],e=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]);for(const a of Array.prototype.concat(...e).sort((e,t)=>e.time-t.time))n+="s"===a.type?1:-1,t=1===n?a.time:(t&&+t!=+a.time&&r.push(Qp.fromDateTimes(t,a.time)),null);return Qp.merge(r)}difference(...e){return Qp.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Gp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=xm,t={}){return this.isValid?rp.create(this.s.loc.clone(t),e).formatInterval(this):Gp}toISO(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):Gp}toISODate(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():Gp}toISOTime(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):Gp}toFormat(e,{separator:t=" – "}={}){return this.isValid?""+this.s.toFormat(e)+t+this.e.toFormat(e):Gp}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):c.invalid(this.invalidReason)}mapEndpoints(e){return Qp.fromDateTimes(e(this.s),e(this.e))}},eg=class{static hasDST(e=Zf.defaultZone){var t=_.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return ef.isValidZone(e)}static normalizeZone(e){return Of(e,Zf.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||If.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||If.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||If.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:a="gregory"}={}){return(r||If.create(t,n,a)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:a="gregory"}={}){return(r||If.create(t,n,a)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||If.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||If.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return If.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return If.create(t,null,"gregory").eras(e)}static features(){return{relative:mh(),localeWeek:fh()}}};function tg(e,t){var n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),t=n(t)-n(e);return Math.floor(c.fromMillis(t).as("days"))}function ng(e,t,n,r){let[a,i,o,s]=function(e,t,n){var r,a,i={},o=e;let s,l;for([r,a]of[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{e=tg(e,t);return(e-e%7)/7}],["days",tg]])0<=n.indexOf(r)&&(i[s=r]=a(e,t),(l=o.plus(i))>t?(i[r]--,t<(e=o.plus(i))&&(l=e,i[r]--,e=o.plus(i))):e=l);return[e,i,l,s]}(e,t,n);e=t-a,n=n.filter(e=>0<=["hours","minutes","seconds","milliseconds"].indexOf(e)),0===n.length&&(o=o<t?a.plus({[s]:1}):o)!==a&&(i[s]=(i[s]||0)+e/(o-a)),t=c.fromObject(i,r);return 0<n.length?c.fromMillis(e,r).shiftTo(...n).plus(t):t}function rg(e,t=e=>e){return{regex:e,deser:([e])=>t(function(t){let n=parseInt(t,10);if(isNaN(n)){n="";for(let e=0;e<t.length;e++){var r=t.charCodeAt(e);if(-1!==t[e].search(Mf.hanidec))n+=Rf.indexOf(t[e]);else for(const o in Af){var[a,i]=Af[o];a<=r&&r<=i&&(n+=r-a)}}return parseInt(n,10)}return n}(e))}}var ag=`[ ${String.fromCharCode(160)}]`,ig=new RegExp(ag,"g");function og(e){return e.replace(/\./g,"\\.?").replace(ig,ag)}function sg(e){return e.replace(/\./g,"").replace(ig," ").toLowerCase()}function lg(e,n){return null===e?null:{regex:RegExp(e.map(og).join("|")),deser:([t])=>e.findIndex(e=>sg(t)===sg(e))+n}}function ug(e,t){return{regex:e,deser:([,e,t])=>Ah(e,t),groups:t}}function cg(e){return{regex:e,deser:([e])=>e}}function dg(t,n){const r=Lf(n),a=Lf(n,"{2}"),i=Lf(n,"{3}"),o=Lf(n,"{4}"),s=Lf(n,"{6}"),l=Lf(n,"{1,2}"),u=Lf(n,"{1,3}"),c=Lf(n,"{1,6}"),d=Lf(n,"{1,9}"),m=Lf(n,"{2,4}"),f=Lf(n,"{4,6}"),h=e=>({regex:RegExp(e.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")),deser:([e])=>e,literal:!0});var e=(e=>{if(t.literal)return h(e);switch(e.val){case"G":return lg(n.eras("short"),0);case"GG":return lg(n.eras("long"),0);case"y":return rg(c);case"yy":return rg(m,Oh);case"yyyy":return rg(o);case"yyyyy":return rg(f);case"yyyyyy":return rg(s);case"M":return rg(l);case"MM":return rg(a);case"MMM":return lg(n.months("short",!0),1);case"MMMM":return lg(n.months("long",!0),1);case"L":return rg(l);case"LL":return rg(a);case"LLL":return lg(n.months("short",!1),1);case"LLLL":return lg(n.months("long",!1),1);case"d":return rg(l);case"dd":return rg(a);case"o":return rg(u);case"ooo":return rg(i);case"HH":return rg(a);case"H":return rg(l);case"hh":return rg(a);case"h":return rg(l);case"mm":return rg(a);case"m":case"q":return rg(l);case"qq":return rg(a);case"s":return rg(l);case"ss":return rg(a);case"S":return rg(u);case"SSS":return rg(i);case"u":return cg(d);case"uu":return cg(l);case"uuu":return rg(r);case"a":return lg(n.meridiems(),0);case"kkkk":return rg(o);case"kk":return rg(m,Oh);case"W":return rg(l);case"WW":return rg(a);case"E":case"c":return rg(r);case"EEE":return lg(n.weekdays("short",!1),1);case"EEEE":return lg(n.weekdays("long",!1),1);case"ccc":return lg(n.weekdays("short",!0),1);case"cccc":return lg(n.weekdays("long",!0),1);case"Z":case"ZZ":return ug(new RegExp(`([+-]${l.source})(?::(${a.source}))?`),2);case"ZZZ":return ug(new RegExp(`([+-]${l.source})(${a.source})?`),2);case"z":return cg(/[a-z_+-/]{1,256}?/i);case" ":return cg(/[^\S\n\r]/);default:return h(e)}})(t)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return e.token=t,e}var mg={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function fg(e){return[`^${e.map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"")}$`,e]}function hg(e,t,n){var r=e.match(t);if(r){var a,i,o={};let e=1;for(const s in n)gh(n,s)&&(i=(a=n[s]).groups?a.groups+1:1,!a.literal&&a.token&&(o[a.token.val[0]]=a.deser(r.slice(e,e+i))),e+=i);return[r,o]}return[r,{}]}function pg(r){let e=null,t;return k(r.z)||(e=ef.create(r.z)),k(r.Z)||(e=e||new Nf(r.Z),t=r.Z),k(r.q)||(r.M=3*(r.q-1)+1),k(r.h)||(r.h<12&&1===r.a?r.h+=12:12===r.h&&0===r.a&&(r.h=0)),0===r.G&&r.y&&(r.y=-r.y),k(r.u)||(r.S=Sh(r.u)),[Object.keys(r).reduce((e,t)=>{var n=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(t);return n&&(e[n]=r[t]),e},{}),e,t]}var gg=null;function yg(e,n){return Array.prototype.concat(...e.map(e=>{return t=n,(e=e).literal||null==(t=Eg(rp.macroTokenToFormatOpts(e.val),t))||t.includes(void 0)?e:t;var t}))}var vg=class{constructor(t,e){var n;this.locale=t,this.format=e,this.tokens=yg(rp.parseFormat(e),t),this.units=this.tokens.map(e=>dg(e,t)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),this.disqualifyingUnit||([e,n]=fg(this.units),this.regex=RegExp(e,"i"),this.handlers=n)}explainFromTokens(e){if(this.isValid){var[t,n]=hg(e,this.regex,this.handlers),[r,a,i]=n?pg(n):[null,null,void 0];if(gh(n,"a")&&gh(n,"H"))throw new bm("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:r,zone:a,specificOffset:i}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function bg(e,t,n){return new vg(e,n).explainFromTokens(t)}function wg(e,t,n){var{result:e,zone:t,specificOffset:n,invalidReason:r}=bg(e,t,n);return[e,t,n,r]}function Eg(s,e){if(!s)return null;var e=rp.create(e,s).dtFormatter(gg=gg||_.fromMillis(1555555555555)),t=e.formatToParts();const l=e.resolvedOptions();return t.map(n=>{{var r=s,a=l,{type:n,value:i}=n;if("literal"===n)return{literal:!(o=/^\s+$/.test(i)),val:o?" ":i};var o=r[n];let e=n,t=("hour"===n&&(e=null!=r.hour12?r.hour12?"hour12":"hour24":null!=r.hourCycle?"h11"===r.hourCycle||"h12"===r.hourCycle?"hour12":"hour24":a.hour12?"hour12":"hour24"),mg[e]);return(t="object"==typeof t?t[o]:t)?{literal:!1,val:t}:void 0}})}var Sg="Invalid DateTime";function xg(e){return new Wf("unsupported zone",`the zone "${e.name}" is not supported`)}function kg(e){return null===e.weekData&&(e.weekData=eh(e.c)),e.weekData}function _g(e){return null===e.localWeekData&&(e.localWeekData=eh(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Ig(e,t){e={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new _({...e,...t,old:e})}function Cg(e,t,n){var r=e-60*t*1e3,a=n.offset(r);return t===a?[r,t]:a===(n=n.offset(r-=60*(a-t)*1e3))?[r,a]:[e-60*Math.min(a,n)*1e3,Math.max(a,n)]}function Ng(e,t){e+=60*t*1e3;t=new Date(e);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Tg(e,t,n){return Cg(Ch(e),t,n)}function Og(e,t){var n=e.o,r=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),r={...e.c,year:r,month:a,day:Math.min(e.c.day,Ih(r,a))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},a=c.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds");let[i,o]=Cg(Ch(r),n,e.zone);return 0!==a&&(i+=a,o=e.zone.offset(i)),{ts:i,o:o}}function Mg(e,t,n,r,a,i){var{setZone:o,zone:s}=n;return e&&0!==Object.keys(e).length||t?(t=t||s,e=_.fromObject(e,{...n,zone:t,specificOffset:i}),o?e:e.setZone(s)):_.invalid(new Wf("unparsable",`the input "${a}" can't be parsed as `+r))}function Ag(e,t,n=!0){return e.isValid?rp.create(If.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Rg(e,t){var n=9999<e.c.year||e.c.year<0;let r="";return n&&0<=e.c.year&&(r+="+"),r+=bh(e.c.year,n?6:4),r=t?(r=(r+="-")+bh(e.c.month)+"-")+bh(e.c.day):(r+=bh(e.c.month))+bh(e.c.day)}function Dg(e,t,n,r,a,i){let o=bh(e.c.hour);return t?(o=(o+=":")+bh(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=":")):o+=bh(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=bh(e.c.second),0===e.c.millisecond&&r)||(o=(o+=".")+bh(e.c.millisecond,3)),a&&(e.isOffsetFixed&&0===e.offset&&!i?o+="Z":o=e.o<0?(o=(o+="-")+bh(Math.trunc(-e.o/60))+":")+bh(Math.trunc(-e.o%60)):(o=(o+="+")+bh(Math.trunc(e.o/60))+":")+bh(Math.trunc(e.o%60))),i&&(o+="["+e.zone.ianaName+"]"),o}var Pg,Lg={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Fg={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Vg={ordinal:1,hour:0,minute:0,second:0,millisecond:0},jg=["year","month","day","hour","minute","second","millisecond"],zg=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Bg=["year","ordinal","hour","minute","second","millisecond"];function Ug(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:var t=e,n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(n)return n;throw new wm(t)}}function $g(e,t){var n=Of(t.zone,Zf.defaultZone);if(!n.isValid)return _.invalid(xg(n));t=If.fromObject(t);let r,a;if(k(e.year))r=Zf.now();else{for(const o of jg)k(e[o])&&(e[o]=Lg[o]);var i=sh(e)||lh(e);if(i)return _.invalid(i);i=function(e){if(void 0===Pg&&(Pg=Zf.now()),"iana"!==e.type)return e.offset(Pg);var t=e.name;let n=Wg.get(t);return void 0===n&&(n=e.offset(Pg),Wg.set(t,n)),n}(n);[r,a]=Tg(e,i,n)}return new _({ts:r,zone:n,loc:t,o:a})}function Hg(t,n,r){const a=!!k(r.round)||r.round,e=(e,t)=>{return e=xh(e,a||r.calendary?0:2,!0),n.loc.clone(r).relFormatter(r).format(e,t)},i=e=>r.calendary?n.hasSame(t,e)?0:n.startOf(e).diff(t.startOf(e),e).get(e):n.diff(t,e).get(e);if(r.unit)return e(i(r.unit),r.unit);for(const s of r.units){var o=i(s);if(1<=Math.abs(o))return e(o,s)}return e(n<t?-0:0,r.units[r.units.length-1])}function Zg(e){let t={},n;return n=0<e.length&&"object"==typeof e[e.length-1]?(t=e[e.length-1],Array.from(e).slice(0,e.length-1)):Array.from(e),[t,n]}var Wg=new Map,_=class{constructor(e){var t,n=e.zone||Zf.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Wf("invalid input"):null)||(n.isValid?null:xg(n)),a=(this.ts=k(e.ts)?Zf.now():e.ts,null),i=null;r||(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n)?[a,i]=[e.old.c,e.old.o]:(t=uh(e.o)&&!e.old?e.o:n.offset(this.ts),a=Ng(this.ts,t),r=Number.isNaN(a.year)?new Wf("invalid input"):null,a=r?null:a,i=r?null:t)),this._zone=n,this.loc=e.loc||If.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=a,this.o=i,this.isLuxonDateTime=!0}static now(){return new _({})}static local(){var[e,t]=Zg(arguments),[t,n,r,a,i,o,s]=t;return $g({year:t,month:n,day:r,hour:a,minute:i,second:o,millisecond:s},e)}static utc(){var[e,t]=Zg(arguments),[t,n,r,a,i,o,s]=t;return e.zone=Nf.utcInstance,$g({year:t,month:n,day:r,hour:a,minute:i,second:o,millisecond:s},e)}static fromJSDate(e,t={}){var n,e=dh(e)?e.valueOf():NaN;return Number.isNaN(e)?_.invalid("invalid input"):(n=Of(t.zone,Zf.defaultZone)).isValid?new _({ts:e,zone:n,loc:If.fromObject(t)}):_.invalid(xg(n))}static fromMillis(e,t={}){if(uh(e))return e<-864e13||864e13<e?_.invalid("Timestamp out of range"):new _({ts:e,zone:Of(t.zone,Zf.defaultZone),loc:If.fromObject(t)});throw new Em(`fromMillis requires a numerical input, but received a ${typeof e} with value `+e)}static fromSeconds(e,t={}){if(uh(e))return new _({ts:1e3*e,zone:Of(t.zone,Zf.defaultZone),loc:If.fromObject(t)});throw new Em("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};var n=Of(t.zone,Zf.defaultZone);if(!n.isValid)return _.invalid(xg(n));var r=If.fromObject(t),a=Dh(e,Ug),{minDaysInFirstWeek:i,startOfWeek:o}=ah(a,r),s=Zf.now(),t=k(t.specificOffset)?n.offset(s):t.specificOffset,l=!k(a.ordinal),u=!k(a.year),c=!k(a.month)||!k(a.day),u=u||c,d=a.weekYear||a.weekNumber;if((u||l)&&d)throw new bm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&l)throw new bm("Can't mix ordinal dates with month/day");c=d||a.weekday&&!u;let m,f,h=Ng(s,t),p=(c?(m=zg,f=Fg,h=eh(h,i,o)):l?(m=Bg,f=Vg,h=nh(h)):(m=jg,f=Lg),!1);for(const g of m)k(a[g])?p?a[g]=f[g]:a[g]=h[g]:p=!0;var d=(c?ih(a,i,o):(l?oh:sh)(a))||lh(a);return d?_.invalid(d):([s,d]=Tg(c?th(a,i,o):l?rh(a):a,t,n),c=new _({ts:s,zone:n,o:d,loc:r}),a.weekday&&u&&e.weekday!==c.weekday?_.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of `+c.toISO()):c.isValid?c:_.invalid(c.invalid))}static fromISO(e,t={}){var[n,r]=Ap(e);return Mg(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){var[n,r]=Rp(e);return Mg(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){var[e,n]=Dp(e);return Mg(e,n,t,"HTTP",t)}static fromFormat(e,t,n={}){if(k(e)||k(t))throw new Em("fromFormat requires an input string and a format");var{locale:r=null,numberingSystem:a=null}=n,[r,a,i,o]=wg(If.fromOpts({locale:r,numberingSystem:a,defaultToEN:!0}),e,t);return o?_.invalid(o):Mg(r,a,n,"format "+t,e,i)}static fromString(e,t,n={}){return _.fromFormat(e,t,n)}static fromSQL(e,t={}){var[n,r]=Bp(e);return Mg(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Em("need to specify a reason the DateTime is invalid");e=e instanceof Wf?e:new Wf(e,t);if(Zf.throwOnInvalid)throw new gm(e);return new _({invalid:e})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){e=Eg(e,If.fromObject(t));return e?e.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){return yg(rp.parseFormat(e),If.fromObject(t)).map(e=>e.val).join("")}static resetCache(){Pg=void 0,Wg.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?kg(this).weekYear:NaN}get weekNumber(){return this.isValid?kg(this).weekNumber:NaN}get weekday(){return this.isValid?kg(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?_g(this).weekday:NaN}get localWeekNumber(){return this.isValid?_g(this).weekNumber:NaN}get localWeekYear(){return this.isValid?_g(this).weekYear:NaN}get ordinal(){return this.isValid?nh(this.c).ordinal:NaN}get monthShort(){return this.isValid?eg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?eg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?eg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?eg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){var e,t,n,r;return this.isValid&&!this.isOffsetFixed&&(e=Ch(this.c),n=this.zone.offset(e-864e5),r=this.zone.offset(e+864e5),(n=this.zone.offset(e-6e4*n))!==(r=this.zone.offset(e-6e4*r)))&&(t=e-6e4*r,n=Ng(e=e-6e4*n,n),r=Ng(t,r),n.hour===r.hour)&&n.minute===r.minute&&n.second===r.second&&n.millisecond===r.millisecond?[Ig(this,{ts:e}),Ig(this,{ts:t})]:[this]}get isInLeapYear(){return kh(this.year)}get daysInMonth(){return Ih(this.year,this.month)}get daysInYear(){return this.isValid?_h(this.year):NaN}get weeksInWeekYear(){return this.isValid?Th(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Th(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){var{locale:e,numberingSystem:t,calendar:n}=rp.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:e,numberingSystem:t,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(Nf.instance(e),t)}toLocal(){return this.setZone(Zf.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if((t=Of(t,Zf.defaultZone)).equals(this.zone))return this;if(t.isValid){let e=this.ts;return(n||r)&&(n=t.offset(this.ts),r=this.toObject(),[e]=Tg(r,n,t)),Ig(this,{ts:e,zone:t})}return _.invalid(xg(t))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){e=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return Ig(this,{loc:e})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;var e=Dh(e,Ug),{minDaysInFirstWeek:t,startOfWeek:n}=ah(e,this.loc),r=!k(e.weekYear)||!k(e.weekNumber)||!k(e.weekday),a=!k(e.ordinal),i=!k(e.year),o=!k(e.month)||!k(e.day),s=e.weekYear||e.weekNumber;if((i||o||a)&&s)throw new bm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&a)throw new bm("Can't mix ordinal dates with month/day");let l;r?l=th({...eh(this.c,t,n),...e},t,n):k(e.ordinal)?(l={...this.toObject(),...e},k(e.day)&&(l.day=Math.min(Ih(l.year,l.month),l.day))):l=rh({...nh(this.c),...e});var[i,s]=Tg(l,this.o,this.zone);return Ig(this,{ts:i,o:s})}plus(e){return this.isValid?Ig(this,Og(this,c.fromDurationLike(e))):this}minus(e){return this.isValid?Ig(this,Og(this,c.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;var n,r={},e=c.normalizeUnit(e);switch(e){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0}return"weeks"===e&&(t?(t=this.loc.getStartOfWeek(),n=this["weekday"],n<t&&(r.weekNumber=this.weekNumber-1),r.weekday=t):r.weekday=1),"quarters"===e&&(n=Math.ceil(this.month/3),r.month=3*(n-1)+1),this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?rp.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Sg}toLocaleString(e=xm,t={}){return this.isValid?rp.create(this.loc.clone(t),e).formatDateTime(this):Sg}toLocaleParts(e={}){return this.isValid?rp.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:a=!1}={}){var i;return this.isValid?(i=Rg(this,e="extended"===e),(i+="T")+Dg(this,e,t,n,r,a)):null}toISODate({format:e="extended"}={}){return this.isValid?Rg(this,"extended"===e):null}toISOWeekDate(){return Ag(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:a=!1,format:i="extended"}={}){return this.isValid?(r?"T":"")+Dg(this,"extended"===i,t,e,n,a):null}toRFC2822(){return Ag(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ag(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Rg(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Ag(this,r,!0)}toSQL(e={}){return this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null}toString(){return this.isValid?this.toISO():Sg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){var t;return this.isValid?(t={...this.c},e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t):{}}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){var r;return this.isValid&&e.isValid?(n={locale:this.locale,numberingSystem:this.numberingSystem,...n},t=hh(t).map(c.normalizeUnit),e=ng((r=e.valueOf()>this.valueOf())?this:e,r?e:this,t,n),r?e.negate():e):c.invalid("created by diffing an invalid DateTime")}diffNow(e="milliseconds",t={}){return this.diff(_.now(),e,t)}until(e){return this.isValid?Qp.fromDateTimes(this,e):this}hasSame(e,t,n){var r;return!!this.isValid&&(r=e.valueOf(),(e=this.setZone(e.zone,{keepLocalTime:!0})).startOf(t,n)<=r)&&r<=e.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;var t=e.base||_.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],a=e.unit;return Array.isArray(e.unit)&&(r=e.unit,a=void 0),Hg(t,this.plus(n),{...e,numeric:"always",units:r,unit:a})}toRelativeCalendar(e={}){return this.isValid?Hg(e.base||_.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(e.every(_.isDateTime))return ph(e,e=>e.valueOf(),Math.min);throw new Em("min requires all arguments be DateTimes")}static max(...e){if(e.every(_.isDateTime))return ph(e,e=>e.valueOf(),Math.max);throw new Em("max requires all arguments be DateTimes")}static fromFormatExplain(e,t,n={}){var{locale:n=null,numberingSystem:r=null}=n;return bg(If.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return _.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){var{locale:t=null,numberingSystem:n=null}=t,t=If.fromOpts({locale:t,numberingSystem:n,defaultToEN:!0});return new vg(t,e)}static fromFormatParser(e,t,n={}){if(k(e)||k(t))throw new Em("fromFormatParser requires an input string and a format parser");var r,a,i,{locale:o=null,numberingSystem:s=null}=n,o=If.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0});if(o.equals(t.locale))return{result:s,zone:r,specificOffset:a,invalidReason:i}=t.explainFromTokens(e),i?_.invalid(i):Mg(s,r,n,"format "+t.format,e,a);throw new Em(`fromFormatParser called with a locale of ${o}, but the format parser was created for `+t.locale)}static get DATE_SHORT(){return xm}static get DATE_MED(){return km}static get DATE_MED_WITH_WEEKDAY(){return _m}static get DATE_FULL(){return Im}static get DATE_HUGE(){return Cm}static get TIME_SIMPLE(){return Nm}static get TIME_WITH_SECONDS(){return Tm}static get TIME_WITH_SHORT_OFFSET(){return Om}static get TIME_WITH_LONG_OFFSET(){return Mm}static get TIME_24_SIMPLE(){return Am}static get TIME_24_WITH_SECONDS(){return Rm}static get TIME_24_WITH_SHORT_OFFSET(){return Dm}static get TIME_24_WITH_LONG_OFFSET(){return Pm}static get DATETIME_SHORT(){return Lm}static get DATETIME_SHORT_WITH_SECONDS(){return Fm}static get DATETIME_MED(){return Vm}static get DATETIME_MED_WITH_SECONDS(){return jm}static get DATETIME_MED_WITH_WEEKDAY(){return zm}static get DATETIME_FULL(){return Bm}static get DATETIME_FULL_WITH_SECONDS(){return Um}static get DATETIME_HUGE(){return $m}static get DATETIME_HUGE_WITH_SECONDS(){return Hm}};function Kg(e){if(_.isDateTime(e))return e;if(e&&e.valueOf&&uh(e.valueOf()))return _.fromJSDate(e);if(e&&"object"==typeof e)return _.fromObject(e);throw new Em(`Unknown datetime argument: ${e}, of type `+typeof e)}var Yg=a.object({minDate:a.date().optional().nullable(),maxDate:a.date().optional().nullable()}).merge(Us).strict().refine(e=>!e.minDate||!e.maxDate||e.minDate<=e.maxDate,{message:"The minimum date must be before the maximum date",path:["minDate"]}),qg=class extends r{async getResultsInternal(e){var e=e.source??[],{minDate:t,maxDate:n}=this.data,r=e.filter(e=>void 0===e.albumData);await this.setAlbumData(r);const a=t?_.fromJSDate(t).startOf("day"):void 0,i=n?_.fromJSDate(n).startOf("day"):void 0;return e.filter(e=>{var e=e.albumData?.releaseDate;return!!e&&(e=_.fromJSDate(e).startOf("day"),void 0===a||e>=a)&&(void 0===i||e<=i)})}async setAlbumData(e){for(const n of e){var t=n.album.uri,t=(qg.albumMap.has(t)||qg.albumMap.set(t,await pm({uri:t,offset:0,limit:0,locale:Spicetify.Locale.getLocale()})),qg.albumMap.get(t));n.albumData={releaseDate:new Date(t.albumUnion.date.isoString)}}}},Xg=qg,Gg=(yd=Xg,Td="albumMap",wd=new Map,(Td="symbol"!=typeof Td?Td+"":Td)in(yd=yd)?R(yd,Td,{enumerable:!0,configurable:!0,writable:!0,value:wd}):yd[Td]=wd,a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict()),Jg=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.speechiness>this.data.range.min&&e.audioFeatures.speechiness<this.data.range.max);return e}},Qg=a.object({range:a.object({min:a.number().min(0).max(1e3),max:a.number().min(0).max(1e3)})}).merge(Us).strict(),ey=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.tempo>this.data.range.min&&e.audioFeatures.tempo<this.data.range.max);return e}},ty=a.object({range:a.object({min:a.number().min(0).max(1),max:a.number().min(0).max(1)})}).merge(Us).strict(),ny=class extends r{async getResultsInternal(e){e=e.source??[],await Kd(e.filter(e=>void 0===e.audioFeatures)),e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.valence>this.data.range.min&&e.audioFeatures.valence<this.data.range.max);return e}},ry=class extends r{getResultsInternal(e){var e=e.source??[],t=new Set,n=[];for(const a of e){var r=a.artists.map(e=>e.name).join(","),r=a.name.toLowerCase()+"-"+r.toLowerCase();t.has(r)||(n.push(a),t.add(r))}return Promise.resolve(n)}},ay=class extends r{getResultsInternal(e){var t=e["first-set"]??[],e=e["second-set"]??[],n=[...t,...e],t=new Set(t.map(e=>e.uri)),e=new Set(e.map(e=>e.uri)),r=t.symmetricDifference(e),a=[],i=new Set;for(const o of n)r.has(o.uri)&&!i.has(o.uri)&&(a.push(o),i.add(o.uri));return Promise.resolve(a)}},iy=class extends r{getResultsInternal(e){var t=e["first-set"]??[],e=e["second-set"]??[],n=[...t,...e],t=new Set(t.map(e=>e.uri)),e=new Set(e.map(e=>e.uri)),r=t.intersection(e),a=[],i=new Set;for(const o of n)r.has(o.uri)&&!i.has(o.uri)&&(a.push(o),i.add(o.uri));return Promise.resolve(a)}},oy=class extends r{getResultsInternal(e){var t=e["first-set"]??[],e=e["second-set"]??[],n=[...t,...e],t=new Set(t.map(e=>e.uri)),e=new Set(e.map(e=>e.uri)),r=t.difference(e),a=[],i=new Set;for(const o of n)r.has(o.uri)&&!i.has(o.uri)&&(a.push(o),i.add(o.uri));return Promise.resolve(a)}},sy=class extends r{async getResultsInternal(e){var t=e.source??[];for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return Promise.resolve(t)}},ly=a.object({property:a.enum(["album","artist","name","source","duration"]),order:a.enum(["asc","desc"])}).merge(Us).strict(),uy={album:e=>e.album.name,artist:e=>e.artists.map(e=>e.name).join(", "),name:e=>e.name,source:e=>e.source,duration:e=>e.duration},cy=class extends r{async getResultsInternal(e){e=e.source??[];const{property:n,order:r}=this.data;e=e.toSorted((e,t)=>{e=this.getPropertyValue(e,n),t=this.getPropertyValue(t,n);return e<t?"asc"===r?-1:1:t<e?"asc"===r?1:-1:0});return Promise.resolve(e)}getPropertyValue(e,t){return uy[t](e)}},dy=class extends r{getResultsInternal(e){return Promise.resolve(e.source??[])}},my=(e,t)=>{return{uri:e.uri,name:e.name,duration:e.duration.milliseconds,artists:e.artists.map(e=>({uri:e.uri,name:e.name})),album:{uri:e.album.uri,name:e.album.name,images:e.album.images.map(e=>({url:e.url}))},isPlayable:e.isPlayable,...t}},fy=(e,t)=>{return{uri:e.uri,name:e.name,duration:e.duration.milliseconds,artists:e.artists.map(e=>({uri:e.uri,name:e.name})),album:{uri:e.album.uri,name:e.album.name,images:e.album.images.map(e=>({url:e.url}))},isPlayable:e.isPlayable,...t}},hy=(e,t)=>{return{uri:e.uri,name:e.name,duration:e.duration_ms,artists:e.artists.map(e=>({uri:e.uri,name:e.name})),album:{uri:e.album.uri,name:e.album.name,images:e.album.images.map(e=>({url:e.url}))},isPlayable:e.is_playable??!1,...t}},py=(e,t,n)=>{return{uri:e.uri,name:e.name,duration:e.duration.totalMilliseconds,artists:e.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),album:{uri:t.uri,name:t.name,images:t.coverArt.sources.map(e=>({url:e.url}))},isPlayable:e.playability.playable,...n}},gy=a.object({uri:a.string().nonempty({message:"Album URI is required"}).refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:a.number().nonnegative().int().optional(),limit:a.number().nonnegative().int().max(100).optional(),onlyLiked:a.boolean()}).merge(Us).strict(),yy=class extends r{async getResultsInternal(){var{offset:e=0,limit:t=100,uri:n,onlyLiked:r}=this.data;const a=await pm({uri:n,offset:e,limit:t,locale:Spicetify.Locale.getLocale()});let i=a.albumUnion.tracksV2.items.map(e=>e.track);return(i=r?i.filter(e=>e.saved):i).map(e=>py(e,a.albumUnion,{source:"Album",albumData:{releaseDate:new Date(a.albumUnion.date.isoString)}}))}},vy=a.object({uri:a.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:a.number().nonnegative().int(),limit:a.number().nonnegative().int().max(100)}).strict().readonly();async function by(e){vy.parse(e);var t=Spicetify.GraphQL.Definitions["queryAlbumTracks"];return fm(t,e)}var wy=a.object({uri:a.string().nonempty().refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"}),locale:a.string().nonempty()}).strict().readonly();async function Ey(e){wy.parse(e);var t=Spicetify.GraphQL.Definitions["queryArtistOverview"];return fm(t,e)}var Sy=a.object({uri:a.string().nonempty({message:"Artist URI is required"}).refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"}),trackType:a.enum(["liked","top","discography","latest"])}).merge(Us).strict(),xy=class extends r{async getResultsInternal(){var{uri:e,trackType:t}=this.data;return"liked"===t?this.getLikedTracks(e):"top"===t?this.getTopTracks(e):"latest"===t?this.getLatestReleaseTracks(e):this.getAllTracks(e)}async getLikedTracks(e){return(await y().LibraryAPI.getTracks({limit:5e4,offset:0,uri:e})).items.map(e=>fy(e,{source:"Artist"}))}async getTopTracks(e){var e=await Ey({uri:e,locale:Spicetify.Locale.getLocale()}),t=[];for(const u of e.artistUnion.discography.popularReleasesAlbums.items)t.push(...await this.getTracksFromRelease(u));var n,r,e=e.artistUnion.discography.topTracks.items,a=new Map,i=[],o=await y().LibraryAPI.contains(...e.map(e=>e.track.uri));for([n,r]of e.entries()){var s=r.track.albumOfTrack.uri,l=(a.has(s)||(l=await pm({uri:s,limit:0,offset:0,locale:Spicetify.Locale.getLocale()}),a.set(s,l)),a.get(s));i.push(py({...r.track,saved:o[n]??!1},{uri:s,name:l.albumUnion.name,coverArt:r.track.albumOfTrack.coverArt},{source:"Artist",albumData:{releaseDate:new Date(l.albumUnion.date.isoString)}}))}return[...i,...t]}async getLatestReleaseTracks(e){e=(await Ey({uri:e,locale:Spicetify.Locale.getLocale()})).artistUnion.discography.latest;return this.getTracksFromRelease(e)}async getAllTracks(t){var e=await Ey({uri:t,locale:Spicetify.Locale.getLocale()}),n=[];for(const o of e.artistUnion.discography.albums.items.map(e=>e.releases.items).flat())n.push(...await this.getTracksFromRelease(o));var r=[];for(const s of e.artistUnion.discography.compilations.items.map(e=>e.releases.items).flat()){var a=await this.getTracksFromRelease(s);r.push(...a.filter(e=>e.artists.some(e=>e.uri===t)))}var i=[];for(const l of e.artistUnion.discography.singles.items.map(e=>e.releases.items).flat())i.push(...await this.getTracksFromRelease(l));return[...n,...r,...i]}async getTracksFromRelease(t){return(await by({uri:t.uri,offset:0,limit:100})).albumUnion.tracksV2.items.map(e=>py(e.track,t,{source:"Artist",albumData:{releaseDate:new Date(t.date.year,t.date.month,t.date.day)}}))}},ky=a.object({offset:a.number().nonnegative().int().optional(),limit:a.number().nonnegative().int().max(5e4).optional(),filter:a.string().optional(),sortField:a.enum(["ADDED_AT","ALBUM_NAME","NAME","ARTIST_NAME"]),sortOrder:a.enum(["DESC","ASC"]),genres:a.array(a.string())}).merge(Us).strict(),_y=class extends r{async getResultsInternal(){var e=y().LibraryAPI,{offset:t,filter:n,sortField:r,sortOrder:a,genres:i}=this.data;let o=this.data.limit,s=((void 0===o||0<i.length)&&(o=(await e.getTracks()).unfilteredTotalLength),(await e.getTracks({limit:o,offset:t,filters:n?[n]:void 0,sort:{field:r,order:a}})).items);return(s=0<i.length?this.filterTracksByGenres(s,new Set(i),this.data.limit):s).map(e=>fy(e,{source:"Liked songs"}))}filterTracksByGenres(e,t,n){var r=[],e=e.filter(e=>!Spicetify.URI.isLocalTrack(e.uri));const a=Hd();for(const i of e)i.artists.flatMap(e=>a.get(e.uri)?.value??[]).some(e=>t.has(e))&&r.push(i);return void 0!==n?r.slice(0,n):r}},Iy=a.object({filter:a.string().optional(),sortField:a.enum(["ALBUM","TITLE","ARTIST","DURATION","ADDED_AT"]).or(a.literal("NO_SORT")),sortOrder:a.enum(["DESC","ASC"])}).merge(Us).strict(),Cy=class extends r{async getResultsInternal(){var e=y().LocalFilesAPI,{filter:t,sortField:n,sortOrder:r}=this.data;return(await e.getTracks("NO_SORT"===n?void 0:{field:n,order:r},t)).map(e=>my(e,{source:"Local tracks"}))}},vd=["TITLE","ADDED_AT","ADDED_BY","ALBUM","ARTIST","DURATION","SHOW_NAME","PUBLISH_DATE"],X=["DESC","ASC"],Ny=a.object({playlistUri:a.string().nonempty({message:"Playlist URI is required"}).refine(e=>Spicetify.URI.isPlaylistV1OrV2(e),{message:"Invalid playlist URI"}),offset:a.number().nonnegative().int().optional(),limit:a.number().nonnegative().int().max(5e4).optional(),filter:a.string().optional(),sortField:a.enum(vd).or(a.literal("NO_SORT")),sortOrder:a.enum(X),onlyMine:a.boolean()}).merge(Us).strict(),Ty=class extends r{async getResultsInternal(){var e=this.data.playlistUri,t=y().PlaylistAPI,{offset:n,limit:r,filter:a,sortField:i,sortOrder:o}=this.data;const s=await t.getPlaylist(e,{},{limit:r,offset:n,filter:a,sort:"NO_SORT"===i?void 0:{field:i,order:o}});return s.contents.items.map(e=>fy(e,{source:s.metadata.name}))}};async function Oy(e){if(!(Spicetify.URI.isTrack(e)||Spicetify.URI.isArtist(e)||Spicetify.URI.isAlbum(e)))throw new Error("The source URI must be a track, artist or album URI.");e=await y().RequestBuilder.build().withHost("https://spclient.wg.spotify.com/inspiredby-mix/v2").withPath("/seed_to_playlist/"+e).withEndpointIdentifier("/seed_to_playlist/{uri}").withQueryParameters({"response-format":"json"}).withoutMarket().send();if(200!==e.status)throw new Error("Failed to get the radio playlist.");return e.body.mediaItems[0].uri}var My=a.object({uri:a.string().nonempty({message:"URI is required"}).refine(e=>Spicetify.URI.isTrack(e)||Spicetify.URI.isArtist(e)||Spicetify.URI.isAlbum(e),{message:"Invalid URI type"}),offset:a.number().nonnegative().int().optional(),limit:a.number().nonnegative().int().max(5e4).optional(),sortField:a.enum(vd).or(a.literal("NO_SORT")),sortOrder:a.enum(X)}).merge(Us).strict(),Ay=class extends r{async getResultsInternal(){var e=this.data["uri"],e=await Oy(e);if(!Spicetify.URI.isPlaylistV1OrV2(e))throw new Error("Could not get radio playlist URI");var t=y().PlaylistAPI,{offset:n,limit:r,sortField:a,sortOrder:i}=this.data;const o=await t.getPlaylist(e,{},{limit:r,offset:n,sort:"NO_SORT"===a?void 0:{field:a,order:i}});return o.contents.items.map(e=>fy(e,{source:o.metadata.name}))}},Ry=a.object({timeRange:a.enum(["short_term","medium_term","long_term"]).optional(),offset:a.number().nonnegative().int().optional(),limit:a.number().nonnegative().int().max(50).optional()}).strict().readonly();async function Dy(e){return Ry.parse(e),(await Lu().withPath("/me/top/tracks").withEndpointIdentifier("/me/top/tracks").withQueryParameters({time_range:e.timeRange,limit:e.limit?.toString(),offset:e.offset?.toString()}).send()).body}a.object({uri:a.string().nonempty({message:"Album URI is required"}).refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"})}).strict().readonly(),a.object({uris:a.array(a.string()).nonempty().max(20).refine(e=>e.every(e=>Spicetify.URI.isAlbum(e)),{message:"Invalid album URIs"})}).strict().readonly(),a.object({uri:a.string().nonempty({message:"Episode URI is required"}).refine(e=>Spicetify.URI.isEpisode(e),{message:"Invalid episode URI"})}).strict().readonly(),a.object({uris:a.array(a.string()).nonempty().max(50).refine(e=>e.every(e=>Spicetify.URI.isEpisode(e)),{message:"Invalid episode URIs"})}).strict().readonly(),a.object({uri:a.string().nonempty({message:"Playlist URI is required"}).refine(e=>Spicetify.URI.isPlaylistV1OrV2(e),{message:"Invalid playlist URI"})}).strict().readonly(),a.object({uri:a.string().nonempty({message:"Show URI is required"}).refine(e=>Spicetify.URI.isShow(e),{message:"Invalid show URI"})}).strict().readonly(),a.object({uris:a.array(a.string()).nonempty().max(20).refine(e=>e.every(e=>Spicetify.URI.isShow(e)),{message:"Invalid show URIs"})}).strict().readonly();var Py=a.object({uri:a.string().nonempty({message:"Track URI is required"}).refine(e=>Spicetify.URI.isTrack(e),{message:"Invalid track URI"}),withoutMarket:a.boolean().optional()}).strict().readonly();a.object({uris:a.array(a.string()).nonempty().max(50).refine(e=>e.every(e=>Spicetify.URI.isTrack(e)),{message:"Invalid tracks URIs"})}).strict().readonly();async function Ly(e,t,n,r){var a=[];let i=null,o=t,s=void 0!==r&&r<=n?r:n;for(;null!==(i=await e(o,s))&&(void 0===r&&(r=i.total),a.push(...i.items),o+=s,s=Math.min(n,r-a.length),null!==i.next)&&a.length<r;);return a}var Fy=a.object({timeRange:a.enum(["short_term","medium_term","long_term"]),offset:a.number().nonnegative().int().optional(),limit:a.number().nonnegative().int().max(1e3).optional()}).merge(Us).strict(),Vy=class extends r{async getResultsInternal(){const{offset:e=0,limit:t,timeRange:n}=this.data;return(await Ly(async(e,t)=>Dy({timeRange:n,limit:t,offset:e}),e,50,t)).map(e=>hy(e,{source:"Top tracks"}))}},jy={libraryPlaylistSource:()=>{return{playlistUri:"",offset:void 0,filter:void 0,limit:void 0,sortField:"NO_SORT",sortOrder:"ASC",isExecuting:void 0,onlyMine:!1}},searchPlaylistSource:()=>{return{playlistUri:"",offset:void 0,filter:void 0,limit:void 0,sortField:"NO_SORT",sortOrder:"ASC",isExecuting:void 0,onlyMine:!1}},acousticness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},danceability:()=>{return{range:{min:0,max:1},isExecuting:void 0}},energy:()=>{return{range:{min:0,max:1},isExecuting:void 0}},instrumentalness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},isPlayable:()=>{return{isPlayable:!0,isExecuting:void 0}},liveness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},loudness:()=>{return{range:{min:-60,max:10},isExecuting:void 0}},speechiness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},tempo:()=>{return{range:{min:0,max:1e3},isExecuting:void 0}},valence:()=>{return{range:{min:0,max:1},isExecuting:void 0}},sort:()=>{return{order:"asc",property:"name",isExecuting:void 0}},libraryAlbumSource:()=>{return{uri:"",limit:void 0,offset:void 0,onlyLiked:!1,isExecuting:void 0}},searchAlbumSource:()=>{return{uri:"",limit:void 0,offset:void 0,onlyLiked:!1,isExecuting:void 0}},likedSongsSource:()=>{return{filter:void 0,offset:void 0,limit:void 0,sortField:"ADDED_AT",sortOrder:"DESC",genres:[],isExecuting:void 0}},localTracksSource:()=>{return{filter:void 0,sortField:"DURATION",sortOrder:"DESC",isExecuting:void 0}},topTracksSource:()=>{return{timeRange:"short_term",offset:void 0,limit:void 0,isExecuting:void 0}},mode:()=>{return{mode:"1",isExecuting:void 0}},shuffle:()=>({isExecuting:void 0}),deduplicate:()=>({isExecuting:void 0}),result:()=>({isExecuting:void 0}),libraryArtistSource:()=>{return{uri:"",isExecuting:void 0,trackType:"liked"}},searchArtistSource:()=>{return{uri:"",isExecuting:void 0,trackType:"liked"}},radioAlbumSource:()=>{return{uri:"",sortField:"NO_SORT",sortOrder:"ASC",limit:void 0,offset:void 0,isExecuting:void 0}},radioArtistSource:()=>{return{uri:"",sortField:"NO_SORT",sortOrder:"ASC",limit:void 0,offset:void 0,isExecuting:void 0}},radioTrackSource:()=>{return{uri:"",sortField:"NO_SORT",sortOrder:"ASC",limit:void 0,offset:void 0,isExecuting:void 0}},releaseDate:()=>{return{minDate:void 0,maxDate:void 0,isExecuting:void 0}},duration:()=>{return{minDuration:void 0,maxDuration:void 0,isExecuting:void 0}},intersection:()=>({isExecuting:void 0}),difference:()=>({isExecuting:void 0}),relativeComplement:()=>({isExecuting:void 0})},zy=e=>jy[e](),By=(t,n,e,r)=>{const a=r.filter(e=>e.target===t.id&&e.targetHandle===n);return e.filter(t=>a.some(e=>e.source===t.id)).map(e=>e.id)},Uy={likedSongsSource:(e,t)=>new _y(e.id,{source:[]},e.data),localTracksSource:(e,t)=>new Cy(e.id,{source:[]},e.data),libraryPlaylistSource:(e,t)=>new Ty(e.id,{source:[]},e.data),searchPlaylistSource:(e,t)=>new Ty(e.id,{source:[]},e.data),topTracksSource:(e,t)=>new Vy(e.id,{source:[]},e.data),libraryAlbumSource:(e,t)=>new yy(e.id,{source:[]},e.data),searchAlbumSource:(e,t)=>new yy(e.id,{source:[]},e.data),libraryArtistSource:(e,t)=>new xy(e.id,{source:[]},e.data),searchArtistSource:(e,t)=>new xy(e.id,{source:[]},e.data),deduplicate:(e,t)=>new ry(e.id,{source:t.map(e=>e.id)},e.data),isPlayable:(e,t)=>new om(e.id,{source:t.map(e=>e.id)},e.data),acousticness:(e,t)=>new Xd(e.id,{source:t.map(e=>e.id)},e.data),shuffle:(e,t)=>new sy(e.id,{source:t.map(e=>e.id)},e.data),result:(e,t)=>new dy(e.id,{source:t.map(e=>e.id)},e.data),sort:(e,t)=>new cy(e.id,{source:t.map(e=>e.id)},e.data),danceability:(e,t)=>new Jd(e.id,{source:t.map(e=>e.id)},e.data),energy:(e,t)=>new nm(e.id,{source:t.map(e=>e.id)},e.data),instrumentalness:(e,t)=>new am(e.id,{source:t.map(e=>e.id)},e.data),liveness:(e,t)=>new lm(e.id,{source:t.map(e=>e.id)},e.data),loudness:(e,t)=>new cm(e.id,{source:t.map(e=>e.id)},e.data),speechiness:(e,t)=>new Jg(e.id,{source:t.map(e=>e.id)},e.data),valence:(e,t)=>new ny(e.id,{source:t.map(e=>e.id)},e.data),tempo:(e,t)=>new ey(e.id,{source:t.map(e=>e.id)},e.data),mode:(e,t)=>new mm(e.id,{source:t.map(e=>e.id)},e.data),radioAlbumSource:(e,t)=>new Ay(e.id,{source:[]},e.data),radioArtistSource:(e,t)=>new Ay(e.id,{source:[]},e.data),radioTrackSource:(e,t)=>new Ay(e.id,{source:[]},e.data),releaseDate:(e,t)=>new Xg(e.id,{source:t.map(e=>e.id)},e.data),duration:(e,t)=>new em(e.id,{source:t.map(e=>e.id)},e.data),intersection:(e,t,n)=>new iy(e.id,{"first-set":By(e,"first-set",t,n),"second-set":By(e,"second-set",t,n)},e.data),difference:(e,t,n)=>new ay(e.id,{"first-set":By(e,"first-set",t,n),"second-set":By(e,"second-set",t,n)},e.data),relativeComplement:(e,t,n)=>new oy(e.id,{"first-set":By(e,"first-set",t,n),"second-set":By(e,"second-set",t,n)},e.data)};function $y(e){return"remove"===e.type}var Hy=rn((a,i)=>({reactFlowInstance:null,nodes:[],edges:[],result:[],workflowId:Iu(),workflowName:"My workflow",hasPendingChanges:!1,anyExecuting:!1,setReactFlowInstance:e=>{a({reactFlowInstance:e})},onNodesChange:e=>{a({nodes:yo(e,i().nodes)}),e.some(e=>{return"position"===(t=e).type&&void 0!==t.position||$y(e);var t})&&a({hasPendingChanges:!0})},onEdgesChange:e=>{a({edges:vo(e,i().edges)}),e.some(e=>$y(e))&&a({hasPendingChanges:!0})},onConnect:e=>{a({edges:si(e,i().edges),hasPendingChanges:!0})},addNode:(e,t)=>{t={id:Iu(),type:e,position:t,data:zy(e)};a({nodes:i().nodes.concat(t),hasPendingChanges:!0})},updateNodeData:(t,n)=>{a({nodes:i().nodes.map(e=>e.id===t?{...e,data:{...e.data,...n}}:e),hasPendingChanges:!0}),a({anyExecuting:i().nodes.some(e=>!0===e.data.isExecuting)})},setResult:e=>{a({result:e})},setWorkflowName:e=>{a({workflowName:e,hasPendingChanges:!0})},resetState:()=>{a({nodes:[],edges:[],result:[],workflowId:Iu(),workflowName:"My workflow",hasPendingChanges:!1})},onWorkflowSaved:()=>{a({hasPendingChanges:!1})},loadWorkflow:e=>{var{x:t=0,y:n=0,zoom:r=1}=e.viewport;i().reactFlowInstance?.setViewport({x:t,y:n,zoom:r}),a({nodes:e.nodes,edges:e.edges,hasPendingChanges:!1,workflowId:e.id,workflowName:e.name})},nodeFormValidationCallbacks:new Map,addValidationCallback:(e,t)=>{a({nodeFormValidationCallbacks:new Map(i().nodeFormValidationCallbacks).set(e,t)})},removeValidationCallback:e=>{var t=new Map(i().nodeFormValidationCallbacks);t.delete(e),a({nodeFormValidationCallbacks:t})},getNodes:()=>i().nodes,getEdges:()=>i().edges})),Zy=Hy;function Wy(t,e,n,r){const{updateNodeData:a,anyExecuting:i,addValidationCallback:o,removeValidationCallback:s}=Zy(Qs(e=>({updateNodeData:e.updateNodeData,anyExecuting:e.anyExecuting,addValidationCallback:e.addValidationCallback,removeValidationCallback:e.removeValidationCallback})));var l=(0,Eu.useCallback)(e=>{a(t,e)},[t,a]);const{formState:{errors:u},trigger:c,control:d,getValues:m,setError:f}=hu({mode:"onChange",disabled:i,defaultValues:n,values:e,resolver:wu(r)});return(0,Eu.useEffect)(()=>(o(t,async()=>c()),()=>{s(t)}),[t,o,s,c]),{errors:u,getValues:m,control:d,setError:f,updateNodeField:l}}var Ky=e(b()),Yy=e(b()),qy=e(ae());function Xy(a){const{min:i,max:o,step:s}=a;return Yy.default.createElement("div",null,Yy.default.createElement(Dl,{name:"range",control:a.control,render:({field:{onChange:t,value:n,ref:e},formState:{disabled:r}})=>Yy.default.createElement("div",{className:"flex flex-wrap justify-center"},Yy.default.createElement(qy.Range,{values:[n.min,n.max],step:s,min:i,max:o,rtl:!1,onChange:e=>{e={min:e[0],max:e[1]};t(e),a.onChange(e)},disabled:r,ref:e,renderTrack:({props:e,children:t})=>Yy.default.createElement("div",{onMouseDown:e.onMouseDown,onTouchStart:e.onTouchStart,style:{...e.style,height:"36px",display:"flex",width:"200px"}},Yy.default.createElement("div",{ref:e.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:(0,qy.getTrackBackground)({values:[n.min,n.max],colors:r?["var(--spice-tab-active)","var(--spice-button-disabled)","var(--spice-tab-active)"]:["var(--spice-tab-active)","var(--spice-button)","var(--spice-tab-active)"],min:i,max:o,rtl:!1}),alignSelf:"center"}},t)),renderThumb:({index:e,props:t})=>Yy.default.createElement("div",{...t,key:t.key,style:{...t.style,height:"14px",width:"14px",borderRadius:"7px",backgroundColor:r?"var(--spice-subtext)":"var(--spice-text)",display:"flex",justifyContent:"center",alignItems:"center"}},Yy.default.createElement("div",{style:{position:"absolute",bottom:"-28px",color:"var(--spice-text)",fontSize:"small",fontWeight:"bold",padding:"4px",borderRadius:"4px"}},[n.min,n.max][e]))}))}))}var Gy=e(b());function I(e){return Gy.default.createElement("div",{className:Spicetify.classnames("bg-spice-main-elevated rounded-sm text-base",e.isExecuting?"!outline-spice-button rounded-md !outline-2 !outline-solid":"",!e.isExecuting&&e.isSelected?"!outline-spice-button-transparent rounded-md !outline-2 !outline-solid":"",e.classname)},e.children)}var Jy=e(b());function C(e){return Jy.default.createElement("div",{className:Spicetify.classnames("nowheel nodrag flex cursor-default flex-col gap-1 !p-2",e.className)},e.children)}var Qy=e(b());function ev(e){return Qy.default.createElement("div",{className:"rounded-t-sm border-t !px-2 !py-0.5",style:{backgroundColor:e.backgroundColor,color:e.textColor}},Qy.default.createElement(S,{paddingBottom:"0",weight:"bold"},e.label))}function tv(){return Qy.default.createElement(ev,{label:"Source",backgroundColor:"cornflowerblue",textColor:"black"})}function nv(){return Qy.default.createElement(ev,{label:"Processing",backgroundColor:"greenyellow",textColor:"black"})}function rv(){return Qy.default.createElement(ev,{label:"Filter",backgroundColor:"violet",textColor:"black"})}var av=e(b()),iv=(...e)=>e.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" "),ov=e(b()),sv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},lv=(0,ov.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},l)=>(0,ov.createElement)("svg",{ref:l,...sv,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:iv("lucide",a),...s},[...o.map(([e,t])=>(0,ov.createElement)(e,t)),...Array.isArray(i)?i:[i]])),t=(r,a)=>{var e=(0,av.forwardRef)(({className:e,...t},n)=>(0,av.createElement)(lv,{ref:n,iconNode:a,className:iv("lucide-"+r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e),...t}));return e.displayName=""+r,e},uv=t("ArrowRightFromLine",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),cv=t("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),dv=t("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),mv=t("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),fv=t("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),hv=t("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),pv=t("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),gv=t("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),yv=t("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),vv=t("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),bv=t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wv=t("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Ev=t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sv=e(b());function N(e){return Sv.default.createElement("div",{className:"!mb-2 flex items-center gap-2"},Sv.default.createElement(S,{elementType:"p",weight:"bold",paddingBottom:"0"},e.title),e.tooltip&&Sv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.tooltip,showDelay:100},Sv.default.createElement(mv,{size:14,strokeWidth:1.5,className:"cursor-help"})))}var xv=e(b());var kv=e(b()),_v=e(b());function Iv(s){const{required:l=!1}=s;return _v.default.createElement(Dl,{control:s.control,name:s.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},fieldState:{invalid:i},formState:{disabled:o}})=>{return _v.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"number",placeholder:s.placeholder,onChange:e=>{e=l?e.target.valueAsNumber:""===(e=e.target.value)?void 0:Number(e);t(e),s.onChange(e)},onBlur:e,value:l?n:void 0===(i=n)?"":i.toString(),name:r,disabled:o,ref:a})}})}var Cv=e(b()),Nv=e(b());function Tv(e){return Nv.default.createElement(Nv.default.Fragment,null,e.error&&Nv.default.createElement("div",null,Nv.default.createElement(S,{elementType:"small",semanticColor:"textNegative"},e.error.message)))}function T(e){return Cv.default.createElement("label",{className:"flex flex-row items-start justify-between gap-5"},Cv.default.createElement("div",{className:"flex items-center gap-1"},Cv.default.createElement(S,{elementType:"small"},e.label),e.tooltip&&Cv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.tooltip,showDelay:100},Cv.default.createElement(mv,{size:12,strokeWidth:1.5,className:"cursor-help"}))),Cv.default.createElement("div",{className:"w-[200px]"},e.children,Cv.default.createElement(Tv,{error:e.error})))}var Ov=e(b());var Mv=e(b());var Av=e(b()),Rv=e(b());function Dv(o){return Rv.default.createElement(Dl,{control:o.control,name:o.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},formState:{disabled:i}})=>Rv.default.createElement("input",{type:"checkbox",onChange:e=>{e=e.target.checked;t(e),o.onChange(e)},onBlur:e,value:n,name:r,disabled:i,ref:a})})}var Pv=e(b());function Lv(e){return Pv.default.createElement(T,{label:e.label,error:e.error,tooltip:e.tooltip},Pv.default.createElement("div",{className:"flex justify-end"},e.children))}var Fv=e(b());var Vv=e(b());var jv=e(b()),zv=e(b());function Bv(n){return zv.default.createElement("select",{className:"main-dropDown-dropDown bg-spice-tab-active",name:n.name,disabled:n.disabled,value:n.selectedValue,onChange:t=>{var e=n.items.find(e=>e.value===t.target.value);e&&n.onItemClicked(e)},onBlur:n.onBlur,ref:n.ref},!n.selectedValue&&zv.default.createElement("option",{value:n.selectedValue,disabled:!0,selected:!0},n.selectLabel),n.items.map(e=>zv.default.createElement("option",{key:e.value,value:e.value},e.label)))}var Uv=e(b());function $v(o){return Uv.default.createElement(Dl,{name:o.name,control:o.control,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},formState:{disabled:i}})=>Uv.default.createElement(Bv,{selectLabel:o.label,selectedValue:n,items:o.items,onItemClicked:e=>{t(e.value),o.onChange&&o.onChange(e.value)},onBlur:e,name:r,disabled:i,ref:a})})}var Hv=[{label:"Major",value:"1"},{label:"Minor",value:"0"}];var Zv=e(b()),Wv=e(b());function Kv(s){return Wv.default.createElement(Dl,{control:s.control,name:s.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},fieldState:{invalid:i},formState:{disabled:o}})=>{return Wv.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"date",placeholder:s.placeholder,onChange:e=>{e=e.target.valueAsDate;t(e),s.onChange(e??void 0)},onBlur:e,value:null==(i=n)?"":_.fromJSDate(i).toISODate()??"",name:r,disabled:o,ref:a})}})}var Yv=e(b());var qv=e(b());var Xv=e(b());var Gv=e(b());var Jv=e(b());var Qv=e(b());var e0=e(b());var t0=e(b());var n0=e(b()),r0=[{value:"album",label:"Album"},{value:"artist",label:"Artist"},{value:"name",label:"Name"},{value:"source",label:"Source"},{value:"duration",label:"Duration"}],a0=[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}];var i0=e(b());var o0=e(b()),s0=e(b(),1);function l0(e,s,t){const l=(0,s0.useRef)(null),u=(0,s0.useRef)(0),c=(0,s0.useRef)(null),d=(0,s0.useRef)([]),m=(0,s0.useRef)(),f=(0,s0.useRef)(),h=(0,s0.useRef)(e),p=(0,s0.useRef)(!0),g=(h.current=e,"undefined"!=typeof window),y=!s&&0!==s&&g;if("function"!=typeof e)throw new TypeError("Expected a function");s=+s||0;const v=!!(t=t||{}).leading,b=!("trailing"in t&&!t.trailing),w="maxWait"in t,E="debounceOnServer"in t&&!!t.debounceOnServer,S=w?Math.max(+t.maxWait||0,s):null;return(0,s0.useEffect)(()=>(p.current=!0,()=>{p.current=!1}),[]),(0,s0.useMemo)(()=>{const r=e=>{var t=d.current,n=m.current;return d.current=m.current=null,u.current=e,f.current=h.current.apply(n,t)},a=(e,t)=>{y&&cancelAnimationFrame(c.current),c.current=y?requestAnimationFrame(e):setTimeout(e,t)},i=e=>{var t;return!!p.current&&(t=e-l.current,!l.current||s<=t||t<0||w&&e-u.current>=S)},n=e=>(c.current=null,b&&d.current?r(e):(d.current=m.current=null,f.current)),o=()=>{var e,t=Date.now();if(i(t))return n(t);p.current&&(e=s-(t-l.current),t=w?Math.min(e,S-(t-u.current)):e,a(o,t))},e=(...e)=>{if(g||E){var t=Date.now(),n=i(t);if(d.current=e,m.current=this,l.current=t,n){if(!c.current&&p.current)return u.current=l.current,a(o,s),v?r(l.current):f.current;if(w)return a(o,s),r(l.current)}return c.current||a(o,s),f.current}};return e.cancel=()=>{c.current&&(y?cancelAnimationFrame:clearTimeout)(c.current),u.current=0,d.current=l.current=m.current=c.current=null},e.isPending=()=>!!c.current,e.flush=()=>c.current?n(Date.now()):f.current,e},[v,w,s,S,b,y,g,E])}function u0(n,r,a,t){const[e,i]=(0,o0.useState)(null),[o,s]=(0,o0.useState)(""),[l,u]=(0,o0.useState)([]),c=l0(e=>{r(e).then(e=>{u(e)}).catch(e=>{console.error("Failed to fetch items",e)})},200);const d=(0,o0.useCallback)((e,t,n)=>{i(e),s(t),u(n)},[]);var m=(0,o0.useCallback)(async e=>{var t;""===e?(t=await r(""),d(null,"",t)):null===(t=await n(e))?d(null,"",[]):d(t,a(t),[t])},[n,r,a,d]);return{selectedItem:e,onItemSelected:e=>{t(e),i(e),s(a(e))},items:l,inputValue:o,onInputChanged:e=>{s(e),c(e)},resetSelection:()=>{t(null),i(null),s("")},syncInputWithSelectedItem:()=>{s(e?a(e):"")},onSelectedIdChanged:m}}var c0=e(b()),d0=e(b());function m0(e,t){if(null==e)return{};var n,r={};for(n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)!{}.hasOwnProperty.call(r,n)||(e[n]=r[n])}return e}).apply(null,arguments)}function f0(e,t){return(f0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=e(me()),L=e(b()),h0=e(B()),p0=e=>"object"==typeof e&&null!=e&&1===e.nodeType,g0=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,y0=(e,t)=>{var n;return(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth)&&(n=getComputedStyle(e,null),g0(n.overflowY,t)||g0(n.overflowX,t)||!!(t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(n=e))&&(t.clientHeight<n.scrollHeight||t.clientWidth<n.scrollWidth))},v0=(e,t,n,r,a,i,o,s)=>i<e&&t<o||e<i&&o<t?0:i<=e&&s<=n||t<=o&&n<=s?i-e-r:t<o&&s<n||i<e&&n<s?o-t+a:0,b0=e=>{var t=e.parentElement;return null==t?e.getRootNode().host||null:t},w0=function(){return(w0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},E0=0;function S0(e){return"function"==typeof e?e:x0}function x0(){}function k0(e,t){e&&((e,t)=>{if("undefined"==typeof document)return[];const{scrollMode:L,block:r,inline:a,boundary:n,skipOverflowHiddenElements:F}=t,V="function"==typeof n?n:e=>e!==n;if(!p0(e))throw new TypeError("Invalid target");var i=document.scrollingElement||document.documentElement,o=[];let s=e;for(;p0(s)&&V(s);){if((s=b0(s))===i){o.push(s);break}null!=s&&s===document.body&&y0(s)&&!y0(document.documentElement)||null!=s&&y0(s,F)&&o.push(s)}var l=null!=(t=null==(t=window.visualViewport)?void 0:t.width)?t:innerWidth,u=null!=(t=null==(t=window.visualViewport)?void 0:t.height)?t:innerHeight,{scrollX:c,scrollY:d}=window,{height:m,width:f,top:h,right:p,bottom:g,left:y}=e.getBoundingClientRect(),{top:e,right:t,bottom:j,left:z}=(t=window.getComputedStyle(e),{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0});let v="start"===r||"nearest"===r?h-e:"end"===r?g+j:h+m/2-e+j,b="center"===a?y+f/2-z+t:"end"===a?p+t:y-z;var w=[];for(let n=0;n<o.length;n++){var E=o[n],{height:S,width:x,top:k,right:_,bottom:I,left:C}=E.getBoundingClientRect();if("if-needed"===L&&0<=h&&0<=y&&g<=u&&p<=l&&(E===i&&!y0(E)||k<=h&&g<=I&&C<=y&&p<=_))return w;var N=getComputedStyle(E),T=parseInt(N.borderLeftWidth,10),O=parseInt(N.borderTopWidth,10),M=parseInt(N.borderRightWidth,10),N=parseInt(N.borderBottomWidth,10);let e=0,t=0;var A="offsetWidth"in E?E.offsetWidth-E.clientWidth-T-M:0,R="offsetHeight"in E?E.offsetHeight-E.clientHeight-O-N:0,D=!("offsetWidth"in E)||0===E.offsetWidth?0:x/E.offsetWidth,P=!("offsetHeight"in E)||0===E.offsetHeight?0:S/E.offsetHeight;i===E?(e="start"===r?v:"end"===r?v-u:"nearest"===r?v0(d,d+u,u,O,N,d+v,d+v+m,m):v-u/2,t="start"===a?b:"center"===a?b-l/2:"end"===a?b-l:v0(c,c+l,l,T,M,c+b,c+b+f,f),e=Math.max(0,e+d),t=Math.max(0,t+c)):(e="start"===r?v-k-O:"end"===r?v-I+N+R:"nearest"===r?v0(k,I,S,O,N+R,v,v+m,m):v-(k+S/2)+R/2,t="start"===a?b-C-T:"center"===a?b-(C+x/2)+A/2:"end"===a?b-_+M+A:v0(C,_,x,T,M+A,b,b+f,f),{scrollLeft:I,scrollTop:O}=E,e=0==P?0:Math.max(0,Math.min(O+e/P,E.scrollHeight-S/P+R)),t=0==D?0:Math.max(0,Math.min(I+t/D,E.scrollWidth-x/D+A)),v+=O-e,b+=I-t),w.push({el:E,top:e,left:t})}return w})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(function(e){var t=e.el,n=e.top,e=e.left;t.scrollTop=n,t.scrollLeft=e})}function _0(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function I0(r,a){var i;function o(){i&&clearTimeout(i)}function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o(),i=setTimeout(function(){i=null,r.apply(void 0,t)},a)}return e.cancel=o,e}function C0(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return a.some(function(e){return e&&e.apply(void 0,[t].concat(n)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault})}}function N0(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(t){n.forEach(function(e){"function"==typeof e?e(t):e&&(e.current=t)})}}function T0(){return String(E0++)}function O0(e){var t=e.isOpen,n=e.resultCount,e=e.previousResultCount;return t?n?n!==e?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function M0(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}function A0(e){return"string"==typeof e.type}function R0(e){return e.props}var D0=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function P0(t){void 0===t&&(t={});var n={};return D0.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}function L0(n,r){return n&&r?Object.keys(n).reduce(function(e,t){return e[t]=(F0(r,t)?r:n)[t],e},{}):n}function F0(e,t){return void 0!==e[t]}function V0(e){var t=e.key,e=e.keyCode;return 37<=e&&e<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function j0(e,t,n,r,a){void 0===a&&(a=!1);var i,o,s=n.length;return 0===s?-1:(o=s-1,(i=(e="number"!=typeof e||e<0||o<e?0<t?-1:1+o:e)+t)<0?i=a?o:0:o<i&&(i=a?0:o),-1===(o=z0(i,t<0,n,r,a))?s<=e?-1:e:o)}function z0(e,t,n,r,a){void 0===a&&(a=!1);var i=n.length;if(t){for(var o=e;0<=o;o--)if(!r(n[o],o))return o}else for(var s=e;s<i;s++)if(!r(n[s],s))return s;return a?z0(t?i-1:0,t,n,r):-1}function B0(t,e,n,r){return void 0===r&&(r=!0),n&&e.some(function(e){return e&&(_0(e,t,n)||r&&_0(e,n.document.activeElement,n))})}var U0=x0,U0=function(e,t,n){var r="This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props";Object.keys(e).forEach(function(e){void 0!==t[e]&&void 0===n[e]?console.error('downshift: A component has changed the controlled prop "'+e+'" to be uncontrolled. '+r):void 0===t[e]&&void 0!==n[e]&&console.error('downshift: A component has changed the uncontrolled prop "'+e+'" to be controlled. '+r)})},$0=I0(function(e){H0(e).textContent=""},500);function H0(e){var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t)),t}function Z0(e,t){e&&t&&(H0(t).textContent=e,$0(t))}var W0="__autocomplete_unknown__",K0="__autocomplete_mouseup__",Y0="__autocomplete_item_mouseenter__",q0="__autocomplete_keydown_arrow_up__",X0="__autocomplete_keydown_arrow_down__",G0="__autocomplete_keydown_escape__",J0="__autocomplete_keydown_enter__",Q0="__autocomplete_keydown_home__",eb="__autocomplete_keydown_end__",tb="__autocomplete_click_item__",nb="__autocomplete_blur_input__",rb="__autocomplete_change_input__",ab="__autocomplete_keydown_space_button__",ib="__autocomplete_click_button__",ob="__autocomplete_blur_button__",sb="__autocomplete_controlled_prop_updated_selected_item__",lb="__autocomplete_touchend__",ub=Object.freeze({__proto__:null,blurButton:ob,blurInput:nb,changeInput:rb,clickButton:ib,clickItem:tb,controlledPropUpdatedSelectedItem:sb,itemMouseEnter:Y0,keyDownArrowDown:X0,keyDownArrowUp:q0,keyDownEnd:eb,keyDownEnter:J0,keyDownEscape:G0,keyDownHome:Q0,keyDownSpaceButton:ab,mouseUp:K0,touchEnd:lb,unknown:W0}),cb=["refKey","ref"],db=["onClick","onPress","onKeyDown","onKeyUp","onBlur"],mb=["onKeyDown","onBlur","onChange","onInput","onChangeText"],fb=["refKey","ref"],hb=["onMouseMove","onMouseDown","onClick","onPress","index","item"];function pb(e,t){t=t.refKey;e||console.error('downshift: The ref prop "'+t+'" from getMenuProps was not applied correctly on your menu element.')}var gb={highlightedIndex:-1,isOpen:!(function(){var e=function(o){function e(e){var c=o.call(this,e)||this,e=(c.id=c.props.id||"downshift-"+T0(),c.menuId=c.props.menuId||c.id+"-menu",c.labelId=c.props.labelId||c.id+"-label",c.inputId=c.props.inputId||c.id+"-input",c.getItemId=c.props.getItemId||function(e){return c.id+"-item-"+e},c.items=[],c.itemCount=null,c.previousResultCount=0,c.timeoutIds=[],c.internalSetTimeout=function(e,t){var n=setTimeout(function(){c.timeoutIds=c.timeoutIds.filter(function(e){return e!==n}),e()},t);c.timeoutIds.push(n)},c.setItemCount=function(e){c.itemCount=e},c.unsetItemCount=function(){c.itemCount=null},c.isItemDisabled=function(e,t){t=c.getItemNodeFromIndex(t);return t&&t.hasAttribute("disabled")},c.setHighlightedIndex=function(e,t){void 0===e&&(e=c.props.defaultHighlightedIndex),t=P0(t=void 0===t?{}:t),c.internalSetState(P({highlightedIndex:e},t))},c.clearSelection=function(e){c.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:c.props.defaultHighlightedIndex,isOpen:c.props.defaultIsOpen},e)},c.selectItem=function(e,t,n){t=P0(t),c.internalSetState(P({isOpen:c.props.defaultIsOpen,highlightedIndex:c.props.defaultHighlightedIndex,selectedItem:e,inputValue:c.props.itemToString(e)},t),n)},c.selectItemAtIndex=function(e,t,n){e=c.items[e];null!=e&&c.selectItem(e,t,n)},c.selectHighlightedItem=function(e,t){return c.selectItemAtIndex(c.getState().highlightedIndex,e,t)},c.internalSetState=function(e,t){var a,i,o={},s="function"==typeof e;return!s&&e.hasOwnProperty("inputValue")&&c.props.onInputValueChange(e.inputValue,P({},c.getStateAndHelpers(),e)),c.setState(function(t){t=c.getState(t);var n=s?e(t):e,n=c.props.stateReducer(t,n),r=(a=n.hasOwnProperty("selectedItem"),{});return a&&n.selectedItem!==t.selectedItem&&(i=n.selectedItem),n.type||(n.type=W0),Object.keys(n).forEach(function(e){t[e]!==n[e]&&(o[e]=n[e]),"type"===e||(n[e],F0(c.props,e))||(r[e]=n[e])}),s&&n.hasOwnProperty("inputValue")&&c.props.onInputValueChange(n.inputValue,P({},c.getStateAndHelpers(),n)),r},function(){S0(t)(),1<Object.keys(o).length&&c.props.onStateChange(o,c.getStateAndHelpers()),a&&c.props.onSelect(e.selectedItem,c.getStateAndHelpers()),void 0!==i&&c.props.onChange(i,c.getStateAndHelpers()),c.props.onUserAction(o,c.getStateAndHelpers())})},c.rootRef=function(e){return c._rootNode=e},c.getRootProps=function(e,t){var n,e=void 0===e?{}:e,r=e.refKey,r=void 0===r?"ref":r,a=e.ref,e=m0(e,cb),t=(void 0===t?{}:t).suppressRefError,t=void 0!==t&&t;c.getRootProps.called=!0,c.getRootProps.refKey=r,c.getRootProps.suppressRefError=t;t=c.getState().isOpen;return P(((n={})[r]=N0(a,c.rootRef),n.role="combobox",n["aria-expanded"]=t,n["aria-haspopup"]="listbox",n["aria-owns"]=t?c.menuId:void 0,n["aria-labelledby"]=c.labelId,n),e)},c.keyDownHandlers={ArrowDown:function(e){var t=this;e.preventDefault(),this.getState().isOpen?(e=e.shiftKey?5:1,this.moveHighlightedIndex(e,{type:X0})):this.internalSetState({isOpen:!0,type:X0},function(){var e=t.getItemCount();0<e&&(e=j0(t.getState().highlightedIndex,1,{length:e},t.isItemDisabled,!0),t.setHighlightedIndex(e,{type:X0}))})},ArrowUp:function(e){var t=this;e.preventDefault(),this.getState().isOpen?(e=e.shiftKey?-5:-1,this.moveHighlightedIndex(e,{type:q0})):this.internalSetState({isOpen:!0,type:q0},function(){var e=t.getItemCount();0<e&&(e=j0(t.getState().highlightedIndex,-1,{length:e},t.isItemDisabled,!0),t.setHighlightedIndex(e,{type:q0}))})},Enter:function(e){var t,n;229!==e.which&&(n=(t=this.getState()).isOpen,t=t.highlightedIndex,n)&&null!=t&&(e.preventDefault(),n=this.items[t],e=this.getItemNodeFromIndex(t),null==n||e&&e.hasAttribute("disabled")||this.selectHighlightedItem({type:J0}))},Escape:function(e){e.preventDefault(),this.reset(P({type:G0},!this.state.isOpen&&{selectedItem:null,inputValue:""}))}},c.buttonKeyDownHandlers=P({},c.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:ab})}}),c.inputKeyDownHandlers=P({},c.keyDownHandlers,{Home:function(e){var t=this.getState().isOpen;t&&(e.preventDefault(),(e=this.getItemCount())<=0||!t||(t=z0(0,!1,{length:e},this.isItemDisabled),this.setHighlightedIndex(t,{type:Q0})))},End:function(e){var t=this.getState().isOpen;t&&(e.preventDefault(),(e=this.getItemCount())<=0||!t||(t=z0(e-1,!0,{length:e},this.isItemDisabled),this.setHighlightedIndex(t,{type:eb})))}}),c.getToggleButtonProps=function(e){var e=void 0===e?{}:e,t=e.onClick,n=(e.onPress,e.onKeyDown),r=e.onKeyUp,a=e.onBlur,e=m0(e,db),i=c.getState().isOpen,t={onClick:C0(t,c.buttonHandleClick),onKeyDown:C0(n,c.buttonHandleKeyDown),onKeyUp:C0(r,c.buttonHandleKeyUp),onBlur:C0(a,c.buttonHandleBlur)};return P({type:"button",role:"button","aria-label":i?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},e.disabled?{}:t,e)},c.buttonHandleKeyUp=function(e){e.preventDefault()},c.buttonHandleKeyDown=function(e){var t=V0(e);c.buttonKeyDownHandlers[t]&&c.buttonKeyDownHandlers[t].call(c,e)},c.buttonHandleClick=function(e){var t,n;e.preventDefault(),c.props.environment&&(t=(n=c.props.environment.document).body,n=n.activeElement,t)&&t===n&&e.target.focus(),c.internalSetTimeout(function(){return c.toggleMenu({type:ib})})},c.buttonHandleBlur=function(e){var t=e.target;c.internalSetTimeout(function(){var e;c.isMouseDown||!c.props.environment||null!=(e=c.props.environment.document.activeElement)&&e.id===c.inputId||e===t||c.reset({type:ob})})},c.getLabelProps=function(e){return P({htmlFor:c.inputId,id:c.labelId},e)},c.getInputProps=function(e){var t,e=void 0===e?{}:e,n=e.onKeyDown,r=e.onBlur,a=e.onChange,i=e.onInput,e=(e.onChangeText,m0(e,mb)),o={},s=c.getState(),l=s.inputValue,u=s.isOpen,s=s.highlightedIndex;return e.disabled||((t={}).onChange=C0(a,i,c.inputHandleChange),t.onKeyDown=C0(n,c.inputHandleKeyDown),t.onBlur=C0(r,c.inputHandleBlur),o=t),P({"aria-autocomplete":"list","aria-activedescendant":u&&"number"==typeof s&&0<=s?c.getItemId(s):void 0,"aria-controls":u?c.menuId:void 0,"aria-labelledby":e&&e["aria-label"]?void 0:c.labelId,autoComplete:"off",value:l,id:c.inputId},o,e)},c.inputHandleKeyDown=function(e){var t=V0(e);t&&c.inputKeyDownHandlers[t]&&c.inputKeyDownHandlers[t].call(c,e)},c.inputHandleChange=function(e){c.internalSetState({type:rb,isOpen:!0,inputValue:e.target.value,highlightedIndex:c.props.defaultHighlightedIndex})},c.inputHandleBlur=function(){c.internalSetTimeout(function(){var e,t;c.isMouseDown||!c.props.environment||(null==(t=c.props.environment.document.activeElement)||null==(e=t.dataset)?void 0:e.toggle)&&c._rootNode&&c._rootNode.contains(t)||c.reset({type:nb})})},c.menuRef=function(e){c._menuNode=e},c.getMenuProps=function(e,t){var e=void 0===e?{}:e,n=e.refKey,n=void 0===n?"ref":n,r=e.ref,e=m0(e,fb),t=(void 0===t?{}:t).suppressRefError,t=void 0!==t&&t;return c.getMenuProps.called=!0,c.getMenuProps.refKey=n,c.getMenuProps.suppressRefError=t,P(((t={})[n]=N0(r,c.menuRef),t.role="listbox",t["aria-labelledby"]=e&&e["aria-label"]?void 0:c.labelId,t.id=c.menuId,t),e)},c.getItemProps=function(e){var e=void 0===e?{}:e,t=e.onMouseMove,n=e.onMouseDown,r=e.onClick,a=(e.onPress,e.index),i=e.item,i=void 0===i?void console.error('The property "item" is required in "getItemProps"'):i,e=m0(e,hb),i=(void 0===a?(c.items.push(i),a=c.items.indexOf(i)):c.items[a]=i,r),t=((r={onMouseMove:C0(t,function(){a!==c.getState().highlightedIndex&&(c.setHighlightedIndex(a,{type:Y0}),c.avoidScrolling=!0,c.internalSetTimeout(function(){return c.avoidScrolling=!1},250))}),onMouseDown:C0(n,function(e){e.preventDefault()})}).onClick=C0(i,function(){c.selectItemAtIndex(a,{type:tb})}),r),n=e.disabled?{onMouseDown:t.onMouseDown}:t;return P({id:c.getItemId(a),role:"option","aria-selected":c.getState().highlightedIndex===a},n,e)},c.clearItems=function(){c.items=[]},c.reset=function(t,e){t=P0(t=void 0===t?{}:t),c.internalSetState(function(e){e=e.selectedItem;return P({isOpen:c.props.defaultIsOpen,highlightedIndex:c.props.defaultHighlightedIndex,inputValue:c.props.itemToString(e)},t)},e)},c.toggleMenu=function(n,r){n=P0(n=void 0===n?{}:n),c.internalSetState(function(e){e=e.isOpen;return P({isOpen:!e},e&&{highlightedIndex:c.props.defaultHighlightedIndex},n)},function(){var e=c.getState(),t=e.isOpen,e=e.highlightedIndex;t&&0<c.getItemCount()&&"number"==typeof e&&c.setHighlightedIndex(e,n),S0(r)()})},c.openMenu=function(e){c.internalSetState({isOpen:!0},e)},c.closeMenu=function(e){c.internalSetState({isOpen:!1},e)},c.updateStatus=I0(function(){var e,t,n;null!=(e=c.props)&&null!=(e=e.environment)&&e.document&&(e=c.getState(),n=c.items[e.highlightedIndex],t=c.getItemCount(),n=c.props.getA11yStatusMessage(P({itemToString:c.props.itemToString,previousResultCount:c.previousResultCount,resultCount:t,highlightedItem:n},e)),c.previousResultCount=t,Z0(n,c.props.environment.document))},200),c.props),t=e.defaultHighlightedIndex,n=e.initialHighlightedIndex,r=e.defaultIsOpen,a=e.initialIsOpen,i=e.initialInputValue,e=e.initialSelectedItem,t=c.getState({highlightedIndex:void 0===n?t:n,isOpen:void 0===a?r:a,inputValue:void 0===i?"":i,selectedItem:void 0===e?null:e});return null!=t.selectedItem&&void 0===c.props.initialInputValue&&(t.inputValue=c.props.itemToString(t.selectedItem)),c.state=t,c}t=o,(n=e).prototype=Object.create(t.prototype),f0(n.prototype.constructor=n,t);var t,n=e.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach(function(e){clearTimeout(e)}),this.timeoutIds=[]},n.getState=function(e){return L0(e=void 0===e?this.state:e,this.props)},n.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},n.getItemNodeFromIndex=function(e){return this.props.environment?this.props.environment.document.getElementById(this.getItemId(e)):null},n.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},n.moveHighlightedIndex=function(e,t){var n=this.getItemCount(),r=this.getState().highlightedIndex;0<n&&(r=j0(r,e,{length:n},this.isItemDisabled,!0),this.setHighlightedIndex(r,t))},n.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,n=e.inputValue,r=e.selectedItem,e=e.isOpen,a=this.props.itemToString,i=this.id,o=this.getRootProps,s=this.getToggleButtonProps,l=this.getLabelProps,u=this.getMenuProps,c=this.getInputProps,d=this.getItemProps,m=this.openMenu,f=this.closeMenu,h=this.toggleMenu,p=this.selectItem,g=this.selectItemAtIndex,y=this.selectHighlightedItem,v=this.setHighlightedIndex,b=this.clearSelection,w=this.clearItems;return{getRootProps:o,getToggleButtonProps:s,getLabelProps:l,getMenuProps:u,getInputProps:c,getItemProps:d,reset:this.reset,openMenu:m,closeMenu:f,toggleMenu:h,selectItem:p,selectItemAtIndex:g,selectHighlightedItem:y,setHighlightedIndex:v,clearSelection:b,clearItems:w,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:a,id:i,highlightedIndex:t,inputValue:n,isOpen:e,selectedItem:r}},n.componentDidMount=function(){var e,t,n,r,a,i,o=this;this.getMenuProps.called&&!this.getMenuProps.suppressRefError&&pb(this._menuNode,this.getMenuProps),this.props.environment?(t=function(e){o.isMouseDown=!1,!B0(e.target,[o._rootNode,o._menuNode],o.props.environment)&&o.getState().isOpen&&o.reset({type:K0},function(){return o.props.onOuterClick(o.getStateAndHelpers())})},n=function(){o.isTouchMove=!1},r=function(){o.isTouchMove=!0},a=function(e){e=B0(e.target,[o._rootNode,o._menuNode],o.props.environment,!1);o.isTouchMove||e||!o.getState().isOpen||o.reset({type:lb},function(){return o.props.onOuterClick(o.getStateAndHelpers())})},(i=this.props.environment).addEventListener("mousedown",e=function(){o.isMouseDown=!0}),i.addEventListener("mouseup",t),i.addEventListener("touchstart",n),i.addEventListener("touchmove",r),i.addEventListener("touchend",a),this.cleanup=function(){o.internalClearTimeouts(),o.updateStatus.cancel(),i.removeEventListener("mousedown",e),i.removeEventListener("mouseup",t),i.removeEventListener("touchstart",n),i.removeEventListener("touchmove",r),i.removeEventListener("touchend",a)}):this.cleanup=function(){o.internalClearTimeouts()}},n.shouldScroll=function(e,t){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,t=(void 0===t.highlightedIndex?e:t).highlightedIndex;return n&&this.getState().isOpen&&!e.isOpen||n!==t},n.componentDidUpdate=function(e,t){U0(this.state,e,this.props),this.getMenuProps.called&&!this.getMenuProps.suppressRefError&&pb(this._menuNode,this.getMenuProps),F0(this.props,"selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:sb,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var e,t,n,r,a=M0(this.props.children,x0),a=(this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1,M0(a(this.getStateAndHelpers())));if(!a)return null;if(this.getRootProps.called||this.props.suppressRefError)return this.getRootProps.suppressRefError||this.props.suppressRefError||(e=a,t=this.getRootProps,n="ref"!==(t=t.refKey),!(r=!A0(e))||n||(0,h0.isForwardRef)(e)?!r&&n&&console.error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified "'+t+'"'):console.error("downshift: You returned a non-DOM element. You must specify a refKey in getRootProps"),(0,h0.isForwardRef)(e))||R0(e)[t]||console.error('downshift: You must apply the ref prop "'+t+'" from getRootProps onto your root element.'),a;if(A0(a))return(0,L.cloneElement)(a,this.getRootProps(R0(a)));throw new Error("downshift: If you return a non-DOM element, you must apply the getRootProps function")},e}(L.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:O0,itemToString:function(e){return null==e?"":("[object Object]"!==Object.prototype.toString.call(e)||e.hasOwnProperty("toString")||console.warn("downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.","The object that was passed:",e),String(e))},onStateChange:x0,onInputValueChange:x0,onUserAction:x0,onChange:x0,onSelect:x0,onOuterClick:x0,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?void 0:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:k0},e.stateChangeTypes=ub,e}().propTypes={children:m.default.func,defaultHighlightedIndex:m.default.number,defaultIsOpen:m.default.bool,initialHighlightedIndex:m.default.number,initialSelectedItem:m.default.any,initialInputValue:m.default.string,initialIsOpen:m.default.bool,getA11yStatusMessage:m.default.func,itemToString:m.default.func,onChange:m.default.func,onSelect:m.default.func,onStateChange:m.default.func,onInputValueChange:m.default.func,onUserAction:m.default.func,onOuterClick:m.default.func,selectedItemChanged:m.default.func,stateReducer:m.default.func,itemCount:m.default.number,id:m.default.string,environment:m.default.shape({addEventListener:m.default.func.isRequired,removeEventListener:m.default.func.isRequired,document:m.default.shape({createElement:m.default.func.isRequired,getElementById:m.default.func.isRequired,activeElement:m.default.any.isRequired,body:m.default.any.isRequired}).isRequired,Node:m.default.func.isRequired}),suppressRefError:m.default.bool,scrollIntoView:m.default.func,selectedItem:m.default.any,isOpen:m.default.bool,inputValue:m.default.string,highlightedIndex:m.default.number,labelId:m.default.string,inputId:m.default.string,menuId:m.default.string,getItemId:m.default.func}),selectedItem:null,inputValue:""};function yb(s,l,u){var e=s.props,t=s.type,c={};Object.keys(l).forEach(function(e){var t,n,r,a,i,o;t=e,r=l,a=u,i=(n=s).props,n=s.type,o="on"+Sb(t)+"Change",i[o]&&void 0!==a[t]&&a[t]!==r[t]&&i[o](P({type:n},a)),u[e]!==l[e]&&(c[e]=u[e])}),e.onStateChange&&Object.keys(c).length&&e.onStateChange(P({type:t},c))}var vb=I0(function(e,t){Z0(e,t)},200),bb="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?L.useLayoutEffect:L.useEffect,wb="useId"in L.default?function(e){var t=e.id,n=e.labelId,r=e.menuId,a=e.getItemId,i=e.toggleButtonId,e=e.inputId,o="downshift-"+L.default.useId(),t=t||o;return(0,L.useRef)({labelId:n||t+"-label",menuId:r||t+"-menu",getItemId:a||function(e){return t+"-item-"+e},toggleButtonId:i||t+"-toggle-button",inputId:e||t+"-input"}).current}:function(e){var t=e.id,n=void 0===t?"downshift-"+T0():t,t=e.labelId,r=e.menuId,a=e.getItemId,i=e.toggleButtonId,e=e.inputId;return(0,L.useRef)({labelId:t||n+"-label",menuId:r||n+"-menu",getItemId:a||function(e){return n+"-item-"+e},toggleButtonId:i||n+"-toggle-button",inputId:e||n+"-input"}).current};function Eb(e,t,n,r){var a,i;if(void 0===e){if(void 0===t)throw new Error(r);a=n[t],i=t}else i=void 0===t?n.indexOf(e):t,a=e;return[a,i]}function Sb(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function xb(e){var t=(0,L.useRef)(e);return t.current=e,t}function kb(r,e,t,n){var a=(0,L.useRef)(),i=(0,L.useRef)(),o=(0,L.useCallback)(function(e,t){e=L0(e,(i.current=t).props);var n=r(e,t);return t.props.stateReducer(e,P({},t,{changes:n}))},[r]),o=(0,L.useReducer)(o,e,t),s=o[0],l=o[1],u=xb(e),t=(0,L.useCallback)(function(e){return l(P({props:u.current},e))},[u]),c=i.current;return(0,L.useEffect)(function(){var e=L0(a.current,null==c?void 0:c.props);c&&a.current&&!n(e,s)&&yb(c,e,s),a.current=s},[s,c,n]),[s,t]}function _b(e,t,n,r){e=kb(e,t,n,r),n=e[0],r=e[1];return[L0(n,t),r]}Id={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:function(e,t){return t.changes},scrollIntoView:k0,environment:"undefined"==typeof window?void 0:window};function Ib(e,t,n){void 0===n&&(n=gb);e=e["default"+Sb(t)];return void 0!==e?e:n[t]}function Cb(e,t,n){void 0===n&&(n=gb);var r=e[t];return void 0!==r||void 0!==(r=e["initial"+Sb(t)])?r:Ib(e,t,n)}function Nb(t){var n=Cb(t,"selectedItem"),e=Cb(t,"isOpen"),r=function(e){var t=Cb(e,"highlightedIndex");if(-1<t&&e.isItemDisabled(e.items[t],t))return-1;return t}(t),a=Cb(t,"inputValue");return{highlightedIndex:r<0&&n&&e?t.items.findIndex(function(e){return t.itemToKey(e)===t.itemToKey(n)}):r,isOpen:e,selectedItem:n,inputValue:a}}function Tb(e,t,n){var r=e.items,a=e.initialHighlightedIndex,i=e.defaultHighlightedIndex,o=e.isItemDisabled,s=e.itemToKey,l=t.selectedItem,e=t.highlightedIndex;return 0===r.length?-1:void 0===a||e!==a||o(r[a],a)?void 0===i||o(r[i],i)?l?r.findIndex(function(e){return s(l)===s(e)}):n<0&&!o(r[r.length-1],r.length-1)?r.length-1:0<n&&!o(r[0],0)?0:-1:i:a}function Ob(o,s,l){var u=(0,L.useRef)({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return(0,L.useEffect)(function(){var t;return o?(t=l.map(function(e){return e.current}),o.addEventListener("mousedown",e),o.addEventListener("mouseup",n),o.addEventListener("touchstart",r),o.addEventListener("touchmove",a),o.addEventListener("touchend",i),function(){o.removeEventListener("mousedown",e),o.removeEventListener("mouseup",n),o.removeEventListener("touchstart",r),o.removeEventListener("touchmove",a),o.removeEventListener("touchend",i)}):x0;function e(){u.current.isTouchEnd=!1,u.current.isMouseDown=!0}function n(e){u.current.isMouseDown=!1,B0(e.target,t,o)||s()}function r(){u.current.isTouchEnd=!1,u.current.isTouchMove=!1}function a(){u.current.isTouchMove=!0}function i(e){u.current.isTouchEnd=!0,u.current.isTouchMove||B0(e.target,t,o,!1)||s()}},[l,o,s]),u.current}var Mb=function(){return x0};function Ab(t,n,e,r){var a=(r=void 0===r?{}:r).document,i=Fb();(0,L.useEffect)(function(){var e;t&&!i&&a&&(e=t(n),vb(e,a))},e),(0,L.useEffect)(function(){return function(){var e;vb.cancel(),(e=null==(e=a)?void 0:e.getElementById("a11y-status-message"))&&e.remove()}},[a])}function Rb(e){var t=e.highlightedIndex,n=e.isOpen,r=e.itemRefs,a=e.getItemNodeFromIndex,i=e.menuElement,o=e.scrollIntoView,s=(0,L.useRef)(!0);return bb(function(){t<0||!n||!Object.keys(r.current).length||(!1===s.current?s.current=!0:o(a(t),i))},[t]),s}var Mb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=(0,L.useRef)(t.reduce(function(e,t){return e[t]={},e},{}));return(0,L.useEffect)(function(){Object.keys(a.current).forEach(function(e){var t,n,r=a.current[e];Object.keys(r).length?(t=r.suppressRefError,n=r.refKey,r=r.elementRef,t||null!=r&&r.current||console.error('downshift: The ref prop "'+n+'" from '+e+" was not applied correctly on your element.")):console.error("downshift: You forgot to call the "+e+" getter function on your component / element.")})},[]),(0,L.useCallback)(function(e,t,n,r){a.current[e]={suppressRefError:t,refKey:n,elementRef:r}},[])},Db=x0;function Pb(e,t,n){var r;return void 0===n&&(n=!0),P({isOpen:!1,highlightedIndex:-1},(null==(r=e.items)?void 0:r.length)&&0<=t&&P({selectedItem:e.items[t],isOpen:Ib(e,"isOpen"),highlightedIndex:Ib(e,"highlightedIndex")},n&&{inputValue:e.itemToString(e.items[t])}))}function Lb(e,t){return e.isOpen===t.isOpen&&e.inputValue===t.inputValue&&e.highlightedIndex===t.highlightedIndex&&e.selectedItem===t.selectedItem}function Fb(){var e=L.default.useRef(!0);return L.default.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]),e.current}function Vb(e){var t=Ib(e,"highlightedIndex");return-1<t&&e.isItemDisabled(e.items[t],t)?-1:t}Db=function(e){var t=e.props,n=e.state,r=(0,L.useRef)(t),a=Fb();(0,L.useEffect)(function(){a||(U0(n,r.current,t),r.current=t)},[n,t,a])},u={environment:m.default.shape({addEventListener:m.default.func.isRequired,removeEventListener:m.default.func.isRequired,document:m.default.shape({createElement:m.default.func.isRequired,getElementById:m.default.func.isRequired,activeElement:m.default.any.isRequired,body:m.default.any.isRequired}).isRequired,Node:m.default.func.isRequired}),itemToString:m.default.func,itemToKey:m.default.func,stateReducer:m.default.func},xd=P({},u,{getA11yStatusMessage:m.default.func,highlightedIndex:m.default.number,defaultHighlightedIndex:m.default.number,initialHighlightedIndex:m.default.number,isOpen:m.default.bool,defaultIsOpen:m.default.bool,initialIsOpen:m.default.bool,selectedItem:m.default.any,initialSelectedItem:m.default.any,defaultSelectedItem:m.default.any,id:m.default.string,labelId:m.default.string,menuId:m.default.string,getItemId:m.default.func,toggleButtonId:m.default.string,onSelectedItemChange:m.default.func,onHighlightedIndexChange:m.default.func,onStateChange:m.default.func,onIsOpenChange:m.default.func,scrollIntoView:m.default.func});function jb(e,t,n){var r,a=t.type,i=t.props;switch(a){case n.ItemMouseMove:r={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:r={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Tb(i,e,0)};break;case n.FunctionOpenMenu:r={isOpen:!0,highlightedIndex:Tb(i,e,0)};break;case n.FunctionCloseMenu:r={isOpen:!1};break;case n.FunctionSetHighlightedIndex:r={highlightedIndex:i.isItemDisabled(i.items[t.highlightedIndex],t.highlightedIndex)?-1:t.highlightedIndex};break;case n.FunctionSetInputValue:r={inputValue:t.inputValue};break;case n.FunctionReset:r={highlightedIndex:Vb(i),isOpen:Ib(i,"isOpen"),selectedItem:Ib(i,"selectedItem"),inputValue:Ib(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return P({},e,r)}w0(w0({},xd),{items:m.default.array.isRequired,isItemDisabled:m.default.func}),w0(w0({},Id),{isItemDisabled:function(){return!1}});var zb="__input_keydown_arrow_down__",Bb="__input_keydown_arrow_up__",Ub="__input_keydown_escape__",$b="__input_keydown_home__",Hb="__input_keydown_end__",Zb="__input_keydown_page_up__",Wb="__input_keydown_page_down__",Kb="__input_keydown_enter__",Yb="__input_change__",qb="__input_blur__",Xb="__input_click__",Gb="__menu_mouse_leave__",Jb="__item_mouse_move__",Qb="__item_click__",ew="__togglebutton_click__",tw="__function_toggle_menu__",nw="__function_open_menu__",rw="__function_close_menu__",aw="__function_set_highlighted_index__",iw="__function_select_item__",ow="__function_set_input_value__",sw="__function_reset__",lw="__controlled_prop_updated_selected_item__",uw=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:lw,FunctionCloseMenu:rw,FunctionOpenMenu:nw,FunctionReset:sw,FunctionSelectItem:iw,FunctionSetHighlightedIndex:aw,FunctionSetInputValue:ow,FunctionToggleMenu:tw,InputBlur:qb,InputChange:Yb,InputClick:Xb,InputKeyDownArrowDown:zb,InputKeyDownArrowUp:Bb,InputKeyDownEnd:Hb,InputKeyDownEnter:Kb,InputKeyDownEscape:Ub,InputKeyDownHome:$b,InputKeyDownPageDown:Wb,InputKeyDownPageUp:Zb,ItemClick:Qb,ItemMouseMove:Jb,MenuMouseLeave:Gb,ToggleButtonClick:ew});function cw(e){var t=Nb(e),n=t.selectedItem,r=t.inputValue;return P({},t,{inputValue:r=""===r&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue?e.itemToString(n):r})}var dw=P({},xd,{items:m.default.array.isRequired,isItemDisabled:m.default.func,inputValue:m.default.string,defaultInputValue:m.default.string,initialInputValue:m.default.string,inputId:m.default.string,onInputValueChange:m.default.func});var mw=x0,mw=function(e,t){m.default.checkPropTypes(dw,e,"prop",t.name)},fw=P({},Id,{isItemDisabled:function(){return!1}});function hw(e,t){var n,r,a=t.type,i=t.props,o=t.altKey;switch(a){case Qb:r={isOpen:Ib(i,"isOpen"),highlightedIndex:Vb(i),selectedItem:i.items[t.index],inputValue:i.itemToString(i.items[t.index])};break;case zb:r=e.isOpen?{highlightedIndex:j0(e.highlightedIndex,1,i.items,i.isItemDisabled,!0)}:{highlightedIndex:o&&null==e.selectedItem?-1:Tb(i,e,1),isOpen:0<=i.items.length};break;case Bb:r=e.isOpen?o?Pb(i,e.highlightedIndex):{highlightedIndex:j0(e.highlightedIndex,-1,i.items,i.isItemDisabled,!0)}:{highlightedIndex:Tb(i,e,-1),isOpen:0<=i.items.length};break;case Kb:r=Pb(i,e.highlightedIndex);break;case Ub:r=P({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Zb:r={highlightedIndex:j0(e.highlightedIndex,-10,i.items,i.isItemDisabled,!0)};break;case Wb:r={highlightedIndex:j0(e.highlightedIndex,10,i.items,i.isItemDisabled,!0)};break;case $b:r={highlightedIndex:z0(0,!1,i.items,i.isItemDisabled)};break;case Hb:r={highlightedIndex:z0(i.items.length-1,!0,i.items,i.isItemDisabled)};break;case qb:r=P({isOpen:!1,highlightedIndex:-1},0<=e.highlightedIndex&&(null==(n=i.items)?void 0:n.length)&&t.selectItem&&{selectedItem:i.items[e.highlightedIndex],inputValue:i.itemToString(i.items[e.highlightedIndex])});break;case Yb:r={isOpen:!0,highlightedIndex:Vb(i),inputValue:t.inputValue};break;case Xb:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Tb(i,e,0)};break;case iw:r={selectedItem:t.selectedItem,inputValue:i.itemToString(t.selectedItem)};break;case lw:r={inputValue:t.inputValue};break;default:return jb(e,t,uw)}return P({},e,r)}var pw=["onMouseLeave","refKey","ref"],gw=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],yw=["onClick","onPress","refKey","ref"],vw=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];function bw(e){mw(e=void 0===e?{}:e,bw);var t,n,r,a,i,o=P({},fw,e),s=o.items,e=o.scrollIntoView,d=o.environment,l=o.getA11yStatusMessage,u=(h=hw,t=o,u=cw,c=Lb,n=(0,L.useRef)(),r=(h=kb(h,t,u,c))[0],a=h[1],i=Fb(),(0,L.useEffect)(function(){F0(t,"selectedItem")&&(i||t.itemToKey(t.selectedItem)!==t.itemToKey(n.current)&&a({type:lw,inputValue:t.itemToString(t.selectedItem)}),n.current=(r.selectedItem===n.current?t:r).selectedItem)},[r.selectedItem,t.selectedItem]),[L0(r,t),a]),c=u[0],f=u[1],m=c.isOpen,h=c.highlightedIndex,u=c.selectedItem,p=c.inputValue,g=(0,L.useRef)(null),y=(0,L.useRef)({}),v=(0,L.useRef)(null),b=(0,L.useRef)(null),w=Fb(),E=wb(o),S=(0,L.useRef)(),x=xb({state:c,props:o}),k=(0,L.useCallback)(function(e){return y.current[E.getItemId(e)]},[E]),_=(Ab(l,c,[m,h,u,p],d),Rb({menuElement:g.current,highlightedIndex:h,isOpen:m,itemRefs:y,scrollIntoView:e,getItemNodeFromIndex:k})),I=(Db({props:o,state:c}),(0,L.useEffect)(function(){Cb(o,"isOpen")&&v.current&&v.current.focus()},[]),(0,L.useEffect)(function(){w||(S.current=s.length)}),Ob(d,(0,L.useCallback)(function(){x.current.state.isOpen&&f({type:qb,selectItem:!1})},[f,x]),(0,L.useMemo)(function(){return[g,b,v]},[g.current,b.current,v.current]))),C=Mb("getInputProps","getMenuProps"),N=((0,L.useEffect)(function(){m||(y.current={})},[m]),(0,L.useEffect)(function(){var e;m&&null!=d&&d.document&&null!=v&&null!=(e=v.current)&&e.focus&&d.document.activeElement!==v.current&&v.current.focus()},[m,d]),(0,L.useMemo)(function(){return{ArrowDown:function(e){e.preventDefault(),f({type:zb,altKey:e.altKey})},ArrowUp:function(e){e.preventDefault(),f({type:Bb,altKey:e.altKey})},Home:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:$b}))},End:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:Hb}))},Escape:function(e){var t=x.current.state;(t.isOpen||t.inputValue||t.selectedItem||-1<t.highlightedIndex)&&(e.preventDefault(),f({type:Ub}))},Enter:function(e){x.current.state.isOpen&&229!==e.which&&(e.preventDefault(),f({type:Kb}))},PageUp:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:Zb}))},PageDown:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:Wb}))}}},[f,x])),l=(0,L.useCallback)(function(e){return P({id:E.labelId,htmlFor:E.inputId},e)},[E]),e=(0,L.useCallback)(function(e,t){var e=void 0===e?{}:e,n=e.onMouseLeave,r=e.refKey,r=void 0===r?"ref":r,a=e.ref,e=m0(e,pw),t=(void 0===t?{}:t).suppressRefError;return C("getMenuProps",void 0!==t&&t,r,g),P(((t={})[r]=N0(a,function(e){g.current=e}),t.id=E.menuId,t.role="listbox",t["aria-labelledby"]=e&&e["aria-label"]?void 0:""+E.labelId,t.onMouseLeave=C0(n,function(){f({type:Gb})}),t),e)},[f,C,E]),k=(0,L.useCallback)(function(e){var e=void 0===e?{}:e,t=e.item,n=e.index,r=e.refKey,r=void 0===r?"ref":r,a=e.ref,i=e.onMouseMove,o=e.onMouseDown,s=e.onClick,l=(e.onPress,e.disabled),e=m0(e,gw),l=(void 0!==l&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.'),x.current),u=l.props,c=l.state,l=Eb(t,n,u.items,"Pass either item or index to getItemProps!"),t=l[0],d=l[1],m=u.isItemDisabled(t,d),n=s;return P(((l={})[r]=N0(a,function(e){e&&(y.current[E.getItemId(d)]=e)}),l["aria-disabled"]=m,l["aria-selected"]=d===c.highlightedIndex,l.id=E.getItemId(d),l.role="option",l),!m&&((u={}).onClick=C0(n,function(){f({type:Qb,index:d})}),u),{onMouseMove:C0(i,function(){I.isTouchEnd||d===c.highlightedIndex||(_.current=!1,f({type:Jb,index:d,disabled:m}))}),onMouseDown:C0(o,function(e){return e.preventDefault()})},e)},[f,E,x,I,_]),c=(0,L.useCallback)(function(e){var t,e=void 0===e?{}:e,n=e.onClick,r=(e.onPress,e.refKey),r=void 0===r?"ref":r,a=e.ref,e=m0(e,yw),i=x.current.state;return P(((t={})[r]=N0(a,function(e){b.current=e}),t["aria-controls"]=E.menuId,t["aria-expanded"]=i.isOpen,t.id=E.toggleButtonId,t.tabIndex=-1,t),!e.disabled&&P({},{onClick:C0(n,function(){f({type:ew})})}),e)},[f,x,E]),T=(0,L.useCallback)(function(e,t){var n,e=void 0===e?{}:e,r=e.onKeyDown,a=e.onChange,i=e.onInput,o=e.onBlur,s=(e.onChangeText,e.onClick),l=e.refKey,l=void 0===l?"ref":l,u=e.ref,e=m0(e,vw),t=(void 0===t?{}:t).suppressRefError,c=(C("getInputProps",void 0!==t&&t,l,v),x.current.state),t={};return e.disabled||((n={}).onChange=C0(a,i,function(e){f({type:Yb,inputValue:e.target.value})}),n.onKeyDown=C0(r,function(e){var t=V0(e);t&&N[t]&&N[t](e)}),n.onBlur=C0(o,function(e){null!=d&&d.document&&c.isOpen&&!I.isMouseDown&&(e=null===e.relatedTarget&&d.document.activeElement!==d.document.body,f({type:qb,selectItem:!e}))}),n.onClick=C0(s,function(){f({type:Xb})}),t=n),P(((a={})[l]=N0(u,function(e){v.current=e}),a["aria-activedescendant"]=c.isOpen&&-1<c.highlightedIndex?E.getItemId(c.highlightedIndex):"",a["aria-autocomplete"]="list",a["aria-controls"]=E.menuId,a["aria-expanded"]=c.isOpen,a["aria-labelledby"]=e&&e["aria-label"]?void 0:E.labelId,a.autoComplete="off",a.id=E.inputId,a.role="combobox",a.value=c.inputValue,a),t,e)},[f,E,d,N,x,I,C]),O=(0,L.useCallback)(function(){f({type:tw})},[f]),M=(0,L.useCallback)(function(){f({type:rw})},[f]),A=(0,L.useCallback)(function(){f({type:nw})},[f]),R=(0,L.useCallback)(function(e){f({type:aw,highlightedIndex:e})},[f]),D=(0,L.useCallback)(function(e){f({type:iw,selectedItem:e})},[f]);return{getItemProps:k,getLabelProps:l,getMenuProps:e,getInputProps:T,getToggleButtonProps:c,toggleMenu:O,openMenu:A,closeMenu:M,setHighlightedIndex:R,setInputValue:(0,L.useCallback)(function(e){f({type:ow,inputValue:e})},[f]),selectItem:D,reset:(0,L.useCallback)(function(){f({type:sw})},[f]),highlightedIndex:h,isOpen:m,selectedItem:u,inputValue:p}}bw.stateChangeTypes=uw;var ww={activeIndex:-1,selectedItems:[]};function Ew(e,t){return Cb(e,t,ww)}function Sw(e,t){return Ib(e,t,ww)}function xw(e){return{activeIndex:Ew(e,"activeIndex"),selectedItems:Ew(e,"selectedItems")}}function kw(e){return e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||(e=e.target)instanceof HTMLInputElement&&""!==e.value&&(0!==e.selectionStart||0!==e.selectionEnd)?void 0:1}function _w(e,t){return e.selectedItems===t.selectedItems&&e.activeIndex===t.activeIndex}var Iw={stateReducer:u.stateReducer,itemToKey:u.itemToKey,environment:u.environment,selectedItems:m.default.array,initialSelectedItems:m.default.array,defaultSelectedItems:m.default.array,getA11yStatusMessage:m.default.func,activeIndex:m.default.number,initialActiveIndex:m.default.number,defaultActiveIndex:m.default.number,onActiveIndexChange:m.default.func,onSelectedItemsChange:m.default.func,keyNavigationNext:m.default.string,keyNavigationPrevious:m.default.string},Cw={itemToKey:Id.itemToKey,stateReducer:Id.stateReducer,environment:Id.environment,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Nw=x0,Nw=function(e,t){m.default.checkPropTypes(Iw,e,"prop",t.name)},Tw="__selected_item_click__",Ow="__selected_item_keydown_delete__",Mw="__selected_item_keydown_backspace__",Aw="__selected_item_keydown_navigation_next__",Rw="__selected_item_keydown_navigation_previous__",Dw="__dropdown_keydown_navigation_previous__",Pw="__dropdown_keydown_backspace__",Lw="__dropdown_click__",Fw="__function_add_selected_item__",Vw="__function_remove_selected_item__",jw="__function_set_selected_items__",zw="__function_set_active_index__",Bw="__function_reset__",kd=Object.freeze({__proto__:null,DropdownClick:Lw,DropdownKeyDownBackspace:Pw,DropdownKeyDownNavigationPrevious:Dw,FunctionAddSelectedItem:Fw,FunctionRemoveSelectedItem:Vw,FunctionReset:Bw,FunctionSetActiveIndex:zw,FunctionSetSelectedItems:jw,SelectedItemClick:Tw,SelectedItemKeyDownBackspace:Mw,SelectedItemKeyDownDelete:Ow,SelectedItemKeyDownNavigationNext:Aw,SelectedItemKeyDownNavigationPrevious:Rw});function Uw(e,t){var n=t.type,r=t.index,a=t.props,i=t.selectedItem,o=e.activeIndex,s=e.selectedItems;switch(n){case Tw:c={activeIndex:r};break;case Rw:c={activeIndex:o-1<0?0:o-1};break;case Aw:c={activeIndex:o+1>=s.length?-1:o+1};break;case Mw:case Ow:o<0||(l=o,1===s.length?l=-1:o===s.length-1&&(l=s.length-2),c=P({selectedItems:[].concat(s.slice(0,o),s.slice(o+1))},{activeIndex:l}));break;case Dw:c={activeIndex:s.length-1};break;case Pw:c={selectedItems:s.slice(0,s.length-1)};break;case Fw:c={selectedItems:[].concat(s,[i])};break;case Lw:c={activeIndex:-1};break;case Vw:var l=o,u=s.findIndex(function(e){return a.itemToKey(e)===a.itemToKey(i)});u<0||(1===s.length?l=-1:u===s.length-1&&(l=s.length-2),c={selectedItems:[].concat(s.slice(0,u),s.slice(u+1)),activeIndex:l});break;case jw:var c={selectedItems:t.selectedItems};break;case zw:c={activeIndex:t.activeIndex};break;case Bw:c={activeIndex:Sw(a,"activeIndex"),selectedItems:Sw(a,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return P({},e,c)}var $w=["refKey","ref","onClick","onKeyDown","selectedItem","index"],Hw=["refKey","ref","onKeyDown","onClick","preventKeyAction"];function Zw(e){Nw(e=void 0===e?{}:e,Zw);var e=P({},Cw,e),t=e.getA11yStatusMessage,n=e.environment,r=e.keyNavigationNext,a=e.keyNavigationPrevious,i=_b(Uw,e,xw,_w),o=i[0],u=i[1],s=o.activeIndex,i=o.selectedItems,l=Fb(),c=(0,L.useRef)(null),d=(0,L.useRef)(),m=(d.current=[],xb({state:o,props:e})),f=(Ab(t,o,[s,i],n),(0,L.useEffect)(function(){l||(-1===s&&c.current?c.current.focus():d.current[s]&&d.current[s].focus())},[s]),Db({props:e,state:o}),Mb("getDropdownProps")),h=(0,L.useMemo)(function(){var e={};return e[a]=function(){u({type:Rw})},e[r]=function(){u({type:Aw})},e.Delete=function(){u({type:Ow})},e.Backspace=function(){u({type:Mw})},e},[u,r,a]),p=(0,L.useMemo)(function(){var e={};return e[a]=function(e){kw(e)&&u({type:Dw})},e.Backspace=function(e){kw(e)&&u({type:Pw})},e},[u,a]);return{getSelectedItemProps:(0,L.useCallback)(function(e){var e=void 0===e?{}:e,t=e.refKey,t=void 0===t?"ref":t,n=e.ref,r=e.onClick,a=e.onKeyDown,i=e.selectedItem,o=e.index,e=m0(e,$w),s=m.current.state,l=Eb(i,o,s.selectedItems,"Pass either item or index to getSelectedItemProps!")[1],i=-1<l&&l===s.activeIndex;return P(((o={})[t]=N0(n,function(e){e&&d.current.push(e)}),o.tabIndex=i?0:-1,o.onClick=C0(r,function(){u({type:Tw,index:l})}),o.onKeyDown=C0(a,function(e){var t=V0(e);t&&h[t]&&h[t](e)}),o),e)},[u,m,h]),getDropdownProps:(0,L.useCallback)(function(e,t){var e=void 0===e?{}:e,n=e.refKey,n=void 0===n?"ref":n,r=e.ref,a=e.onKeyDown,i=e.onClick,o=e.preventKeyAction,o=void 0!==o&&o,e=m0(e,Hw),t=(void 0===t?{}:t).suppressRefError;f("getDropdownProps",void 0!==t&&t,n,c);return P(((t={})[n]=N0(r,function(e){e&&(c.current=e)}),t),!o&&{onKeyDown:C0(a,function(e){var t=V0(e);t&&p[t]&&p[t](e)}),onClick:C0(i,function(){u({type:Lw})})},e)},[u,p,f]),addSelectedItem:(0,L.useCallback)(function(e){u({type:Fw,selectedItem:e})},[u]),removeSelectedItem:(0,L.useCallback)(function(e){u({type:Vw,selectedItem:e})},[u]),setSelectedItems:(0,L.useCallback)(function(e){u({type:jw,selectedItems:e})},[u]),setActiveIndex:(0,L.useCallback)(function(e){u({type:zw,activeIndex:e})},[u]),reset:(0,L.useCallback)(function(){u({type:Bw})},[u]),selectedItems:i,activeIndex:s}}Zw.stateChangeTypes=kd;var Ww=e(b());function Kw(n){const{selectedItem:r,items:e,inputValue:t,forceOpen:a=!1}=n,{isOpen:i,getToggleButtonProps:o,getLabelProps:s,getMenuProps:l,getInputProps:u,highlightedIndex:c,getItemProps:d}=bw({items:e,itemToString(e){return e?n.itemToString(e):""},selectedItem:r,onSelectedItemChange:({selectedItem:e})=>{n.onItemSelected(e)},inputValue:t});return Ww.default.createElement("div",{className:"relative"},Ww.default.createElement("div",{className:"flex flex-col gap-1"},Ww.default.createElement("label",{htmlFor:"combobox-search",className:"w-fit",...s()},Ww.default.createElement(S,{elementType:"small"},n.label)),Ww.default.createElement("div",{className:"bg-spice-tab-active flex gap-0.5 rounded-sm !pe-1"},Ww.default.createElement("input",{...u({onChange:e=>{e=e.target.value;r&&e===n.itemToString(r)||n.onInputChanged(e)}}),placeholder:n.placeholder,className:"w-full truncate !p-1.5",id:"combobox-search",onBlur:()=>{n.onBlur()},disabled:n.disabled}),null!==r&&Ww.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Clear selection"},Ww.default.createElement("button",{"aria-label":"clear selection",type:"button",disabled:n.disabled},Ww.default.createElement(Ev,{size:16,onClick:n.onClear}))),Ww.default.createElement("button",{"aria-label":"toggle menu",className:"!px-2",type:"button",...o(),disabled:n.disabled},i?Ww.default.createElement(dv,{size:16}):Ww.default.createElement(cv,{size:16})))),Ww.default.createElement("ul",{className:"bg-spice-highlight-elevated absolute z-10 !mt-1 max-h-80 w-full overflow-scroll rounded-sm !p-0 "+(i||a?"":"hidden"),...l()},(i||a)&&0<e.length&&e.map((e,t)=>Ww.default.createElement("li",{className:Spicetify.classnames(c===t?"bg-spice-highlight-elevated-hover":"","flex flex-col"),key:e.id,...d({item:e,index:t})},n.itemRenderer({item:e,index:t,isHighlighted:c===t,isSelected:r?.id===e.id}))),(i||a)&&0===e.length&&Ww.default.createElement("div",{className:"flex items-center justify-center !p-2"},Ww.default.createElement(S,{elementType:"span",fontSize:"small"},"No results"))))}function Yw(n){return d0.default.createElement(Dl,{name:n.name,control:n.control,render:({field:{onChange:t},formState:{disabled:e}})=>d0.default.createElement(Kw,{items:n.items,itemRenderer:n.itemRenderer,itemToString:n.itemToString,label:n.label,placeholder:n.placeholder,selectedItem:n.selectedItem,onItemSelected:e=>{n.onItemSelected(e),t(e.id)},inputValue:n.inputValue,onInputChanged:n.onInputChanged,onClear:n.onClear,onBlur:n.onBlur,disabled:e})})}var qw=e(b());function Xw(e){return qw.default.createElement("div",null,e.children,qw.default.createElement(Tv,{error:e.error}))}function Gw(e){return"album"===e.type}function Jw(e){return c0.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},c0.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&c0.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&c0.default.createElement(gv,{size:60,strokeWidth:1})),c0.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},c0.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),c0.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var Qw=e(b()),eE=[{label:"Liked tracks",value:"liked"},{label:"Top tracks & popular releases",value:"top"},{label:"Latest release",value:"latest"},{label:"All tracks",value:"discography"}];function tE(e){return"artist"===e.type}function nE(e){return Qw.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},Qw.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&Qw.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&Qw.default.createElement(gv,{size:60,strokeWidth:1})),Qw.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},Qw.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}function rE(e){return"folder"===e.type}function aE(e){return"playlist"===e.type}async function iE(e){return(await y().RootlistAPI.getContents({flatten:!0,filter:e})).items.filter(aE)}var oE=e(b()),sE=e(b());function lE(s){const{required:l=!1}=s;return sE.default.createElement(Dl,{control:s.control,name:s.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},fieldState:{invalid:i},formState:{disabled:o}})=>sE.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"text",placeholder:s.placeholder,onChange:e=>{e=l?e.target.value:""===(e=e.target.value)?void 0:e;t(e),s.onChange&&s.onChange(e)},onBlur:e,value:l?n:n??"",name:r,disabled:o,ref:a})})}var uE=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],cE=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function dE(e){return oE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},oE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&oE.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"playlist"}),null===e.item.image&&oE.default.createElement(gv,{size:60,strokeWidth:1})),oE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},oE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),oE.default.createElement("span",{className:"truncate text-sm"},"by ",e.item.ownerName)))}var mE=e(b());function fE(e){return e.icon?mE.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons[e.icon]},viewBox:"0 0 16 16"}):e.iconPath?mE.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:e.iconPath},viewBox:"0 0 16 16"}):mE.default.createElement(mE.default.Fragment,null)}var hE=e(b());var pE=()=>{},gE=e(b()),yE=e(b()),vE=e(b()),bE=t=>{const n=vE.default.useRef(null);return vE.default.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&t()};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[n,t]),n},O=e(b());function wE(){return O.default.createElement("div",{className:"flex flex-col"},O.default.createElement("div",{className:"flex items-center !px-2 !py-1"},O.default.createElement("span",null,"Select all")),O.default.createElement("hr",{className:"border-t-1"}))}function EE(){return O.default.createElement("div",{className:"flex flex-col"},O.default.createElement("div",{className:"flex items-center justify-between gap-2 !px-2 !py-1"},O.default.createElement("span",null,"Unselect all"),O.default.createElement("span",{className:"shrink-0"},O.default.createElement(fE,{semanticColor:"textBrightAccent",icon:"check",iconSize:12}))),O.default.createElement("hr",{className:"border-t-1"}))}function SE(r){const{selectedItems:a,onItemsSelected:n,inputValue:e,forceOpen:t=!1,selectAllItem:i,unselectAllItem:o,itemRenderer:s}=r;var l=[r.items.every(e=>a.includes(e))?o:i,...r.items];const{isOpen:u,getToggleButtonProps:c,getLabelProps:d,getMenuProps:m,getInputProps:f,highlightedIndex:h,getItemProps:p,closeMenu:g}=bw({items:l,itemToString(e){return e?r.itemToString(e):""},selectedItem:null,inputValue:e,stateReducer(e,t){var{changes:n,type:t}=t;switch(t){case bw.stateChangeTypes.InputKeyDownEnter:case bw.stateChangeTypes.ItemClick:return{...n,isOpen:!0};default:return n}},onStateChange({inputValue:e,type:t,selectedItem:n}){switch(t){case bw.stateChangeTypes.InputKeyDownEnter:case bw.stateChangeTypes.ItemClick:case bw.stateChangeTypes.InputBlur:if(n){if(n===r.selectAllItem)return void r.onItemsSelected(jd([...r.selectedItems,...r.items],e=>e.id));if(n===r.unselectAllItem)return void r.onItemsSelected([...r.selectedItems.filter(e=>!r.items.includes(e))]);a.includes(n)?r.onItemsSelected(a.filter(e=>e!==n)):r.onItemsSelected([...a,n])}break;case bw.stateChangeTypes.InputChange:r.onInputChanged(e??"")}}}),{getSelectedItemProps:y,getDropdownProps:v,removeSelectedItem:b}=Zw({selectedItems:a,onStateChange({selectedItems:e,type:t}){switch(t){case Zw.stateChangeTypes.SelectedItemKeyDownBackspace:case Zw.stateChangeTypes.SelectedItemKeyDownDelete:case Zw.stateChangeTypes.DropdownKeyDownBackspace:case Zw.stateChangeTypes.FunctionRemoveSelectedItem:n(e??[])}}}),w=(0,O.useCallback)((e,t)=>e===i?O.default.createElement(wE,null):e===o?O.default.createElement(EE,null):s({item:e,index:t,isHighlighted:h===t,isSelected:a.includes(e)}),[h,a,i,o,s]);var E=bE(g);return O.default.createElement(O.default.Fragment,null,O.default.createElement("div",{className:"relative"},O.default.createElement("div",{className:"flex flex-col gap-1"},O.default.createElement("label",{htmlFor:"multiselect-search",className:"w-fit",...d()},O.default.createElement(S,{elementType:"small"},r.label)),O.default.createElement("div",{className:"bg-spice-tab-active flex gap-0.5 rounded-sm !pe-1"},O.default.createElement("input",{...f({...v({preventKeyAction:u}),onChange:e=>{e=e.target.value;r.onInputChanged(e)}}),placeholder:r.placeholder,className:"w-full truncate !p-1.5",id:"multiselect-search",onBlur:()=>{r.onBlur()},disabled:r.disabled}),O.default.createElement("button",{"aria-label":"toggle menu",className:"!px-2",type:"button",...c(),disabled:r.disabled},u?O.default.createElement(dv,{size:16}):O.default.createElement(cv,{size:16})))),O.default.createElement("ul",{className:"bg-spice-highlight-elevated absolute z-10 !mt-1 max-h-80 w-full overflow-scroll rounded-sm !p-0 "+(u||t?"":"hidden"),ref:E,...m()},(u||t)&&0<r.items.length&&O.default.createElement(O.default.Fragment,null,l.map((e,t)=>O.default.createElement("li",{className:Spicetify.classnames(h===t?"bg-spice-highlight-elevated-hover":"","flex flex-col"),key:e.id,...p({item:e,index:t})},w(e,t)))),(u||t)&&0===r.items.length&&O.default.createElement("div",{className:"flex items-center justify-center !p-2"},O.default.createElement(S,{elementType:"span",fontSize:"small"},"No results")))),O.default.createElement("div",{className:"flex flex-wrap gap-1"},a.map((t,e)=>O.default.createElement("span",{className:"hover:bg-spice-tab-active bg-spice-highlight-elevated flex max-w-72 items-center gap-2 rounded-full !px-2.5",key:"selected-item-"+e.toFixed(),...y({selectedItem:t,index:e}),tabIndex:-1},O.default.createElement("span",{className:"truncate"},r.itemToString(t)),O.default.createElement("button",{"aria-label":"Remove item",onClick:e=>{e.stopPropagation(),b(t)}},O.default.createElement(fE,{icon:"x",iconSize:12}))))))}function xE(n){return yE.default.createElement(Dl,{name:n.name,control:n.control,render:({field:{onChange:t},formState:{disabled:e}})=>yE.default.createElement(SE,{selectedItems:n.selectedItems,onItemsSelected:e=>{n.onItemsSelected(e),t(e)},inputValue:n.inputValue,onInputChanged:n.onInputChanged,placeholder:n.placeholder,itemRenderer:n.itemRenderer,itemToString:n.itemToString,items:n.items,label:n.label,disabled:n.disabled||e,onBlur:n.onBlur,selectAllItem:n.selectAllItem,unselectAllItem:n.unselectAllItem})})}var kE=[{label:"Added at",value:"ADDED_AT"},{label:"Album",value:"ALBUM_NAME"},{label:"Artist",value:"ARTIST_NAME"},{label:"Name",value:"NAME"}],_E=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}];function IE(e){return gE.default.createElement("div",{className:"flex items-center justify-between gap-2 !px-2 !py-1"},gE.default.createElement("span",{className:"truncate"},e.item.name),e.isSelected&&gE.default.createElement("span",{className:"shrink-0"},gE.default.createElement(fE,{semanticColor:"textBrightAccent",icon:"check",iconSize:12})),!e.isSelected&&gE.default.createElement("div",{className:"h-[12px] w-[12px]"}))}var CE=e(b()),NE=[{label:"Album",value:"ALBUM"},{label:"Artist",value:"ARTIST"},{label:"Name",value:"TITLE"},{label:"Duration",value:"DURATION"},{label:"Added at",value:"ADDED_AT"},{label:"No sort",value:"NO_SORT"}],TE=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}];var OE=a.object({searchTerm:a.string().nonempty(),offset:a.number().nonnegative().int(),limit:a.number().nonnegative().int().max(100),numberOfTopResults:a.number().nonnegative().int(),includeAudiobooks:a.boolean(),includeArtistHasConcertsField:a.boolean(),includePreReleases:a.boolean(),includeLocalConcertsField:a.boolean()}).strict().readonly();async function ME(e){OE.parse(e);return fm({name:"searchDesktop",operation:"query",sha256Hash:"dd1513013a4ab0d9c095eac6b6d292c801bef038e11e06b746385a509be24ab0",value:null},e)}var AE=e(b()),RE=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],DE=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function PE(e){return AE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},AE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&AE.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&AE.default.createElement(gv,{size:60,strokeWidth:1})),AE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},AE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),AE.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var LE=e(b()),FE=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],VE=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function jE(e){return LE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},LE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&LE.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&LE.default.createElement(gv,{size:60,strokeWidth:1})),LE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},LE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}var zE=e(b()),BE=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],UE=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function $E(e){return zE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},zE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&zE.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&zE.default.createElement(gv,{size:60,strokeWidth:1})),zE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},zE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),zE.default.createElement("span",{className:"truncate text-sm"},e.item.album," - ",e.item.artists)))}var HE=e(b());function ZE(e){return HE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},HE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&HE.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&HE.default.createElement(gv,{size:60,strokeWidth:1})),HE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},HE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),HE.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var WE=e(b()),KE=[{label:"Liked tracks",value:"liked"},{label:"Top tracks & popular releases",value:"top"},{label:"Latest release",value:"latest"},{label:"All tracks",value:"discography"}];function YE(e){return WE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},WE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&WE.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&WE.default.createElement(gv,{size:60,strokeWidth:1})),WE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},WE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}var qE=e(b()),XE=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],GE=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function JE(e){return qE.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},qE.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&qE.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"playlist"}),null===e.item.image&&qE.default.createElement(gv,{size:60,strokeWidth:1})),qE.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},qE.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),qE.default.createElement("span",{className:"truncate text-sm"},"by ",e.item.ownerName)))}var QE=e(b());var e1={likedSongsSource:function(e){const t=e.data["genres"],{control:n,errors:r,updateNodeField:a}=Wy(e.id,e.data,zy("likedSongsSource"),ky),[i,o]=(0,gE.useState)([]),[s,l]=(0,gE.useState)(!0),{items:u,selectedItems:c,onSelectedIdsChanged:d,inputValue:m,onInputChanged:f,onItemsSelected:h}=function(r,t,n){const[a,i]=(0,hE.useState)([]),[e,o]=(0,hE.useState)(""),[s,l]=(0,hE.useState)([]),u=l0(e=>{t(e).then(e=>{l(e)}).catch(e=>{console.error("Failed to fetch items",e)})},200);var c=(0,hE.useCallback)(async e=>{var t=new Set(e);const n=new Set(a.map(e=>e.id));t.size===n.size&&[...t].every(e=>n.has(e))||(t=await r(e),i(t))},[r,a,i]);return(0,hE.useEffect)(()=>{(async()=>{var e=await t("");l(e)})()},[t,l]),{selectedItems:a,onItemsSelected:e=>{n(e)},items:s,inputValue:e,onInputChanged:e=>{o(e),u(e)},onSelectedIdsChanged:c}}((0,gE.useCallback)(t=>Promise.resolve(i.filter(e=>t.includes(e.id))),[i]),(0,gE.useCallback)(t=>Promise.resolve(i.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))),[i]),e=>{a({genres:e.map(e=>e.id)})});return(0,gE.useEffect)(()=>{s||d(t)},[t,d,s]),(0,gE.useEffect)(()=>{(async()=>{var e=await Yd();const n=new Set;e.forEach(e=>{for(const t of e)n.add(t)}),o(Array.from(n).sort((e,t)=>e.localeCompare(t)).map(e=>({id:e,name:e}))),l(!1)})()},[]),gE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected,classname:"max-w-80"},gE.default.createElement(tv,null),gE.default.createElement(C,null,gE.default.createElement(N,{title:"Liked songs"}),gE.default.createElement(T,{label:"Filter",tooltip:"Search filter to apply",error:r.filter},gE.default.createElement(lE,{control:n,placeholder:"Search",name:"filter",onChange:e=>{a({filter:e})}})),gE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:r.offset},gE.default.createElement(Iv,{placeholder:"0",control:n,name:"offset",onChange:e=>{a({offset:e})}})),gE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:r.limit},gE.default.createElement(Iv,{placeholder:"None",control:n,name:"limit",onChange:e=>{a({limit:e})}})),gE.default.createElement(T,{label:"Sort by",error:r.sortField},gE.default.createElement($v,{name:"sortField",control:n,items:kE,label:"Property to sort on",onChange:e=>{a({sortField:e})}})),gE.default.createElement(T,{label:"Order",error:r.sortOrder},gE.default.createElement($v,{name:"sortOrder",control:n,items:_E,label:"Sort order",onChange:e=>{a({sortOrder:e})}})),gE.default.createElement(xE,{control:n,name:"genres",selectedItems:c,onItemsSelected:h,inputValue:m,onInputChanged:f,placeholder:"Rock, Pop, Hip Hop...",itemRenderer:IE,itemToString:e=>e.name,items:u,label:s?"Genres (loading...)":"Genres",onBlur:pE,selectAllItem:{id:"select-all",name:"Select all"},unselectAllItem:{id:"unselect-all",name:"Unselect all"},disabled:s})),gE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},localTracksSource:function(e){const{control:t,errors:n,updateNodeField:r}=Wy(e.id,e.data,zy("localTracksSource"),Iy);return CE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},CE.default.createElement(tv,null),CE.default.createElement(C,null,CE.default.createElement(N,{title:"Local tracks"}),CE.default.createElement(T,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},CE.default.createElement(lE,{placeholder:"Search",control:t,name:"filter",onChange:e=>{r({filter:e})}})),CE.default.createElement(T,{label:"Sort by",error:n.sortField},CE.default.createElement($v,{label:"Property to sort on",name:"sortField",control:t,items:NE,onChange:e=>{r({sortField:e})}})),CE.default.createElement(T,{label:"Order",error:n.sortOrder},CE.default.createElement($v,{label:"Sort order",name:"sortOrder",control:t,items:TE,onChange:e=>{r({sortOrder:e})}}))),CE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},libraryPlaylistSource:function(e){const{onlyMine:r,playlistUri:t}=e.data,{errors:n,control:a,updateNodeField:i}=Wy(e.id,e.data,zy("libraryPlaylistSource"),Ny);var o=(0,oE.useCallback)(async e=>{const t=await y().UserAPI.getUser();let n=await iE(e);return n=n.filter(e=>""!==e.name),(n=(n=r?n.filter(e=>e.owner.uri===t.uri):n).toSorted((e,t)=>e.name.localeCompare(t.name))).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images.find(e=>"small"===e.label)?.url??e.images[0].url:null,ownerName:e.owner.displayName}))},[r]),s=(0,oE.useCallback)(async e=>{var t=y().PlaylistAPI;try{var n=await t.getPlaylist(e,{},{});return{id:n.metadata.uri,name:n.metadata.name,uri:n.metadata.uri,image:0<n.metadata.images.length?n.metadata.images[0].url:null,ownerName:n.metadata.owner.displayName}}catch(e){return console.error("Failed to fetch playlist",e),i({playlistUri:""}),null}},[i]),l=(0,oE.useCallback)(e=>e.name,[]);const{inputValue:u,items:c,onInputChanged:d,onItemSelected:m,resetSelection:f,selectedItem:h,syncInputWithSelectedItem:p,onSelectedIdChanged:g}=u0(s,o,l,e=>{i({playlistUri:e?.uri??""})});return(0,oE.useEffect)(()=>{g(t)},[t,g]),oE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},oE.default.createElement(tv,null),oE.default.createElement(C,null,oE.default.createElement(N,{title:"Playlist"}),oE.default.createElement(Lv,{label:"Search only my playlists",error:n.onlyMine},oE.default.createElement(Dv,{control:a,name:"onlyMine",onChange:e=>{i({onlyMine:e})}})),oE.default.createElement(Xw,{error:n.playlistUri},oE.default.createElement(Yw,{control:a,name:"playlistUri",selectedItem:h,onItemSelected:m,items:c,itemRenderer:dE,itemToString:l,label:"Playlist",placeholder:"Search for a playlist",inputValue:u,onInputChanged:d,onClear:f,onBlur:p})),oE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected:"," ",""===e.data.playlistUri?"-":e.data.playlistUri),oE.default.createElement(T,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},oE.default.createElement(lE,{placeholder:"Search",name:"filter",control:a,onChange:e=>{i({filter:e})}})),oE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},oE.default.createElement(Iv,{placeholder:"0",control:a,name:"offset",onChange:e=>{i({offset:e})}})),oE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},oE.default.createElement(Iv,{placeholder:"None",control:a,name:"limit",onChange:e=>{i({limit:e})}})),oE.default.createElement(T,{label:"Sort by",error:n.sortField},oE.default.createElement($v,{label:"Property to sort on",name:"sortField",control:a,items:uE,onChange:e=>{i({sortField:e})}})),oE.default.createElement(T,{label:"Order",error:n.sortOrder},oE.default.createElement($v,{label:"Sort order",name:"sortOrder",control:a,items:cE,onChange:e=>{i({sortOrder:e})}}))),oE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},searchPlaylistSource:function(e){const t=e.data["playlistUri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("searchPlaylistSource"),Ny);var i=(0,qE.useCallback)(async e=>{return e.trim()?(await ME({searchTerm:e,offset:0,limit:20,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.playlists.items.map(e=>({id:e.data.uri,uri:e.data.uri,name:e.data.name,image:e.data.images.items[0]?.sources[0].url??null,ownerName:e.data.ownerV2.data.name})):[]},[]),o=(0,qE.useCallback)(async e=>{var t=y().PlaylistAPI;try{var n=await t.getPlaylist(e,{},{});return{id:n.metadata.uri,name:n.metadata.name,uri:n.metadata.uri,image:0<n.metadata.images.length?n.metadata.images[0].url:null,ownerName:n.metadata.owner.displayName}}catch(e){return console.error("Failed to fetch playlist",e),a({playlistUri:""}),null}},[a]),s=(0,qE.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({playlistUri:e?.uri??""})});return(0,qE.useEffect)(()=>{p(t)},[t,p]),qE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},qE.default.createElement(tv,null),qE.default.createElement(C,null,qE.default.createElement(N,{title:"Playlist",tooltip:"Search for a playlist using Spotify's search. You can use advanced search tags sush as 'genre:' or 'year:'."}),qE.default.createElement(Xw,{error:n.playlistUri},qE.default.createElement(Yw,{control:r,name:"playlistUri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:JE,itemToString:s,label:"Playlist",placeholder:"Search for a playlist",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),qE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected:"," ",""===e.data.playlistUri?"-":e.data.playlistUri),qE.default.createElement(T,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},qE.default.createElement(lE,{placeholder:"Search",name:"filter",control:r,onChange:e=>{a({filter:e})}})),qE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},qE.default.createElement(Iv,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),qE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},qE.default.createElement(Iv,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),qE.default.createElement(T,{label:"Sort by",error:n.sortField},qE.default.createElement($v,{label:"Property to sort on",name:"sortField",control:r,items:XE,onChange:e=>{a({sortField:e})}})),qE.default.createElement(T,{label:"Order",error:n.sortOrder},qE.default.createElement($v,{label:"Sort order",name:"sortOrder",control:r,items:GE,onChange:e=>{a({sortOrder:e})}}))),qE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},topTracksSource:function(e){const{errors:t,control:n,updateNodeField:r}=Wy(e.id,e.data,zy("topTracksSource"),Fy);return QE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},QE.default.createElement(tv,null),QE.default.createElement(C,null,QE.default.createElement(N,{title:"Top tracks"}),QE.default.createElement(T,{label:"Time range",error:t.timeRange},QE.default.createElement($v,{label:"Select a time range",name:"timeRange",control:n,items:[{label:"Short term",value:"short_term"},{label:"Medium term",value:"medium_term"},{label:"Long term",value:"long_term"}],onChange:e=>{r({timeRange:e})}})),QE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:t.offset},QE.default.createElement(Iv,{placeholder:"0",control:n,name:"offset",onChange:e=>{r({offset:e})}})),QE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:t.limit},QE.default.createElement(Iv,{placeholder:"None",control:n,name:"limit",onChange:e=>{r({limit:e})}}))),QE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},libraryAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("libraryAlbumSource"),gy);var i=(0,c0.useCallback)(async e=>{return(await y().LibraryAPI.getContents({filters:["0"],textFilter:e,filtersPickedByUser:!0,offset:0,limit:5e3})).items.filter(Gw).toSorted((e,t)=>e.name.localeCompare(t.name)).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images[0].url:null,artists:e.artists.map(e=>e.name).join(", ")}))},[]),o=(0,c0.useCallback)(async e=>{try{var t=await pm({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),a({uri:""}),null}},[a]),s=(0,c0.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,c0.useEffect)(()=>{p(t)},[t,p]),c0.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},c0.default.createElement(tv,null),c0.default.createElement(C,null,c0.default.createElement(N,{title:"Album"}),c0.default.createElement(Xw,{error:n.uri},c0.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:Jw,itemToString:s,label:"Album",placeholder:"Search for an album",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),c0.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),c0.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},c0.default.createElement(Iv,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),c0.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},c0.default.createElement(Iv,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),c0.default.createElement(Lv,{label:"Only liked songs",tooltip:"Only keep songs that are liked in this album",error:n.onlyLiked},c0.default.createElement(Dv,{control:r,name:"onlyLiked",onChange:e=>{a({onlyLiked:e})}}))),c0.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},searchAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("searchAlbumSource"),gy);var i=(0,HE.useCallback)(async e=>{return e.trim()?(await ME({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.albumsV2.items.map(e=>{return"PreReleaseResponseWrapper"===e.__typename?{id:e.data.uri,uri:e.data.uri,name:e.data.preReleaseContent.name,image:0<e.data.preReleaseContent.coverArt.sources.length?e.data.preReleaseContent.coverArt.sources[0].url:null,artists:e.data.preReleaseContent.artists.items.map(e=>e.data.profile.name).join(", ")}:{id:e.data.uri,uri:e.data.uri,name:e.data.name,image:0<e.data.coverArt.sources.length?e.data.coverArt.sources[0].url:null,artists:e.data.artists.items.map(e=>e.profile.name).join(", ")}}):[]},[]),o=(0,HE.useCallback)(async e=>{try{var t=await pm({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),a({uri:""}),null}},[a]),s=(0,HE.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,HE.useEffect)(()=>{p(t)},[t,p]),HE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},HE.default.createElement(tv,null),HE.default.createElement(C,null,HE.default.createElement(N,{title:"Album",tooltip:"Search for an album using Spotify's search. You can use advanced search tags sush as 'genre:' or 'year:'."}),HE.default.createElement(Xw,{error:n.uri},HE.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:ZE,itemToString:s,label:"Album",placeholder:"Search for an album",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),HE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),HE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},HE.default.createElement(Iv,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),HE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},HE.default.createElement(Iv,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),HE.default.createElement(Lv,{label:"Only liked songs",tooltip:"Only keep songs that are liked in this album",error:n.onlyLiked},HE.default.createElement(Dv,{control:r,name:"onlyLiked",onChange:e=>{a({onlyLiked:e})}}))),HE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},libraryArtistSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("libraryArtistSource"),Sy);var i=(0,Qw.useCallback)(async e=>{return(await y().LibraryAPI.getContents({filters:["1"],textFilter:e,filtersPickedByUser:!0,offset:0,limit:5e3})).items.filter(tE).toSorted((e,t)=>e.name.localeCompare(t.name)).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images[0].url:null}))},[]),o=(0,Qw.useCallback)(async e=>{try{var t=await Ey({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),a({uri:""}),null}},[a]),s=(0,Qw.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,Qw.useEffect)(()=>{p(t)},[t,p]),Qw.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Qw.default.createElement(tv,null),Qw.default.createElement(C,null,Qw.default.createElement(N,{title:"Artist"}),Qw.default.createElement(Xw,{error:n.uri},Qw.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:nE,itemToString:s,label:"Artist",placeholder:"Search for an artist",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),Qw.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),Qw.default.createElement(T,{label:"Type of tracks",error:n.trackType,tooltip:"Type of tracks to get from the artist : top tracks & popular releases, liked tracks, latest release or all tracks."},Qw.default.createElement($v,{label:"Type of tracks",name:"trackType",control:r,items:eE,onChange:e=>{a({trackType:e})}}))),Qw.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},searchArtistSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("searchArtistSource"),Sy);var i=(0,WE.useCallback)(async e=>{return e.trim()?(await ME({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.artists.items.map(e=>({id:e.data.uri,uri:e.data.uri,name:e.data.profile.name,image:e.data.visuals.avatarImage?.sources&&0<e.data.visuals.avatarImage.sources.length?e.data.visuals.avatarImage.sources[0].url:null})):[]},[]),o=(0,WE.useCallback)(async e=>{try{var t=await Ey({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),a({uri:""}),null}},[a]),s=(0,WE.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,WE.useEffect)(()=>{p(t)},[t,p]),WE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},WE.default.createElement(tv,null),WE.default.createElement(C,null,WE.default.createElement(N,{title:"Artist",tooltip:"Search for an artist using Spotify's search. You can use advanced search tags sush as 'genre:' or 'year:'."}),WE.default.createElement(Xw,{error:n.uri},WE.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:YE,itemToString:s,label:"Artist",placeholder:"Search for an artist",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),WE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),WE.default.createElement(T,{label:"Type of tracks",error:n.trackType,tooltip:"Type of tracks to get from the artist : top tracks & popular releases, liked tracks, latest release or all tracks."},WE.default.createElement($v,{label:"Type of tracks",name:"trackType",control:r,items:KE,onChange:e=>{a({trackType:e})}}))),WE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},deduplicate:function(e){return Gv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Gv.default.createElement(nv,null),Gv.default.createElement(C,null,Gv.default.createElement(N,{title:"Deduplicate",tooltip:"Remove duplicate tracks."})),Gv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Gv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},isPlayable:function(e){const{control:t,updateNodeField:n,errors:r}=Wy(e.id,e.data,zy("isPlayable"),im);return Av.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Av.default.createElement(rv,null),Av.default.createElement(C,null,Av.default.createElement(N,{title:"Is playable"}),Av.default.createElement(Lv,{label:"Is playable ?",error:r.isPlayable},Av.default.createElement(Dv,{control:t,name:"isPlayable",onChange:e=>{n({isPlayable:e})}}))),Av.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Av.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},result:function(e){var t=Zy(Qs(e=>({result:e.result})))["result"];return i0.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},i0.default.createElement(ev,{label:"Result",backgroundColor:"orange",textColor:"black"}),i0.default.createElement(C,null,i0.default.createElement(N,{title:"Final playlist"}),i0.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},i0.default.createElement(S,{elementType:"p"},"Number of tracks in result:"),0===t.length&&i0.default.createElement(S,{elementType:"p"},"-"),0!==t.length&&i0.default.createElement(S,{elementType:"p",weight:"bold",paddingBottom:"0"},t.length))),i0.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}))},shuffle:function(e){return t0.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},t0.default.createElement(nv,null),t0.default.createElement(C,null,t0.default.createElement(N,{title:"Shuffle"})),t0.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),t0.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},sort:function(e){const{errors:t,control:n,updateNodeField:r}=Wy(e.id,e.data,zy("sort"),ly);return n0.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},n0.default.createElement(nv,null),n0.default.createElement(C,null,n0.default.createElement(N,{title:"Sort"}),n0.default.createElement(T,{label:"Property",error:t.property},n0.default.createElement($v,{label:"Property to sort on",name:"property",control:n,items:r0,onChange:e=>{r({property:e})}})),n0.default.createElement(T,{label:"Order",error:t.order},n0.default.createElement($v,{label:"Sort order",name:"order",control:n,items:a0,onChange:e=>{r({order:e})}}))),n0.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),n0.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},acousticness:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("acousticness"),qd);return Ky.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Ky.default.createElement(rv,null),Ky.default.createElement(C,null,Ky.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Ky.default.createElement(N,{title:"Acousticness",tooltip:"A confidence measure from 0.0 to 1.0 of whether the track is acoustic. \n                        1.0 represents high confidence the track is acoustic."}),Ky.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Ky.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Ky.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},danceability:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("danceability"),Gd);return xv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},xv.default.createElement(rv,null),xv.default.createElement(C,null,xv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},xv.default.createElement(N,{title:"Danceability",tooltip:"How suitable a track is for\n                            dancing based on a combination of musical elements\n                            including tempo, rhythm stability, beat strength, and\n                            overall regularity. A value of 0.0 is least\n                            danceable and 1.0 is most danceable."}),xv.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),xv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),xv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},energy:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("energy"),tm);return Ov.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Ov.default.createElement(rv,null),Ov.default.createElement(C,null,Ov.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Ov.default.createElement(N,{title:"Energy",tooltip:"Measure from 0.0 to 1.0 that represents a perceptual measure of intensity and activity. \n                        Typically, energetic tracks feel fast, loud, and noisy. \n                        For example, death metal has high energy, while a Bach prelude scores low on the scale."}),Ov.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Ov.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Ov.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},instrumentalness:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("instrumentalness"),rm);return Mv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Mv.default.createElement(rv,null),Mv.default.createElement(C,null,Mv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Mv.default.createElement(N,{title:"Instrumentalness",tooltip:"Predicts whether a track contains no vocals.\n                        Values above 0.5 are intended to represent instrumental tracks. \n                        The closer the instrumentalness value is to 1.0, the greater likelihood the track contains no vocal content."}),Mv.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Mv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Mv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},liveness:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("liveness"),sm);return Fv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Fv.default.createElement(rv,null),Fv.default.createElement(C,null,Fv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Fv.default.createElement(N,{title:"Liveness",tooltip:"Detects the presence of an audience in the recording. \n                        Higher liveness values represent an increased probability that the track was performed live. \n                        A value above 0.8 provides strong likelihood that the track is live."}),Fv.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Fv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Fv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},loudness:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("loudness"),um);return Vv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Vv.default.createElement(rv,null),Vv.default.createElement(C,null,Vv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Vv.default.createElement(N,{title:"Loudness (dB)",tooltip:"The overall loudness of a track in decibels (dB). \n                        Loudness values are averaged across the entire track and are useful for comparing relative loudness of tracks."}),Vv.default.createElement(Xy,{control:t,min:-60,max:10,step:.01,onChange:e=>{n({range:e})}}))),Vv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Vv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},speechiness:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("speechiness"),Gg);return Yv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Yv.default.createElement(rv,null),Yv.default.createElement(C,null,Yv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Yv.default.createElement(N,{title:"Speechiness",tooltip:"Detects the presence of spoken words in a track. \n                        Values above 0.66 describe tracks that are probably made entirely of spoken words (e.g. talk show, audio book, poetry). \n                        Values below 0.33 most likely represent music and other non-speech-like tracks."}),Yv.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Yv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Yv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},valence:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("valence"),ty);return Xv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Xv.default.createElement(rv,null),Xv.default.createElement(C,null,Xv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Xv.default.createElement(N,{title:"Valence",tooltip:"A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. \n                        Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric),\n                        while tracks with low valence sound more negative (e.g. sad, depressed, angry)."}),Xv.default.createElement(Xy,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Xv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Xv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},tempo:function(e){const{control:t,updateNodeField:n}=Wy(e.id,e.data,zy("tempo"),Qg);return qv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},qv.default.createElement(rv,null),qv.default.createElement(C,null,qv.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},qv.default.createElement(N,{title:"Tempo (BPM)",tooltip:"The overall estimated tempo of a track in beats per minute (BPM). \n                        In musical terminology, tempo is the speed or pace of a given piece and derives directly from the average beat duration."}),qv.default.createElement(Xy,{control:t,min:0,max:1e3,step:1,onChange:e=>{n({range:e})}}))),qv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),qv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},mode:function(e){const{control:t,errors:n,updateNodeField:r}=Wy(e.id,e.data,zy("mode"),dm);return jv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},jv.default.createElement(rv,null),jv.default.createElement(C,null,jv.default.createElement(N,{title:"Mode",tooltip:"Mode indicates the modality (major or minor) of a track, the type of scale from which its melodic content is derived."}),jv.default.createElement(T,{label:"Mode",error:n.mode},jv.default.createElement($v,{label:"Mode",name:"mode",control:t,items:Hv,onChange:e=>{r({mode:e})}}))),jv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),jv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},radioAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("radioAlbumSource"),My);var i=(0,AE.useCallback)(async e=>{return e.trim()?(await ME({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.albumsV2.items.map(e=>{return"PreReleaseResponseWrapper"===e.__typename?{id:e.data.uri,uri:e.data.uri,name:e.data.preReleaseContent.name,image:0<e.data.preReleaseContent.coverArt.sources.length?e.data.preReleaseContent.coverArt.sources[0].url:null,artists:e.data.preReleaseContent.artists.items.map(e=>e.data.profile.name).join(", ")}:{id:e.data.uri,uri:e.data.uri,name:e.data.name,image:0<e.data.coverArt.sources.length?e.data.coverArt.sources[0].url:null,artists:e.data.artists.items.map(e=>e.profile.name).join(", ")}}):[]},[]),o=(0,AE.useCallback)(async e=>{try{var t=await pm({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),a({uri:""}),null}},[a]),s=(0,AE.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,AE.useEffect)(()=>{p(t)},[t,p]),AE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},AE.default.createElement(tv,null),AE.default.createElement(C,null,AE.default.createElement(N,{title:"Album radio",tooltip:"Get a radio playlist based on an album."}),AE.default.createElement(Xw,{error:n.uri},AE.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:PE,itemToString:s,label:"Album",placeholder:"Search for an album",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),AE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),AE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},AE.default.createElement(Iv,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),AE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},AE.default.createElement(Iv,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),AE.default.createElement(T,{label:"Sort by",error:n.sortField},AE.default.createElement($v,{label:"Property to sort on",name:"sortField",control:r,items:RE,onChange:e=>{a({sortField:e})}})),AE.default.createElement(T,{label:"Order",error:n.sortOrder},AE.default.createElement($v,{label:"Sort order",name:"sortOrder",control:r,items:DE,onChange:e=>{a({sortOrder:e})}}))),AE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},radioArtistSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("radioArtistSource"),My);var i=(0,LE.useCallback)(async e=>{return e.trim()?(await ME({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.artists.items.map(e=>({id:e.data.uri,uri:e.data.uri,name:e.data.profile.name,image:e.data.visuals.avatarImage?.sources&&0<e.data.visuals.avatarImage.sources.length?e.data.visuals.avatarImage.sources[0].url:null})):[]},[]),o=(0,LE.useCallback)(async e=>{try{var t=await Ey({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),a({uri:""}),null}},[a]),s=(0,LE.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,LE.useEffect)(()=>{p(t)},[t,p]),LE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},LE.default.createElement(tv,null),LE.default.createElement(C,null,LE.default.createElement(N,{title:"Artist radio",tooltip:"Get a radio playlist based on an artist."}),LE.default.createElement(Xw,{error:n.uri},LE.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:jE,itemToString:s,label:"Artist",placeholder:"Search for an artist",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),LE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),LE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},LE.default.createElement(Iv,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),LE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},LE.default.createElement(Iv,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),LE.default.createElement(T,{label:"Sort by",error:n.sortField},LE.default.createElement($v,{label:"Property to sort on",name:"sortField",control:r,items:FE,onChange:e=>{a({sortField:e})}})),LE.default.createElement(T,{label:"Order",error:n.sortOrder},LE.default.createElement($v,{label:"Sort order",name:"sortOrder",control:r,items:VE,onChange:e=>{a({sortOrder:e})}}))),LE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},radioTrackSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Wy(e.id,e.data,zy("radioTrackSource"),My);var i=(0,zE.useCallback)(async e=>{return e.trim()?(await ME({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.tracksV2.items.map(e=>({id:e.item.data.uri,uri:e.item.data.uri,name:e.item.data.name,image:0<e.item.data.albumOfTrack.coverArt.sources.length?e.item.data.albumOfTrack.coverArt.sources[0].url:null,artists:e.item.data.artists.items.map(e=>e.profile.name).join(", "),album:e.item.data.albumOfTrack.name})):[]},[]),o=(0,zE.useCallback)(async e=>{try{n={uri:e},Py.parse(n),r=Fu(Spicetify.URI.fromString(n.uri));var t=await(await Lu(n.withoutMarket).withPath("/tracks/"+r).withEndpointIdentifier("/tracks/{id}").send()).body;return{id:t.uri,name:t.name,uri:t.uri,image:0<t.album.images.length?t.album.images[0].url:null,artists:t.artists.map(e=>e.name).join(", "),album:t.album.name}}catch(e){return console.error("Failed to fetch track",e),a({uri:""}),null}var n,r},[a]),s=(0,zE.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:h,onSelectedIdChanged:p}=u0(o,i,s,e=>{a({uri:e?.uri??""})});return(0,zE.useEffect)(()=>{p(t)},[t,p]),zE.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},zE.default.createElement(tv,null),zE.default.createElement(C,null,zE.default.createElement(N,{title:"Track radio",tooltip:"Get a radio playlist based on a track."}),zE.default.createElement(Xw,{error:n.uri},zE.default.createElement(Yw,{control:r,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:$E,itemToString:s,label:"Track",placeholder:"Search for a track",inputValue:l,onInputChanged:c,onClear:m,onBlur:h})),zE.default.createElement(S,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),zE.default.createElement(T,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},zE.default.createElement(Iv,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),zE.default.createElement(T,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},zE.default.createElement(Iv,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),zE.default.createElement(T,{label:"Sort by",error:n.sortField},zE.default.createElement($v,{label:"Property to sort on",name:"sortField",control:r,items:BE,onChange:e=>{a({sortField:e})}})),zE.default.createElement(T,{label:"Order",error:n.sortOrder},zE.default.createElement($v,{label:"Sort order",name:"sortOrder",control:r,items:UE,onChange:e=>{a({sortOrder:e})}}))),zE.default.createElement(v,{type:"source",position:A.Right,style:{top:"40px"}}))},releaseDate:function(e){const{control:t,errors:n,updateNodeField:r}=Wy(e.id,e.data,zy("releaseDate"),Yg);return Zv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Zv.default.createElement(rv,null),Zv.default.createElement(C,null,Zv.default.createElement(N,{title:"Album release date"}),Zv.default.createElement(T,{label:"Minimum date",error:n.minDate},Zv.default.createElement(Kv,{control:t,placeholder:"Minimum date",name:"minDate",onChange:e=>{r({minDate:e})}})),Zv.default.createElement(T,{label:"Maximum date",error:n.maxDate},Zv.default.createElement(Kv,{control:t,placeholder:"Maximum date",name:"maxDate",onChange:e=>{r({maxDate:e})}}))),Zv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),Zv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},duration:function(e){const{control:t,errors:n,updateNodeField:r}=Wy(e.id,e.data,zy("duration"),Qd);return kv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},kv.default.createElement(rv,null),kv.default.createElement(C,null,kv.default.createElement(N,{title:"Duration"}),kv.default.createElement(T,{label:"Minimum duration",tooltip:"Duration in minutes",error:n.minDuration},kv.default.createElement(Iv,{control:t,placeholder:"None",name:"minDuration",onChange:e=>{r({minDuration:e})}})),kv.default.createElement(T,{label:"Maximum duration",tooltip:"Duration in minutes",error:n.maxDuration},kv.default.createElement(Iv,{control:t,placeholder:"None",name:"maxDuration",onChange:e=>{r({maxDuration:e})}}))),kv.default.createElement(v,{type:"target",position:A.Left,style:{top:"42px"}}),kv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},intersection:function(e){return Qv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Qv.default.createElement(nv,null),Qv.default.createElement(C,null,Qv.default.createElement(N,{title:"Intersection",tooltip:"Keep only the tracks that are in both inputs."}),Qv.default.createElement("p",null,"First input"),Qv.default.createElement("p",null,"Second input")),Qv.default.createElement(v,{type:"target",id:"first-set",position:A.Left,style:{top:"78px"}}),Qv.default.createElement(v,{type:"target",id:"second-set",position:A.Left,style:{top:"106px"}}),Qv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},difference:function(e){return Jv.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},Jv.default.createElement(nv,null),Jv.default.createElement(C,null,Jv.default.createElement(N,{title:"Difference",tooltip:"Keep only the tracks that are not in both inputs."}),Jv.default.createElement("p",null,"First input"),Jv.default.createElement("p",null,"Second input")),Jv.default.createElement(v,{type:"target",id:"first-set",position:A.Left,style:{top:"78px"}}),Jv.default.createElement(v,{type:"target",id:"second-set",position:A.Left,style:{top:"106px"}}),Jv.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))},relativeComplement:function(e){return e0.default.createElement(I,{isExecuting:e.data.isExecuting,isSelected:e.selected},e0.default.createElement(nv,null),e0.default.createElement(C,null,e0.default.createElement(N,{title:"Relative complement",tooltip:"Keep only the tracks that are in the first input and not in the second."}),e0.default.createElement("p",null,"First input"),e0.default.createElement("p",null,"Second input")),e0.default.createElement(v,{type:"target",id:"first-set",position:A.Left,style:{top:"78px"}}),e0.default.createElement(v,{type:"target",id:"second-set",position:A.Left,style:{top:"106px"}}),e0.default.createElement(v,{type:"source",position:A.Right,style:{top:"42px"}}))}},f=e(b());function t1(n){const t=Hy(e=>e.addNode);return f.default.createElement("li",null,f.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:n.tooltip,showDelay:500},f.default.createElement("button",{onDragStart:e=>{var t;e=e,t=n.nodeType,e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},draggable:!0,tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&(e=n.nodeType,t(e,{x:0,y:0}))},className:"hover:bg-spice-highlight hover:!text-spice-text w-full cursor-grab border-none bg-transparent !py-1 text-start"},f.default.createElement(S,{elementType:"span",fontSize:"medium"},n.label))))}function n1(e){return f.default.createElement("details",{className:"group"},f.default.createElement("summary",{className:"flex cursor-pointer list-none items-center gap-1"},f.default.createElement(S,{elementType:"h2",weight:"bold",fontSize:"medium",className:"inline"},e.label),f.default.createElement(cv,{className:"transition-transform group-open:rotate-180"})),f.default.createElement("div",{className:"!mt-2"},e.children))}function r1(e){return f.default.createElement(f.default.Fragment,null,f.default.createElement(S,{elementType:"h1",fontSize:"x-large"},e.label),f.default.createElement("hr",{className:"divide-solid opacity-60"}))}function a1(){return f.default.createElement("div",{className:"flex flex-col gap-2"},f.default.createElement("div",{className:"flex flex-col gap-2"},f.default.createElement(r1,{label:"Sources"}),f.default.createElement(n1,{label:"Library"},f.default.createElement("ul",null,f.default.createElement(t1,{label:"Liked songs",nodeType:"likedSongsSource",tooltip:"Get tracks from your liked songs."}),f.default.createElement(t1,{label:"Local files",nodeType:"localTracksSource",tooltip:"Get tracks from your local files."}),f.default.createElement(t1,{label:"Top tracks",nodeType:"topTracksSource",tooltip:"Get tracks from your top tracks."}),f.default.createElement(t1,{label:"Saved playlist",nodeType:"libraryPlaylistSource",tooltip:"Get tracks from a playlist in your library."}),f.default.createElement(t1,{label:"Saved album",nodeType:"libraryAlbumSource",tooltip:"Get tracks from an album in your library."}),f.default.createElement(t1,{label:"Saved artist",nodeType:"libraryArtistSource",tooltip:"Get tracks from an artist in your library."}))),f.default.createElement(n1,{label:"Search"},f.default.createElement("ul",null,f.default.createElement(t1,{label:"Artist",nodeType:"searchArtistSource",tooltip:"Get tracks from an artist."}),f.default.createElement(t1,{label:"Playlist",nodeType:"searchPlaylistSource",tooltip:"Get tracks from a playlist."}),f.default.createElement(t1,{label:"Album",nodeType:"searchAlbumSource",tooltip:"Get tracks from an album."}))),f.default.createElement(n1,{label:"Radio"},f.default.createElement("ul",null,f.default.createElement(t1,{label:"Track radio",nodeType:"radioTrackSource",tooltip:"Get a radio playlist for a track."}),f.default.createElement(t1,{label:"Artist radio",nodeType:"radioArtistSource",tooltip:"Get a radio playlist for an artist."}),f.default.createElement(t1,{label:"Album radio",nodeType:"radioAlbumSource",tooltip:"Get a radio playlist for an album."})))),f.default.createElement("div",{className:"flex flex-col gap-2"},f.default.createElement(r1,{label:"Filters"}),f.default.createElement(n1,{label:"Track property"},f.default.createElement("ul",null,f.default.createElement(t1,{label:"Is playable",nodeType:"isPlayable",tooltip:"Filter tracks that are playable."}),f.default.createElement(t1,{label:"Duration",nodeType:"duration",tooltip:"Filter tracks by duration."}))),f.default.createElement(n1,{label:"Album property"},f.default.createElement("ul",null,f.default.createElement(t1,{label:"Release date",nodeType:"releaseDate",tooltip:"Filter tracks by album release date."}))),f.default.createElement(n1,{label:"Audio features"},f.default.createElement("ul",null,f.default.createElement(t1,{label:"Acousticness",nodeType:"acousticness",tooltip:"Filter tracks by acousticness."}),f.default.createElement(t1,{label:"Danceability",nodeType:"danceability",tooltip:"Filter tracks by danceability."}),f.default.createElement(t1,{label:"Energy",nodeType:"energy",tooltip:"Filter tracks by energy."}),f.default.createElement(t1,{label:"Instrumentalness",nodeType:"instrumentalness",tooltip:"Filter tracks by instrumentalness."}),f.default.createElement(t1,{label:"Liveness",nodeType:"liveness",tooltip:"Filter tracks by liveness."}),f.default.createElement(t1,{label:"Speechiness",nodeType:"speechiness",tooltip:"Filter tracks by speechiness."}),f.default.createElement(t1,{label:"Valence",nodeType:"valence",tooltip:"Filter tracks by valence."}),f.default.createElement(t1,{label:"Loudness",nodeType:"loudness",tooltip:"Filter tracks by loudness."}),f.default.createElement(t1,{label:"Tempo",nodeType:"tempo",tooltip:"Filter tracks by tempo."}),f.default.createElement(t1,{label:"Mode",nodeType:"mode",tooltip:"Filter tracks by mode."})))),f.default.createElement("div",{className:"flex flex-col gap-2"},f.default.createElement(r1,{label:"Processing"}),f.default.createElement("ul",null,f.default.createElement(t1,{label:"Deduplicate",nodeType:"deduplicate",tooltip:"Remove duplicate tracks."}),f.default.createElement(t1,{label:"Shuffle",nodeType:"shuffle",tooltip:"Shuffle the tracks."}),f.default.createElement(t1,{label:"Sort",nodeType:"sort",tooltip:"Sort the tracks."}),f.default.createElement(t1,{label:"Intersection",nodeType:"intersection",tooltip:"Keep only the tracks that are in both inputs."}),f.default.createElement(t1,{label:"Difference",nodeType:"difference",tooltip:"Keep only the tracks that are not in both inputs."}),f.default.createElement(t1,{label:"Relative complement",nodeType:"relativeComplement",tooltip:"Keep only the tracks that are in the first input and not in the second."}))),f.default.createElement("div",{className:"flex flex-col gap-2"},f.default.createElement(r1,{label:"Result"}),f.default.createElement("ul",null,f.default.createElement(t1,{label:"Result",nodeType:"result",tooltip:"The workflow result."}))))}var i1=rn(t=>({showConfirmNewModal:!1,showConfirmLoadModal:!1,showConfirmDeleteModal:!1,selectedWorkflow:null,savedWorkflows:[],setShowConfirmNewModal:e=>{t({showConfirmNewModal:e})},setShowConfirmLoadModal:e=>{t({showConfirmLoadModal:e})},setShowConfirmDeleteModal:e=>{t({showConfirmDeleteModal:e})},setSelectedWorkflow:e=>{t({selectedWorkflow:e})},setSavedWorkflows:e=>{t({savedWorkflows:e})}})),o1=e(b());function s1(){const{showConfirmDeleteModal:e,setShowConfirmDeleteModal:n,selectedWorkflow:r,setSavedWorkflows:a}=i1(Qs(e=>({showConfirmDeleteModal:e.showConfirmDeleteModal,setShowConfirmDeleteModal:e.setShowConfirmDeleteModal,selectedWorkflow:e.selectedWorkflow,setSavedWorkflows:e.setSavedWorkflows})));return o1.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:e,onConfirm:()=>{var t,e;n(!1),null!==r&&(t=r.id,e=$d().filter(e=>e.id!==t),Spicetify.LocalStorage.set(Bd,JSON.stringify(e)),a($d()))},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Delete workflow",descriptionText:`Are you sure you want to delete the workflow "${r?.name??""}" ?`,confirmText:"Confirm",cancelText:"Cancel"})}var l1=e(b());function u1(){const e=Zy(Qs(e=>({loadWorkflow:e.loadWorkflow})))["loadWorkflow"],{showConfirmLoadModal:t,setShowConfirmLoadModal:n,selectedWorkflow:r}=i1(Qs(e=>({showConfirmLoadModal:e.showConfirmLoadModal,setShowConfirmLoadModal:e.setShowConfirmLoadModal,selectedWorkflow:e.selectedWorkflow})));return l1.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:t,onConfirm:()=>{n(!1),null!==r&&e(r),Spicetify.PopupModal.hide()},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Load workflow",descriptionText:"You have unsaved changes that will be lost. Confirm?",confirmText:"Confirm",cancelText:"Cancel"})}var c1=e(b());function d1(){const e=Zy(Qs(e=>({resetState:e.resetState})))["resetState"],{showConfirmNewModal:t,setShowConfirmNewModal:n}=i1(Qs(e=>({showConfirmNewModal:e.showConfirmNewModal,setShowConfirmNewModal:e.setShowConfirmNewModal})));return c1.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:t,onConfirm:()=>{n(!1),e()},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Create new workflow",descriptionText:"You have unsaved changes that will be lost. Confirm?",confirmText:"Confirm",cancelText:"Cancel"})}var m1={"grid-container":"EditorPage-module__grid-container___Mvr8j_playlistDmaker",padding:"EditorPage-module__padding___n1uom_playlistDmaker",sidenav:"EditorPage-module__sidenav___UBA-J_playlistDmaker",main:"EditorPage-module__main___kYWdy_playlistDmaker"},f1=e(b()),h1=e(b());function p1(){const{hasPendingChanges:t,loadWorkflow:n}=Zy(Qs(e=>({hasPendingChanges:e.hasPendingChanges,loadWorkflow:e.loadWorkflow}))),{setShowConfirmLoadModal:r,setShowConfirmDeleteModal:a,setSelectedWorkflow:i,savedWorkflows:e,setSavedWorkflows:o}=i1(Qs(e=>({setShowConfirmLoadModal:e.setShowConfirmLoadModal,setShowConfirmDeleteModal:e.setShowConfirmDeleteModal,setSelectedWorkflow:e.setSelectedWorkflow,savedWorkflows:e.savedWorkflows,setSavedWorkflows:e.setSavedWorkflows})));return(0,h1.useEffect)(()=>{o($d())},[o]),h1.default.createElement(h1.default.Fragment,null,0===e.length&&h1.default.createElement(S,{elementType:"small",semanticColor:"textSubdued"},"No saved workflows"),e.map(e=>h1.default.createElement("div",{key:e.id,className:"flex flex-row items-center justify-between"},h1.default.createElement(S,null,e.name),h1.default.createElement("div",null,h1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Load workflow"},h1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Load workflow",onClick:()=>{i(e),t?r(!0):(n(e),Spicetify.PopupModal.hide())},buttonSize:"sm",iconOnly:()=>h1.default.createElement(pv,{size:20})})),h1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Delete workflow"},h1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Delete workflow",onClick:()=>{i(e),a(!0)},buttonSize:"sm",iconOnly:()=>h1.default.createElement(wv,{size:20,className:"text-spice-error"})}))))))}var g1=a.object({workflowName:a.string().nonempty({message:"Name cannot be empty"})});function y1(){const{workflowName:n,setWorkflowName:e,hasPendingChanges:t,reactFlowInstance:r,workflowId:a,onWorkflowSaved:i,resetState:o,anyExecuting:s}=Zy(Qs(e=>({workflowName:e.workflowName,setWorkflowName:e.setWorkflowName,hasPendingChanges:e.hasPendingChanges,reactFlowInstance:e.reactFlowInstance,workflowId:e.workflowId,onWorkflowSaved:e.onWorkflowSaved,resetState:e.resetState,anyExecuting:e.anyExecuting}))),{formState:{errors:l,isValid:u},control:c,getValues:d,setValue:m}=hu({mode:"onChange",disabled:s,defaultValues:{workflowName:n},resolver:wu(g1)}),f=Al({control:c}),h=((0,f1.useEffect)(()=>{e(f.workflowName??"")},[f,e]),(0,f1.useEffect)(()=>{d("workflowName")!==n&&m("workflowName",n,{shouldValidate:!0})},[n,d,m]),i1(Qs(e=>({setShowConfirmNewModal:e.setShowConfirmNewModal}))))["setShowConfirmNewModal"],p=(0,f1.useCallback)(()=>{var t,e;null!==r&&(e=r.toObject(),t={...e,id:a,name:n},e=$d().filter(e=>e.id!==t.id),Spicetify.LocalStorage.set(Bd,JSON.stringify([...e,t])),i(),Spicetify.showNotification("Workflow saved",!1,1e3))},[r,i,a,n]),g=(0,f1.useCallback)(()=>{t?h(!0):o()},[t,o,h]);return f1.default.createElement(ia,{className:"flex items-center rounded-lg",position:"top-center"},f1.default.createElement("div",{className:"flex-col ps-1"},f1.default.createElement("div",{className:"flex items-center"},f1.default.createElement(lE,{placeholder:"",control:c,name:"workflowName",required:!0}),f1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Save workflow"},f1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Save workflow",disabled:!t||!u,onClick:()=>{p()},buttonSize:"sm",iconOnly:()=>f1.default.createElement(vv,{size:20})}))),f1.default.createElement(Tv,{error:l.workflowName})),f1.default.createElement("div",{className:"mx-1 self-stretch border-l border-solid border-(--text-subdued)"}),f1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Manage workflows"},f1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Manage workflows",onClick:()=>{Spicetify.PopupModal.display({title:"Saved workflows",content:f1.default.createElement(p1),isLarge:!1})},buttonSize:"sm",iconOnly:()=>f1.default.createElement(yv,{size:20})})),f1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Create new"},f1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Create new",onClick:()=>{g()},buttonSize:"sm",iconOnly:()=>f1.default.createElement(hv,{size:20})})))}var v1=e(b()),b1={panel:"TopLeftPanel-module__panel___tilhV_playlistDmaker","divider-horizontal":"TopLeftPanel-module__divider-horizontal___ZDnoT_playlistDmaker"},w1=e(b()),E1="HelpButton-module__help-panel___puwoe_playlistDmaker",S1="HelpButton-module__help-button___yRJAR_playlistDmaker",x1=e(b()),k1="HelpModal-module__help-modal___VsRP1_playlistDmaker";function _1(e){return x1.default.createElement(S,{elementType:"p",semanticColor:"textSubdued",fontSize:"medium",paddingBottom:"1rem"},e.children)}function I1(e){return x1.default.createElement(S,{elementType:"span",semanticColor:"textBase",fontSize:"medium"},e.children)}function C1(){return x1.default.createElement("div",{className:k1},x1.default.createElement(_1,null,"Drag and drop nodes from the side menu to create a workflow.",x1.default.createElement("br",null),"Move nodes in the editor by dragging them by their header."),x1.default.createElement(_1,null,"A workflow must have ",x1.default.createElement(I1,null,"at least one source node"),", and ",x1.default.createElement(I1,null,"one result node"),".",x1.default.createElement("br",null),"Connect the nodes together to create a workflow. Connections on the right of the nodes are ",x1.default.createElement(I1,null,"outputs"),", and connections on the left are ",x1.default.createElement(I1,null,"inputs"),".",x1.default.createElement("br",null),"Nodes can accept ",x1.default.createElement(I1,null,"multiple connections")," on their input side."),x1.default.createElement(_1,null,"Select a node by clicking on it. The selected node will be highlighted.",x1.default.createElement("br",null),"To select multiple nodes, hold down the ",x1.default.createElement("kbd",null,"Control")," key while clicking on the nodes.",x1.default.createElement("br",null),"Selected nodes can be moved together by dragging any of them.",x1.default.createElement("br",null),"Selected nodes can be ",x1.default.createElement(I1,null,"deleted")," by selecting it and pressing the ",x1.default.createElement("kbd",null,"Backspace")," key."),x1.default.createElement(_1,null,"Hover over the node names in the menu to see a description of the node."),x1.default.createElement(_1,null,"When the workflow is done, click the"," ",x1.default.createElement(I1,null,'"Execute"')," button to run the workflow.",x1.default.createElement("br",null),"The results will be displayed in the"," ",x1.default.createElement(I1,null,'"Result" tab'),".",x1.default.createElement("br",null),"You can then either play the tracks directly or save the result to a playlist."),x1.default.createElement(_1,null,"You can ",x1.default.createElement(I1,null,"save")," and ",x1.default.createElement(I1,null,"load")," ","workflows using the buttons in the top center of the editor."))}function N1(){return w1.default.createElement("div",{className:E1},w1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Help",placement:"right"},w1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Help",iconOnly:()=>w1.default.createElement(mv,{size:20,strokeWidth:1.5}),buttonSize:"sm",onClick:()=>{Spicetify.PopupModal.display({title:"Help",content:w1.default.createElement(C1,null),isLarge:!0})},className:S1})))}var T1=e(b()),O1=e(b());function M1(){return O1.default.createElement(S,{elementType:"p",semanticColor:"textSubdued",fontSize:"small"},"Coming soon")}function A1(){return T1.default.createElement("div",{className:"flex flex-col items-center"},T1.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Settings",placement:"right"},T1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Settings",iconOnly:()=>T1.default.createElement(bv,{size:20,strokeWidth:1.5,className:"text-spice-text"}),buttonSize:"sm",onClick:()=>{Spicetify.PopupModal.display({title:"Settings",content:T1.default.createElement(M1),isLarge:!0})},className:"p-1"})))}function R1(){return v1.default.createElement(ia,{className:b1.panel,position:"top-left"},v1.default.createElement(N1,null),v1.default.createElement("div",{className:b1["divider-horizontal"]}),v1.default.createElement(A1,null))}var D1=e(b()),P1={panel:"TopRightPanel-module__panel___dSzF7_playlistDmaker"};function L1(){const{nodes:e,edges:t}=Zy(Qs(e=>({nodes:e.nodes,edges:e.edges})));return D1.default.createElement(ia,{className:P1.panel,position:"top-right"},D1.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Execute",onClick:async()=>{(async function(t,n){var r=Zy.getState().setResult,a=Zy.getState().updateNodeData,i=Zy.getState().nodeFormValidationCallbacks,o=t.filter(e=>"result"===e.type);if(0===o.length)Spicetify.showNotification("No result node found in workflow",!0);else if(1<o.length)Spicetify.showNotification("The workflow should have only one result node",!0);else{o=o[0];let e=!0;for(const h of i.values()){var s=await h();e=e&&s}if(e){for(var l=ri(o,t,n),i=Uy.result(o,l,n),u={[o.id]:i},c=new Set([o.id]);0<l.length;){var d,m,f=l.pop();c.has(f.id)||(c.add(f.id),d=ri(f,t,n),m=f.type,u[f.id]=Uy[m](f,d,n),l.push(...d))}try{r(await i.getResults(u)),Spicetify.showNotification("Workflow executed successfully",!1,1e3)}catch(e){console.error("Error while executing workflow:",e),Spicetify.showNotification("Error while executing workflow",!0),r([]);for(const p of t)a(p.id,{isExecuting:!1})}}else Spicetify.showNotification("Some nodes are invalid",!0)}})(e,t)},buttonSize:"sm",iconLeading:()=>D1.default.createElement(fv,{size:20})},"Execute"))}var F1=e=>({reactFlowInstance:e.reactFlowInstance,nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,addNode:e.addNode,setReactFlowInstance:e.setReactFlowInstance,getNodes:e.getNodes,getEdges:e.getEdges});function V1(){const{nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:a,addNode:i,reactFlowInstance:o,setReactFlowInstance:s,getNodes:l,getEdges:u}=Hy(Qs(F1));var c=(0,De.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),d=(0,De.useCallback)(e=>{e.preventDefault();var t=e.dataTransfer.getData("application/reactflow");void 0!==t&&t&&(e=o?.screenToFlowPosition({x:e.clientX,y:e.clientY})??{x:0,y:0},i(t,e))},[o,i]),m=(0,De.useCallback)(r=>{const a=l(),i=u();var e=a.find(e=>e.id===r.target);if(void 0===e)return!1;const o=(e,t=new Set)=>{if(!t.has(e.id)){t.add(e.id);for(const n of ni(e,a,i)){if(n.id===r.source)return!0;if(o(n,t))return!0}}return!1};return e.id!==r.source&&!o(e)},[l,u]);return De.default.createElement(De.default.Fragment,null,De.default.createElement("div",{id:"playlist-maker",className:"app-container"},De.default.createElement("div",{className:Spicetify.classnames(m1["grid-container"],"gap-panel h-full w-full")},De.default.createElement("div",{className:Spicetify.classnames(m1.padding,"panel")}),De.default.createElement("div",{className:Spicetify.classnames(m1.sidenav,"panel overflow-scroll !p-5")},De.default.createElement(a1,null)),De.default.createElement("div",{className:Spicetify.classnames(m1.main,"panel")},De.default.createElement(Ss,{nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:a,onInit:s,onDrop:d,onDragOver:c,deleteKeyCode:["Backspace"],nodeTypes:e1,isValidConnection:m,selectNodesOnDrag:!1},De.default.createElement(R1,null),De.default.createElement(y1,null),De.default.createElement(L1,null),De.default.createElement($s,null),De.default.createElement(As,null),De.default.createElement(Gs,{variant:js.Dots,gap:12,size:1}))))),De.default.createElement(d1,null),De.default.createElement(u1,null),De.default.createElement(s1,null))}var j1=e(b());var z1=e(b());function B1(e,...t){let n=y().Translations;for(const a of e){if("string"==typeof n)throw new Error(`Key "${a}" not found in translations.`);n=n[a]}let r=n;return t.forEach((e,t)=>{r=r.replace(`{${t.toFixed()}}`,e)}),r}var U1=e(b()),$1={"display-list":"TrackListGrid-module__display-list___ahMmJ_playlistDmaker","display-list-compact":"TrackListGrid-module__display-list-compact___Uwrj2_playlistDmaker"},H1=e(b()),Z1=e(b());function W1(e){return Z1.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Z1.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var K1=e(b());function Y1(e){return K1.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},K1.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function q1(n){function r(){return void 0===n.sortedHeader?H1.default.createElement(H1.default.Fragment,null):"ascending"===n.sortedHeader.order?H1.default.createElement(W1,{className:"main-trackList-arrow"}):H1.default.createElement(Y1,{className:"main-trackList-arrow"})}const a=void 0!==n.sortedHeader?"main-trackList-sortable":"";return H1.default.createElement("div",{className:"main-trackList-trackListHeader"},H1.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid","aria-rowindex":1},H1.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),n.headers.map((e,t)=>H1.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,"aria-sort":n.sortedHeader&&n.sortedHeader.key===e.key?n.sortedHeader.order:"none",tabIndex:-1},H1.default.createElement("button",{className:"main-trackList-column "+a,tabIndex:-1,onClick:()=>{n.onHeaderClicked?.(e.key)}},H1.default.createElement(S,{variant:"mesto"},e.label),n.sortedHeader&&n.sortedHeader.key===e.key&&r()))),H1.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":n.headers.length+2,"aria-sort":"none",tabIndex:-1},H1.default.createElement("button",{"aria-label":B1(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+a,onClick:()=>{n.onHeaderClicked?.("duration")}},H1.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},H1.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),H1.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),n.sortedHeader&&"duration"===n.sortedHeader.key&&r())))}var X1=e(b());var G1=e(b());function J1(e){const[t,n]=(0,G1.useState)(y().LibraryAPI.containsSync(e));return(0,G1.useEffect)(()=>{y().LibraryAPI.contains(e).then(e=>{n(e[0])}).catch(console.error)},[e]),[t,n]}var h=e(b());function Q1(n){var e=(0,h.useRef)(null);const r=function(t){const[e,n]=(0,X1.useState)(!1);return(0,X1.useEffect)(()=>{const e=new IntersectionObserver(e=>{n(e.some(e=>e.isIntersecting))},{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}(e),[t,a]=(0,h.useState)(!1),[i,o]=J1(n.track.uri);(0,h.useEffect)(()=>{const e=y().LibraryAPI;if(r){const t=e=>{e.data.uris.some(e=>e===n.track.uri)&&("add"===e.data.operation?o(!0):"remove"===e.data.operation&&o(!1))};return e.getEvents().addListener("operation_complete",t),()=>{e.getEvents().removeListener("operation_complete",t)}}},[r,n.track.uri,o]);var s=h.default.createElement("div",{style:{height:"compact"===n.displayType?"32px":"54px"}}),l=h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:B1(["save_to_your_liked_songs"]),showDelay:100},h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":B1(["save_to_your_liked_songs"]),iconOnly:()=>h.default.createElement(fE,{icon:"plus-alt",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"},onClick:async function(){await y().LibraryAPI.add({uris:[n.track.uri]})}})),u=h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:B1(["remove_from_your_liked_songs"]),showDelay:100},h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":B1(["remove_from_your_liked_songs"]),iconOnly:()=>h.default.createElement(fE,{icon:"check-alt-fill",iconSize:16}),buttonSize:"sm",style:{padding:0},onClick:async function(){await y().LibraryAPI.remove({uris:[n.track.uri]})},semanticColor:"essentialBrightAccent"})),c=h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>h.default.createElement(h.default.Fragment,null),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}});let d;switch(i){case!0:d=u;break;case!1:d=l;break;default:d=c}return h.default.createElement("div",{ref:e,onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)}},r?h.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:n.getRowMenu(n.track)},h.default.createElement("div",{"aria-selected":n.selected,onClick:n.onClick,onDoubleClick:()=>{n.track.isPlayable&&n.onDoubleClick()},draggable:"true",onDragStart:e=>{n.dragHandler.draggable&&n.dragHandler.onDragStart(e)}},h.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${n.active?"main-trackList-active":""} ${n.selected?"main-trackList-selected":""} `+("compact"===n.displayType?"main-trackList-rowCompactMode":""),style:{opacity:n.track.isPlayable?1:.4}},h.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},h.default.createElement("div",{className:"main-trackList-rowMarker"},n.playing?h.default.createElement(h.default.Fragment,null,h.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-animated-green.gif"}),h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:B1(["playback-control.pause"]),showDelay:200},h.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":B1(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>{Spicetify.Player.pause()}},h.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},h.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):h.default.createElement(h.default.Fragment,null,h.default.createElement("span",{className:"main-trackList-number"},n.index),n.track.isPlayable&&h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:B1(["tracklist.a11y.play"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),showDelay:200},h.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":B1(["tracklist.a11y.play"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),onClick:()=>{n.active?Spicetify.Player.play():n.track.isPlayable&&n.onDoubleClick()},tabIndex:-1},h.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},h.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),void 0!==n.children&&h.Children.map(n.children,(e,t)=>h.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,tabIndex:-1},e)),h.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":h.Children.count(n.children)+2,tabIndex:-1},d,h.default.createElement(S,{variant:"mesto",semanticColor:"textSubdued",className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(n.track.duration)),h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:B1(["more.label.track"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),showDelay:100},h.default.createElement("div",null,h.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:n.getRowMenu(n.track)},h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":B1(["more.label.track"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),"aria-haspopup":"menu",iconOnly:()=>h.default.createElement(fE,{icon:"more",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}})))))))):s)}function eS(n){const r=function(){const[e,t]=(0,j1.useState)(Spicetify.Player.data.item.uri);return(0,j1.useEffect)(()=>{function e(e){t(e?.data.item.uri??"")}return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}}),e}(),a=function(){const[e,t]=(0,z1.useState)(Spicetify.Player.data.isPaused?"pause":"play");return(0,z1.useEffect)(()=>{function e(e){t(e.data.isPaused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),e}(),[i,o]=(0,U1.useState)(new Map),s=(0,U1.useMemo)(()=>{var e=Array.from(i.entries());return 0===e.length?Spicetify.ReactHook.DragHandler({itemUris:[],dragLabelText:""}):Spicetify.ReactHook.DragHandler({itemUris:e.map(e=>e[0]),dragLabelText:1<i.size?B1(["tracklist.drag.multiple.label","other"],i.size.toFixed()):e[0][1].name})},[i]);function l(e,t){e.ctrlKey?(i.has(t.uri)?i.delete(t.uri):i.set(t.uri,t),o(new Map(i))):o(new Map([[t.uri,t]]))}return U1.default.createElement("div",{className:"contentSpacing"},U1.default.createElement("div",{role:"grid","aria-rowcount":n.tracks.length,"aria-colcount":n.headers.length+2,"aria-label":n.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},U1.default.createElement(q1,{headers:n.headers,sortedHeader:n.sortedHeader,onHeaderClicked:n.onHeaderClicked}),U1.default.createElement("div",{className:"compact"===n.displayType?$1["display-list-compact"]:$1["display-list"]},n.tracks.map((t,e)=>U1.default.createElement(Q1,{key:t.uri,track:t,index:n.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===a,onClick:e=>{l(e,t)},onDoubleClick:()=>{n.onPlayTrack(t.uri)},dragHandler:s,displayType:n.displayType,getRowMenu:n.getRowMenu},n.getRowContent(t))),n.subtracks.map(e=>U1.default.createElement(U1.default.Fragment,null,e.headerRow,e.tracks.map((t,e)=>U1.default.createElement(Q1,{key:t.uri,track:t,index:n.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===a,onClick:e=>{l(e,t)},onDoubleClick:()=>{n.onPlayTrack(t.uri)},dragHandler:s,displayType:n.displayType,getRowMenu:n.getRowMenu},n.getRowContent(t))))))))}var tS=e(b());function nS(e){return tS.default.createElement(S,{variant:"mesto"},tS.default.createElement("a",{className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>{e.onAlbumClick(e.track.album.uri)}},e.track.album.name))}var rS=e(b()),aS=e(b());function iS(t){return aS.default.createElement("div",{className:"main-trackList-rowMainContent"},aS.default.createElement(S,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase"},t.track.name),t.withArtists&&aS.default.createElement(S,{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line",variant:"mesto",semanticColor:"textSubdued"},t.track.artists.map(e=>aS.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,aS.default.createElement(aS.default.Fragment,null,", "),t],null)))}function oS(e){const t=rS.default.createElement("div",{className:"main-trackList-rowImage main-trackList-rowImageFallback"},rS.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},rS.default.createElement("path",{d:"M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"})));var n=0===(n=e.track.album).images.length?"":n.images[0].url;return rS.default.createElement(rS.default.Fragment,null,""!==n?rS.default.createElement("img",{loading:"eager",src:n,className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t,rS.default.createElement(iS,{track:e.track,withArtists:e.withArtists,onArtistClick:e.onArtistClick}))}var sS,lS,uS='<path d="M16 15H2v-1.5h14V15zm0-4.5H2V9h14v1.5zm-8.034-6A5.484 5.484 0 0 1 7.187 6H13.5a2.5 2.5 0 0 0 0-5H7.966c.159.474.255.978.278 1.5H13.5a1 1 0 1 1 0 2H7.966zM2 2V0h1.5v2h2v1.5h-2v2H2v-2H0V2h2z"></path>',cS=e(b()),dS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},mS=(sS="Radio",lS=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],(bd=(0,cS.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:a,...i},o)=>(0,cS.createElement)("svg",{ref:o,...dS,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:"lucide lucide-"+sS.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),...i},[...lS.map(([e,t])=>(0,cS.createElement)(e,t)),...(Array.isArray(a)?a:[a])||[]]))).displayName=""+sS,bd),fS=e(b()),hS=e(b()),pS=e(b());function gS(e){return pS.default.createElement(Spicetify.ReactComponent.Menu,{className:"encore-dark-theme main-contextMenu-menu"},e.children)}function yS(t){return hS.default.createElement(gS,null,t.artists.map(e=>hS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},hS.default.createElement("span",null,e.name))))}var vS=e(b());function bS(n){const[e,r]=(0,vS.useState)([]);return(0,vS.useEffect)(()=>{!async function(){const t=await y().UserAPI.getUser();var e=(await iE()).filter(e=>e.owner.uri===t.uri);r(e)}()},[]),vS.default.createElement(gS,null,e.map(t=>vS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async()=>{var e;e=t.uri,await y().PlaylistAPI.add(e,n.tracksUri,{after:"end"})},key:t.uri},vS.default.createElement("span",null,t.name))))}var wS=e(b());function ES(e){var t=Spicetify.ReactDOMServer.renderToString(wS.default.createElement(Spicetify.ReactComponent.MenuItem,{leadingIcon:e.leadingIcon,trailingIcon:wS.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},wS.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))},wS.default.createElement("span",null,e.label)));return wS.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},wS.default.createElement("div",{role:"menu",tabIndex:0,onMouseEnter:e=>{e.currentTarget.click()},dangerouslySetInnerHTML:{__html:t}}))}function SS(t){var[e]=J1(t.track.uri);let n;switch(e){case!0:n=fS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await y().LibraryAPI.remove({uris:[t.track.uri]})},leadingIcon:fS.default.createElement(fE,{icon:"check-alt-fill",iconSize:16,semanticColor:"essentialBrightAccent"})},fS.default.createElement("span",null,B1(["remove_from_your_liked_songs"])));break;case!1:n=fS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await y().LibraryAPI.add({uris:[t.track.uri]})},leadingIcon:fS.default.createElement(fE,{icon:"plus-alt",iconSize:16})},fS.default.createElement("span",null,B1(["save_to_your_liked_songs"])));break;default:n=fS.default.createElement(Spicetify.ReactComponent.MenuItem,null,fS.default.createElement("span",null,"..."))}return fS.default.createElement(gS,null,fS.default.createElement(ES,{label:B1(["contextmenu.add-to-playlist"]),submenu:fS.default.createElement(bS,{tracksUri:[t.track.uri]}),leadingIcon:fS.default.createElement(fE,{icon:"plus2px",iconSize:16})}),n,fS.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:async function(){await y().PlayerAPI.addToQueue([{uri:t.track.uri}])},leadingIcon:fS.default.createElement(fE,{iconPath:uS,iconSize:16})},fS.default.createElement("span",null,B1(["contextmenu.add-to-queue"]))),1===t.track.artists.length?fS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(t.track.artists[0].uri)},leadingIcon:fS.default.createElement(fE,{icon:"artist",iconSize:16})},fS.default.createElement("span",null,B1(["contextmenu.go-to-artist"]))):fS.default.createElement(ES,{label:B1(["contextmenu.go-to-artist"]),submenu:fS.default.createElement(yS,{artists:t.track.artists,onArtistClick:t.onArtistClick}),leadingIcon:fS.default.createElement(fE,{icon:"artist",iconSize:16})}),fS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onAlbumClick(t.track.album.uri)},leadingIcon:fS.default.createElement(fE,{icon:"album",iconSize:16})},fS.default.createElement("span",null,B1(["contextmenu.go-to-album"]))),!Spicetify.URI.isLocalTrack(t.track.uri)&&fS.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){var e=await Oy(t.track.uri);y().History.push(Spicetify.URI.fromString(e).toURLPath(!0))},leadingIcon:fS.default.createElement(mS,{size:16})},fS.default.createElement("span",null,B1(["contextmenu.go-to-song-radio"]))))}var xS=e(b());function kS(t){let e;return"lg"===t.size?e="large":"md"===t.size?e="medium":"sm"===t.size&&(e="small"),xS.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{"aria-label":B1(["play"]),size:e,buttonSize:t.size,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()},iconOnly:()=>xS.default.createElement(fE,{icon:"play"})})}var _S=e(b()),IS=e(b()),CS={"button-wrapper":"CreatePlaylistModal-module__button-wrapper___bVbk-_playlistDmaker",fieldset:"CreatePlaylistModal-module__fieldset___tZbPT_playlistDmaker"},NS=a.object({playlistName:a.string().nonempty({message:"Name cannot be empty"}),parentFolder:a.string().optional()});function TS(){const[e,i]=IS.default.useState(!1),[t,n]=IS.default.useState([]),{workflowName:r,result:o}=Zy(Qs(e=>({workflowName:e.workflowName,result:e.result}))),{formState:{errors:a,isValid:s},getValues:l,control:u}=hu({mode:"onChange",defaultValues:{playlistName:"",parentFolder:void 0},values:{playlistName:r},resolver:wu(NS)}),c=(0,IS.useCallback)(async()=>{i(!0);var e=y().RootlistAPI,t=y().PlaylistAPI,{playlistName:n,parentFolder:r}=l();try{var a=await e.createPlaylist(n,{after:void 0!==r&&""!==r?{uri:r}:"end"});await t.add(a,o.map(e=>e.uri),{after:"end"})}catch(e){return console.error("Error creating playlist",e),Spicetify.showNotification("Error creating playlist",!1),void i(!1)}i(!1),Spicetify.PopupModal.hide()},[l,o]);return(0,IS.useEffect)(()=>{!async function(){var e=await async function(){var e=await y().RootlistAPI.getContents();const t=e=>e.filter(rE).flatMap(e=>[e,...t(e.items)]);return t(e.items)}();n(e.map(e=>({uri:e.uri,name:e.name})))}()},[]),IS.default.createElement("div",null,IS.default.createElement(S,{paddingBottom:"8px",weight:"bold",elementType:"p"},"Save ",o.length," tracks to a new playlist"),IS.default.createElement("fieldset",{className:CS.fieldset,disabled:e},IS.default.createElement("label",null,IS.default.createElement(S,{elementType:"small",paddingBottom:"4px"},"Playlist name"),IS.default.createElement(lE,{placeholder:"Playlist name",control:u,name:"playlistName"})),IS.default.createElement(Tv,{error:a.playlistName}),IS.default.createElement("label",null,IS.default.createElement(S,{elementType:"small",paddingBottom:"4px"},"Parent folder"),IS.default.createElement($v,{label:"Root",name:"parentFolder",control:u,items:t.map(e=>({label:e.name,value:e.uri}))})),IS.default.createElement("div",{className:CS["button-wrapper"]},IS.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{disabled:!s,buttonSize:"sm",onClick:async()=>{await c()}},"Create playlist"))))}var OS={"grid-container":"ResultPage-module__grid-container___xqfAg_playlistDmaker",padding:"ResultPage-module__padding___d6g1j_playlistDmaker",main:"ResultPage-module__main___WzLf0_playlistDmaker"};function MS(){const t=y().History,n=Zy(Qs(e=>({result:e.result})))["result"];var e,r,a,i,o=[{key:"title",label:B1(["tracklist.header.title"])},{key:"album",label:B1(["tracklist.header.album"])},{key:"source",label:"Source"}];const s=async e=>{e=e?{uri:e}:void 0;await y().PlayerAPI.play({uri:"",pages:[{items:n}]},{},{skipTo:e})};return _S.default.createElement("div",{id:"playlist-maker",className:"app-container"},_S.default.createElement("div",{className:Spicetify.classnames(OS["grid-container"],"gap-panel h-full w-full")},_S.default.createElement("div",{className:Spicetify.classnames(OS.padding,"panel")}),_S.default.createElement("div",{className:Spicetify.classnames(OS.main,"panel")},_S.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},_S.default.createElement("div",{className:"main-actionBar-ActionBarRow"},_S.default.createElement("div",{className:"main-playButton-PlayButton"},_S.default.createElement(kS,{disabled:0===n.length,size:"lg",onClick:()=>{s()}})),_S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Create playlist from tracks"},_S.default.createElement(Spicetify.ReactComponent.ButtonSecondary,{disabled:0===n.length,"aria-label":"Create playlist from tracks",iconOnly:()=>_S.default.createElement(uv,{size:30}),buttonSize:"lg",onClick:()=>{Spicetify.PopupModal.display({title:"Create playlist",content:_S.default.createElement(TS,null),isLarge:!0})},className:OS["help-button"]})),0<n.length&&_S.default.createElement("p",null,B1(["tracklist-header.songs-counter",1===n.length?"one":"other"],n.length.toFixed()),_S.default.createElement("span",{className:"main-entityHeader-divider"}),(e=n.reduce((e,t)=>e+t.duration,0),r=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),i=[],0!==e&&i.push(B1(["time.hours.short",1===e?"one":"other"],e.toFixed())),0!==a&&i.push(B1(["time.minutes.short",1===a?"one":"other"],a.toFixed())),0===e&&0!==r&&i.push(B1(["time.seconds.short",1===r?"one":"other"],r.toFixed())),i.join(" "))))),_S.default.createElement(eS,{tracks:n.map(e=>({...e,addedAt:null,trackNumber:0})),subtracks:[],gridLabel:B1(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>{s(e)},headers:o,getRowContent:e=>{return[_S.default.createElement(oS,{track:e,withArtists:!0,key:e.uri,onArtistClick:e=>{t.push("/artist/"+Fu(Spicetify.URI.fromString(e)))}}),_S.default.createElement(nS,{track:e,key:e.uri,onAlbumClick:e=>{t.push("/album/"+Fu(Spicetify.URI.fromString(e)))}}),_S.default.createElement(S,{key:e.uri,variant:"mesto",className:"standalone-ellipsis-one-line"},e.source)]},displayType:"list",getRowMenu:e=>_S.default.createElement(SS,{track:e,onArtistClick:e=>{var t=y().History,e=Spicetify.URI.fromString(e).toURLPath(!0);t.push(e)},onAlbumClick:e=>{var t=y().History,e=Spicetify.URI.fromString(e).toURLPath(!0);t.push(e)}})}))))}var _d="/playlist-maker",AS=_d+"/editor",RS=_d+"/result",DS=[{key:"Editor",href:AS,label:"Editor"},{key:"Result",href:RS,label:"Result"}];var PS=function(){(0,ye.useEffect)(()=>{!async function(){await we("playlist-maker",Ee,{title:"New in v"+Ee,content:ye.default.createElement("p",null,ye.default.createElement("ul",null,Se.map(e=>ye.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]);const t=y().History,n=t.location;let e=ye.default.createElement(ye.default.Fragment,null);switch(n.pathname){case AS:e=ye.default.createElement(V1,null);break;case RS:e=ye.default.createElement(MS,null);break;default:t.replace(AS)}var r=document.querySelector(".main-topBar-topbarContentWrapper");return ye.default.createElement(ye.default.Fragment,null,e,null!==r&&Spicetify.ReactDOM.createPortal(ye.default.createElement(Re,{onItemClicked:e=>{t.push(e.href)},items:DS,activeItem:DS.find(e=>e.href.startsWith(n.pathname))??DS[0]}),r))},LS=e(b());return Md=he,U(R({},"__esModule",{value:!0}),Md)})();const render=()=>playlistDmaker.default();